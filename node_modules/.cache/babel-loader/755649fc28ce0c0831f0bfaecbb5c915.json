{"ast":null,"code":"var _jsxFileName = \"/Users/paul/OneDrive/Documents/code/src/swrve/src/chart.js\";\nimport { useState } from \"react\";\nimport * as React from \"react\";\nimport { Box } from \"@mui/system\";\nimport * as d3 from \"d3\";\nimport HistoricalData from \"./historical_data\";\nimport \"./chartdata.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      histDataState: null,\n      focusState: null,\n      tooltipWrapperState: null,\n      yearTooltipState: null,\n      equityTooltipState: null,\n      bondTooltipState: null,\n      inflationTooltipState: null,\n      tooltipBackgroundState: null,\n      hoverLineState: null\n    };\n  }\n\n  render() {\n    var dataset = [{\n      year: 1921,\n      inflation: -0.1090,\n      equity: 0.0267,\n      bond: 0.1088\n    }, {\n      year: 1922,\n      inflation: -0.0620,\n      equity: 0.2192,\n      bond: 0.0386\n    }, {\n      year: 1923,\n      inflation: 0.0180,\n      equity: -0.0079,\n      bond: 0.0658\n    }, {\n      year: 1924,\n      inflation: 0.0040,\n      equity: 0.1982,\n      bond: 0.0556\n    }, {\n      year: 1925,\n      inflation: 0.0240,\n      equity: 0.1957,\n      bond: 0.0522\n    }, {\n      year: 1926,\n      inflation: 0.0090,\n      equity: 0.0593,\n      bond: 0.0629\n    }, {\n      year: 1927,\n      inflation: -0.0190,\n      equity: 0.3082,\n      bond: 0.0342\n    }, {\n      year: 1928,\n      inflation: -0.0120,\n      equity: 0.4181,\n      bond: 0.0129\n    }, {\n      year: 1929,\n      inflation: 0.0000,\n      equity: -0.1267,\n      bond: 0.0598\n    }, {\n      year: 1930,\n      inflation: -0.0270,\n      equity: -0.2639,\n      bond: 0.0291\n    }, {\n      year: 1931,\n      inflation: -0.0890,\n      equity: -0.4806,\n      bond: 0.0077\n    }, {\n      year: 1932,\n      inflation: -0.1030,\n      equity: -0.1458,\n      bond: 0.0652\n    }, {\n      year: 1933,\n      inflation: -0.0520,\n      equity: 0.4866,\n      bond: 0.0478\n    }, {\n      year: 1934,\n      inflation: 0.0350,\n      equity: -0.1214,\n      bond: 0.0571\n    }, {\n      year: 1935,\n      inflation: 0.0260,\n      equity: 0.4860,\n      bond: 0.0390\n    }, {\n      year: 1937,\n      inflation: 0.0370,\n      equity: -0.3570,\n      bond: 0.0363\n    }, {\n      year: 1938,\n      inflation: -0.0200,\n      equity: 0.1052,\n      bond: 0.0416\n    }, {\n      year: 1939,\n      inflation: -0.0130,\n      equity: -0.0160,\n      bond: 0.0357\n    }, {\n      year: 1940,\n      inflation: 0.0070,\n      equity: -0.1423,\n      bond: 0.0434\n    }, {\n      year: 1941,\n      inflation: 0.0510,\n      equity: -0.1536,\n      bond: -0.0212\n    }, {\n      year: 1942,\n      inflation: 0.1090,\n      equity: 0.1299,\n      bond: 0.0238\n    }, {\n      year: 1943,\n      inflation: 0.0600,\n      equity: 0.1744,\n      bond: 0.0239\n    }, {\n      year: 1944,\n      inflation: 0.0160,\n      equity: 0.1384,\n      bond: 0.0336\n    }, {\n      year: 1945,\n      inflation: 0.0230,\n      equity: 0.3358,\n      bond: 0.0383\n    }, {\n      year: 1946,\n      inflation: 0.0850,\n      equity: -0.1559,\n      bond: 0.0171\n    }, {\n      year: 1947,\n      inflation: 0.1440,\n      equity: -0.0250,\n      bond: 0.0073\n    }, {\n      year: 1948,\n      inflation: 0.0770,\n      equity: 0.0357,\n      bond: 0.0349\n    }, {\n      year: 1949,\n      inflation: -0.0100,\n      equity: 0.0990,\n      bond: 0.0223\n    }, {\n      year: 1950,\n      inflation: 0.0110,\n      equity: 0.2565,\n      bond: 0.0033\n    }, {\n      year: 1951,\n      inflation: 0.0790,\n      equity: 0.1405,\n      bond: 0.0170\n    }, {\n      year: 1952,\n      inflation: 0.0230,\n      equity: 0.0823,\n      bond: 0.0150\n    }, {\n      year: 1953,\n      inflation: 0.0080,\n      equity: -0.0275,\n      bond: 0.0562\n    }, {\n      year: 1954,\n      inflation: 0.0030,\n      equity: 0.3983,\n      bond: 0.0145\n    }, {\n      year: 1955,\n      inflation: -0.0030,\n      equity: 0.2402,\n      bond: 0.0261\n    }, {\n      year: 1956,\n      inflation: 0.0150,\n      equity: 0.0290,\n      bond: -0.0137\n    }, {\n      year: 1957,\n      inflation: 0.0330,\n      equity: -0.0949,\n      bond: 0.0633\n    }, {\n      year: 1958,\n      inflation: 0.0270,\n      equity: 0.3526,\n      bond: -0.0382\n    }, {\n      year: 1959,\n      inflation: 0.0108,\n      equity: 0.0433,\n      bond: -0.0102\n    }, {\n      year: 1960,\n      inflation: 0.0150,\n      equity: 0.0291,\n      bond: 0.1131\n    }, {\n      year: 1961,\n      inflation: 0.0110,\n      equity: 0.1566,\n      bond: 0.0206\n    }, {\n      year: 1962,\n      inflation: 0.0120,\n      equity: -0.0581,\n      bond: 0.0595\n    }, {\n      year: 1963,\n      inflation: 0.0120,\n      equity: 0.1751,\n      bond: 0.0132\n    }, {\n      year: 1964,\n      inflation: 0.0130,\n      equity: 0.1265,\n      bond: 0.0402\n    }, {\n      year: 1965,\n      inflation: 0.0160,\n      equity: 0.0836,\n      bond: 0.0115\n    }, {\n      year: 1966,\n      inflation: 0.0300,\n      equity: -0.0950,\n      bond: 0.0483\n    }, {\n      year: 1967,\n      inflation: 0.0280,\n      equity: 0.1254,\n      bond: -0.0202\n    }, {\n      year: 1968,\n      inflation: 0.0430,\n      equity: 0.0732,\n      bond: 0.0207\n    }, {\n      year: 1969,\n      inflation: 0.0550,\n      equity: -0.1146,\n      bond: -0.0499\n    }, {\n      year: 1970,\n      inflation: 0.0580,\n      equity: 0.0352,\n      bond: 0.1822\n    }, {\n      year: 1971,\n      inflation: 0.0430,\n      equity: 0.1049,\n      bond: 0.0822\n    }, {\n      year: 1972,\n      inflation: 0.0330,\n      equity: 0.1462,\n      bond: 0.0255\n    }, {\n      year: 1973,\n      inflation: 0.0620,\n      equity: -0.1883,\n      bond: 0.0301\n    }, {\n      year: 1974,\n      inflation: 0.1110,\n      equity: -0.2450,\n      bond: 0.0374\n    }, {\n      year: 1975,\n      inflation: 0.0910,\n      equity: 0.3349,\n      bond: 0.0598\n    }, {\n      year: 1976,\n      inflation: 0.0570,\n      equity: 0.0716,\n      bond: 0.1116\n    }, {\n      year: 1977,\n      inflation: 0.0650,\n      equity: -0.1305,\n      bond: 0.0252\n    }, {\n      year: 1978,\n      inflation: 0.0760,\n      equity: 0.1048,\n      bond: 0.0115\n    }, {\n      year: 1979,\n      inflation: 0.1130,\n      equity: 0.1122,\n      bond: -0.0039\n    }, {\n      year: 1980,\n      inflation: 0.1350,\n      equity: 0.1993,\n      bond: 0.0157\n    }, {\n      year: 1981,\n      inflation: 0.1030,\n      equity: -0.1180,\n      bond: 0.0279\n    }, {\n      year: 1982,\n      inflation: 0.0610,\n      equity: 0.2302,\n      bond: 0.3795\n    }, {\n      year: 1983,\n      inflation: 0.0320,\n      equity: 0.1532,\n      bond: 0.0393\n    }, {\n      year: 1984,\n      inflation: 0.0430,\n      equity: 0.0312,\n      bond: 0.1325\n    }, {\n      year: 1985,\n      inflation: 0.0350,\n      equity: 0.2133,\n      bond: 0.2441\n    }, {\n      year: 1986,\n      inflation: 0.0190,\n      equity: 0.2704,\n      bond: 0.2289\n    }, {\n      year: 1987,\n      inflation: 0.0370,\n      equity: -0.0529,\n      bond: -0.0258\n    }, {\n      year: 1988,\n      inflation: 0.0410,\n      equity: 0.1393,\n      bond: 0.0616\n    }, {\n      year: 1989,\n      inflation: 0.0480,\n      equity: 0.1912,\n      bond: 0.0909\n    }, {\n      year: 1990,\n      inflation: 0.0540,\n      equity: -0.0426,\n      bond: 0.0896\n    }, {\n      year: 1991,\n      inflation: 0.0420,\n      equity: 0.2783,\n      bond: 0.1499\n    }, {\n      year: 1992,\n      inflation: 0.0300,\n      equity: 0.0460,\n      bond: 0.0988\n    }, {\n      year: 1993,\n      inflation: 0.0300,\n      equity: 0.0868,\n      bond: 0.1244\n    }, {\n      year: 1994,\n      inflation: 0.0260,\n      equity: -0.0164,\n      bond: -0.0705\n    }, {\n      year: 1995,\n      inflation: 0.0280,\n      equity: 0.3206,\n      bond: 0.2249\n    }, {\n      year: 1996,\n      inflation: 0.0290,\n      equity: 0.2471,\n      bond: -0.0052\n    }, {\n      year: 1997,\n      inflation: 0.0230,\n      equity: 0.2573,\n      bond: 0.1380\n    }, {\n      year: 1998,\n      inflation: 0.0160,\n      equity: 0.2963,\n      bond: 0.1144\n    }, {\n      year: 1999,\n      inflation: 0.0220,\n      equity: 0.1416,\n      bond: -0.0810\n    }, {\n      year: 2000,\n      inflation: 0.0340,\n      equity: -0.0631,\n      bond: 0.1725\n    }, {\n      year: 2001,\n      inflation: 0.0280,\n      equity: -0.1463,\n      bond: 0.0601\n    }, {\n      year: 2002,\n      inflation: 0.0160,\n      equity: -0.2143,\n      bond: 0.1238\n    }, {\n      year: 2003,\n      inflation: 0.0230,\n      equity: 0.2642,\n      bond: 0.0331\n    }, {\n      year: 2004,\n      inflation: 0.0270,\n      equity: 0.0432,\n      bond: 0.0363\n    }, {\n      year: 2005,\n      inflation: 0.0340,\n      equity: 0.0824,\n      bond: 0.0276\n    }, {\n      year: 2006,\n      inflation: 0.0320,\n      equity: 0.1137,\n      bond: 0.0198\n    }, {\n      year: 2007,\n      inflation: 0.0290,\n      equity: -0.0319,\n      bond: 0.1243\n    }, {\n      year: 2008,\n      inflation: 0.0380,\n      equity: -0.3722,\n      bond: 0.1346\n    }, {\n      year: 2009,\n      inflation: -0.0040,\n      equity: 0.2981,\n      bond: -0.0659\n    }, {\n      year: 2010,\n      inflation: 0.0160,\n      equity: 0.1415,\n      bond: 0.0633\n    }, {\n      year: 2011,\n      inflation: 0.0320,\n      equity: 0.0140,\n      bond: 0.1500\n    }, {\n      year: 2012,\n      inflation: 0.0210,\n      equity: 0.1383,\n      bond: 0.0246\n    }, {\n      year: 2013,\n      inflation: 0.0150,\n      equity: 0.2310,\n      bond: -0.0554\n    }, {\n      year: 2014,\n      inflation: 0.0160,\n      equity: 0.1129,\n      bond: 0.1090\n    }, {\n      year: 2015,\n      inflation: 0.0010,\n      equity: -0.0540,\n      bond: 0.0017\n    }, {\n      year: 2016,\n      inflation: 0.0130,\n      equity: 0.1858,\n      bond: -0.0063\n    }, {\n      year: 2017,\n      inflation: 0.0210,\n      equity: 0.2262,\n      bond: 0.0124\n    }, {\n      year: 2018,\n      inflation: 0.0240,\n      equity: -0.0654,\n      bond: 0.0155\n    }, {\n      year: 2019,\n      inflation: 0.0180,\n      equity: 0.2573,\n      bond: 0.1055\n    }, {\n      year: 2020,\n      inflation: 0.0120,\n      equity: 0.1573,\n      bond: 0.0176\n    }];\n    const margin = {\n      top: 40,\n      right: 80,\n      bottom: 60,\n      left: 50\n    };\n    const totalWidth = 960;\n    const totalHeight = 700;\n    const boundedWidth = totalWidth - margin.left - margin.right;\n    const boundedHeight = totalHeight - margin.top - margin.bottom;\n    const tooltipWidth = 75;\n    const tooltipHeight = 75;\n    const marginTranslate = \"translate(\" + margin.left + \",\" + margin.top + \")\";\n    const equityColor = \"Blue\";\n    const bondColor = \"Purple\";\n    const inflationColor = \"DarkGrey\";\n    const normalStrokeWidth = 1.5;\n    const normalLineOp = 0.5;\n    var pctFormat = d3.format(\"4.2%\");\n\n    const getXScale = (dataIn, widthIn) => {\n      var xExt = d3.extent(dataIn, d => d.year);\n      return d3.scaleLinear().domain(xExt).range([0, widthIn]);\n    };\n\n    const getYScale = (dataIn, heightIn) => {\n      var yExt = d3.extent(dataIn, d => d.equity);\n      return d3.scaleLinear().domain(yExt).range([heightIn, 0]);\n    };\n\n    const drawAxes = (svg, xScaleIn, yScaleIn, heightIn) => {\n      var yearFormat = d3.format(\"d\");\n      var xGen = d3.axisBottom(xScaleIn).tickFormat(yearFormat);\n      var yGen = d3.axisLeft(yScaleIn).tickFormat(pctFormat);\n      svg.append(\"g\").attr(\"transform\", \"translate(0,\" + heightIn + \")\").call(xGen);\n      svg.append(\"g\").call(yGen);\n    };\n\n    const drawLines = (svg, dataIn, xScaleIn, yScaleIn) => {\n      // Add the equity line\n      svg.append(\"path\").datum(dataIn).attr(\"fill\", \"none\").attr(\"pointer-events\", \"none\").style(\"opacity\", normalLineOp).attr(\"stroke\", equityColor).attr(\"stroke-width\", normalStrokeWidth).attr(\"d\", d3.line().x(function (d) {\n        return xScaleIn(d.year);\n      }).y(function (d) {\n        return yScaleIn(d.equity);\n      })); // Add the bonds line\n\n      svg.append(\"path\").datum(dataIn).attr(\"fill\", \"none\").attr(\"pointer-events\", \"none\").attr(\"stroke\", bondColor).attr(\"stroke-width\", normalStrokeWidth).attr(\"d\", d3.line().x(function (d) {\n        return xScaleIn(d.year);\n      }).y(function (d) {\n        return yScaleIn(d.bond);\n      })); // Add the inflation line\n\n      svg.append(\"path\").datum(dataIn).style(\"stroke-dasharray\", \"3, 3\").attr(\"pointer-events\", \"none\").attr(\"fill\", \"none\").attr(\"stroke\", inflationColor).attr(\"stroke-width\", normalStrokeWidth).attr(\"d\", d3.line().x(function (d) {\n        return xScaleIn(d.year);\n      }).y(function (d) {\n        return yScaleIn(d.inflation);\n      }));\n    };\n\n    const prepHoverStuff = svg => {\n      const focus = svg.append('g').append('circle').style('opacity', 0).style('fill', 'none').attr(\"pointer-events\", \"none\").attr('stroke', 'black').attr('r', 5);\n      const tooltipWrapper = svg.append('g').attr('display', 'none');\n      const tooltipBackground = tooltipWrapper.append('rect').style('opacity', 0.70).attr('width', tooltipWidth).attr('height', tooltipHeight).attr(\"pointer-events\", \"none\").attr(\"fill\", \"#e8e8e8\");\n      const tooltipText = tooltipWrapper.append('g').append('text');\n      tooltipText.attr(\"pointer-events\", \"none\").attr('font-weight', 900).attr('text-anchor', 'left');\n      const yearTT = tooltipText.append('tspan').attr('x', '5').attr('y', '5').attr('dy', '15px').attr(\"pointer-events\", \"none\");\n      const equityTT = tooltipText.append('tspan').attr('x', '5').attr('y', '5').attr('dy', '30px').attr(\"pointer-events\", \"none\");\n      const bondTT = tooltipText.append('tspan').attr('x', '5').attr('y', '5').attr('dy', '45px').attr(\"pointer-events\", \"none\");\n      const inflationTT = tooltipText.append('tspan').attr('x', '5').attr('y', '5').attr('dy', '60px').attr(\"pointer-events\", \"none\");\n      const hoverLine = svg.append(\"g\").append(\"rect\").style('opacity', 0).attr(\"pointer-events\", \"none\").attr(\"class\", \"dotted\").attr(\"stroke-width\", \"1px\").attr(\"width\", \".5px\").attr(\"height\", boundedHeight);\n      this.setState({\n        focusState: focus\n      });\n      this.setState({\n        tooltipWrapperState: tooltipWrapper\n      });\n      this.setState({\n        yearTooltipState: yearTT\n      });\n      this.setState({\n        equityTooltipState: equityTT\n      });\n      this.setState({\n        bondTooltipState: bondTT\n      });\n      this.setState({\n        inflationTooltipState: inflationTT\n      });\n      this.setState({\n        TooltipBackgroundState: tooltipBackground\n      });\n      this.setState({\n        hoverLineState: hoverLine\n      });\n    };\n\n    const isDataTrackingReady = () => {\n      return 0 < histDataState.length && null != focusState;\n    };\n\n    const handleMouseOver = e => {\n      if (isDataTrackingReady()) {\n        focusState.style('opacity', 1);\n        tooltipWrapperState.attr('display', null);\n        hoverLineState.style('opacity', 1);\n      }\n    };\n\n    const handleMouseMove = e => {\n      if (isDataTrackingReady()) {\n        const bisect = d3.bisector(d => d.year).left;\n        var xScaleIn = getXScale(histDataState, boundedWidth);\n        var yScaleIn = getYScale(histDataState, boundedHeight);\n        const coords = d3.pointer(e);\n        const x0 = xScaleIn.invert(coords[0]);\n        const i = bisect(histDataState, x0, 1);\n        const selectedData = histDataState[i];\n        const clientX = xScaleIn(selectedData.year);\n        const clientY = yScaleIn(selectedData.equity);\n        var tooltipX = clientX; // prevent the tooltip from getting clipped.\n\n        if (boundedWidth <= clientX + tooltipWidth) {\n          tooltipX = clientX - tooltipWidth;\n        }\n\n        focusState.attr('cx', clientX).attr('cy', clientY);\n        yearTooltipState.text(selectedData.year);\n        equityTooltipState.text('stocks: ' + pctFormat(selectedData.equity));\n        bondTooltipState.text('bonds: ' + pctFormat(selectedData.bond));\n        inflationTooltipState.text('inflation: ' + pctFormat(selectedData.inflation));\n        const ttBounds = tooltipWrapperState.node().getBBox();\n        tooltipBackgroundState.attr('width', ttBounds.width).attr('height', ttBounds.height);\n        tooltipWrapperState.attr(\"transform\", \"translate(\" + tooltipX + \",\" + coords[1] + \")\");\n        hoverLineState.attr('x', clientX); // console.log(\"invert: \" + x0 + \" year: \" + selectedData.year);\n      }\n    };\n\n    const handleMouseLeave = () => {\n      // BUG - why are we getting mouseleave events while hovering over rect, but not over a line?\n      console.log(\"leave\");\n\n      if (isDataTrackingReady()) {\n        focusState.style('opacity', 0);\n        tooltipWrapperState.attr('display', 'none');\n        hoverLineState.style('opacity', 0);\n      }\n    };\n\n    var svg = d3.select(\"#d3target\").attr(\"width\", totalWidth).attr(\"height\", totalHeight).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    var xScaleIn = getXScale(dataset, boundedWidth);\n    var yScaleIn = getYScale(dataset, boundedHeight);\n    drawAxes(svg, xScaleIn, yScaleIn, boundedHeight);\n    drawLines(svg, dataset, xScaleIn, yScaleIn);\n    prepHoverStuff(svg);\n    setHistDataState(dataset);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          boxShadow: 10,\n          borderRadius: 10,\n          p: 2,\n          minWidth: 1200,\n          minHeight: 1200\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          id: \"d3target\",\n          width: totalWidth,\n          height: totalHeight,\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            id: \"trackingRect\",\n            style: {\n              opacity: 0\n            },\n            width: boundedWidth,\n            height: boundedHeight,\n            transform: marginTranslate,\n            fill: \"LightGray\",\n            onMouseEnter: handleMouseOver,\n            onMouseMove: handleMouseMove,\n            onMouseLeave: handleMouseLeave\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default Chart; // d3 line chart example : https://www.d3-graph-gallery.com/graph/line_basic.html\n// example to draw axis : https://wattenberger.com/blog/react-and-d3\n// example : https://sharkcoder.com/data-visualization/d3-react\n// tooltip example : https://observablehq.com/@connor-roche/multi-line-chart-focus-context-w-mouseover-tooltip","map":{"version":3,"sources":["/Users/paul/OneDrive/Documents/code/src/swrve/src/chart.js"],"names":["useState","React","Box","d3","HistoricalData","Chart","Component","constructor","props","state","histDataState","focusState","tooltipWrapperState","yearTooltipState","equityTooltipState","bondTooltipState","inflationTooltipState","tooltipBackgroundState","hoverLineState","render","dataset","year","inflation","equity","bond","margin","top","right","bottom","left","totalWidth","totalHeight","boundedWidth","boundedHeight","tooltipWidth","tooltipHeight","marginTranslate","equityColor","bondColor","inflationColor","normalStrokeWidth","normalLineOp","pctFormat","format","getXScale","dataIn","widthIn","xExt","extent","d","scaleLinear","domain","range","getYScale","heightIn","yExt","drawAxes","svg","xScaleIn","yScaleIn","yearFormat","xGen","axisBottom","tickFormat","yGen","axisLeft","append","attr","call","drawLines","datum","style","line","x","y","prepHoverStuff","focus","tooltipWrapper","tooltipBackground","tooltipText","yearTT","equityTT","bondTT","inflationTT","hoverLine","setState","TooltipBackgroundState","isDataTrackingReady","length","handleMouseOver","e","handleMouseMove","bisect","bisector","coords","pointer","x0","invert","i","selectedData","clientX","clientY","tooltipX","text","ttBounds","node","getBBox","width","height","handleMouseLeave","console","log","select","setHistDataState","boxShadow","borderRadius","p","minWidth","minHeight","opacity"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport * as React from \"react\";\nimport { Box } from \"@mui/system\";\nimport * as d3 from \"d3\";\nimport HistoricalData from \"./historical_data\";\nimport \"./chartdata.css\";\n\nclass Chart extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            histDataState: null,\n            focusState: null,\n            tooltipWrapperState: null,\n            yearTooltipState: null,\n            equityTooltipState: null,\n            bondTooltipState: null,\n            inflationTooltipState: null,\n            tooltipBackgroundState: null,\n            hoverLineState: null,\n        }\n    }  \n\n    render () {\n        var dataset = \n        [{ year: 1921, inflation: -0.1090, equity: 0.0267, bond: 0.1088},\n        { year: 1922, inflation: -0.0620, equity: 0.2192, bond: 0.0386},\n        { year: 1923, inflation: 0.0180, equity: -0.0079, bond: 0.0658},\n        { year: 1924, inflation: 0.0040, equity: 0.1982, bond: 0.0556},\n        { year: 1925, inflation: 0.0240, equity: 0.1957, bond: 0.0522},\n        { year: 1926, inflation: 0.0090, equity: 0.0593, bond: 0.0629},\n        { year: 1927, inflation: -0.0190, equity: 0.3082, bond: 0.0342},\n        { year: 1928, inflation: -0.0120, equity: 0.4181, bond: 0.0129},\n        { year: 1929, inflation: 0.0000, equity: -0.1267, bond: 0.0598},\n        { year: 1930, inflation: -0.0270, equity: -0.2639, bond: 0.0291},\n        { year: 1931, inflation: -0.0890, equity: -0.4806, bond: 0.0077},\n        { year: 1932, inflation: -0.1030, equity: -0.1458, bond: 0.0652},\n        { year: 1933, inflation: -0.0520, equity: 0.4866, bond: 0.0478},\n        { year: 1934, inflation: 0.0350, equity: -0.1214, bond: 0.0571},\n        { year: 1935, inflation: 0.0260, equity: 0.4860, bond: 0.0390},\n        { year: 1937, inflation: 0.0370, equity: -0.3570,  bond: 0.0363},\n        { year: 1938, inflation: -0.0200, equity: 0.1052, bond: 0.0416},\n        { year: 1939, inflation: -0.0130, equity: -0.0160, bond: 0.0357},\n        { year: 1940, inflation: 0.0070, equity: -0.1423, bond: 0.0434},\n        { year: 1941, inflation: 0.0510, equity: -0.1536, bond: -0.0212},\n        { year: 1942, inflation: 0.1090, equity: 0.1299, bond: 0.0238},\n        { year: 1943, inflation: 0.0600, equity: 0.1744, bond: 0.0239},\n        { year: 1944, inflation: 0.0160, equity: 0.1384, bond: 0.0336},\n        { year: 1945, inflation: 0.0230, equity: 0.3358, bond: 0.0383},\n        { year: 1946, inflation: 0.0850, equity: -0.1559, bond: 0.0171},\n        { year: 1947, inflation: 0.1440, equity: -0.0250, bond: 0.0073},\n        { year: 1948, inflation: 0.0770, equity: 0.0357, bond: 0.0349},\n        { year: 1949, inflation: -0.0100, equity: 0.0990, bond: 0.0223},\n        { year: 1950, inflation: 0.0110, equity: 0.2565, bond: 0.0033},\n        { year: 1951, inflation: 0.0790, equity: 0.1405, bond: 0.0170},\n        { year: 1952, inflation: 0.0230, equity: 0.0823, bond: 0.0150},\n        { year: 1953, inflation: 0.0080, equity: -0.0275, bond: 0.0562},\n        { year: 1954, inflation: 0.0030, equity: 0.3983, bond: 0.0145},\n        { year: 1955, inflation: -0.0030, equity: 0.2402, bond: 0.0261},\n        { year: 1956, inflation: 0.0150, equity: 0.0290, bond: -0.0137},\n        { year: 1957, inflation: 0.0330, equity: -0.0949, bond: 0.0633},\n        { year: 1958, inflation: 0.0270, equity: 0.3526, bond: -0.0382},\n        { year: 1959, inflation: 0.0108, equity: 0.0433, bond: -0.0102},\n        { year: 1960, inflation: 0.0150, equity: 0.0291, bond: 0.1131},\n        { year: 1961, inflation: 0.0110, equity: 0.1566, bond: 0.0206},\n        { year: 1962, inflation: 0.0120, equity: -0.0581, bond: 0.0595},\n        { year: 1963, inflation: 0.0120, equity: 0.1751, bond: 0.0132},\n        { year: 1964, inflation: 0.0130, equity: 0.1265, bond: 0.0402},\n        { year: 1965, inflation: 0.0160, equity: 0.0836, bond: 0.0115},\n        { year: 1966, inflation: 0.0300, equity: -0.0950, bond: 0.0483},\n        { year: 1967, inflation: 0.0280, equity: 0.1254, bond: -0.0202},\n        { year: 1968, inflation: 0.0430, equity: 0.0732, bond: 0.0207},\n        { year: 1969, inflation: 0.0550, equity: -0.1146, bond: -0.0499},\n        { year: 1970, inflation: 0.0580, equity: 0.0352, bond: 0.1822},\n        { year: 1971, inflation: 0.0430, equity: 0.1049, bond: 0.0822},\n        { year: 1972, inflation: 0.0330, equity: 0.1462, bond: 0.0255},\n        { year: 1973, inflation: 0.0620, equity: -0.1883, bond: 0.0301},\n        { year: 1974, inflation: 0.1110, equity: -0.2450, bond: 0.0374},\n        { year: 1975, inflation: 0.0910, equity: 0.3349, bond: 0.0598},\n        { year: 1976, inflation: 0.0570, equity: 0.0716, bond: 0.1116},\n        { year: 1977, inflation: 0.0650, equity: -0.1305, bond: 0.0252},\n        { year: 1978, inflation: 0.0760, equity: 0.1048, bond: 0.0115},\n        { year: 1979, inflation: 0.1130, equity: 0.1122, bond: -0.0039},\n        { year: 1980, inflation: 0.1350, equity: 0.1993, bond: 0.0157},\n        { year: 1981, inflation: 0.1030, equity: -0.1180, bond: 0.0279},\n        { year: 1982, inflation: 0.0610, equity: 0.2302, bond: 0.3795},\n        { year: 1983, inflation: 0.0320, equity: 0.1532, bond: 0.0393},\n        { year: 1984, inflation: 0.0430, equity: 0.0312, bond: 0.1325},\n        { year: 1985, inflation: 0.0350, equity: 0.2133, bond: 0.2441},\n        { year: 1986, inflation: 0.0190, equity: 0.2704, bond: 0.2289},\n        { year: 1987, inflation: 0.0370, equity: -0.0529, bond: -0.0258},\n        { year: 1988, inflation: 0.0410, equity: 0.1393, bond: 0.0616},\n        { year: 1989, inflation: 0.0480, equity: 0.1912, bond: 0.0909},\n        { year: 1990, inflation: 0.0540, equity: -0.0426, bond: 0.0896},\n        { year: 1991, inflation: 0.0420, equity: 0.2783, bond: 0.1499},\n        { year: 1992, inflation: 0.0300, equity: 0.0460, bond: 0.0988},\n        { year: 1993, inflation: 0.0300, equity: 0.0868, bond: 0.1244},\n        { year: 1994, inflation: 0.0260, equity: -0.0164, bond: -0.0705},\n        { year: 1995, inflation: 0.0280, equity: 0.3206, bond: 0.2249},\n        { year: 1996, inflation: 0.0290, equity: 0.2471, bond: -0.0052},\n        { year: 1997, inflation: 0.0230, equity: 0.2573, bond: 0.1380},\n        { year: 1998, inflation: 0.0160, equity: 0.2963, bond: 0.1144},\n        { year: 1999, inflation: 0.0220, equity: 0.1416, bond: -0.0810},\n        { year: 2000, inflation: 0.0340, equity: -0.0631, bond: 0.1725},\n        { year: 2001, inflation: 0.0280, equity: -0.1463, bond: 0.0601},\n        { year: 2002, inflation: 0.0160, equity: -0.2143, bond: 0.1238},\n        { year: 2003, inflation: 0.0230, equity: 0.2642, bond: 0.0331},\n        { year: 2004, inflation: 0.0270, equity: 0.0432, bond: 0.0363},\n        { year: 2005, inflation: 0.0340, equity: 0.0824, bond: 0.0276},\n        { year: 2006, inflation: 0.0320, equity: 0.1137, bond: 0.0198},\n        { year: 2007, inflation: 0.0290, equity: -0.0319, bond: 0.1243},\n        { year: 2008, inflation: 0.0380, equity: -0.3722, bond: 0.1346},\n        { year: 2009, inflation: -0.0040, equity: 0.2981, bond: -0.0659},\n        { year: 2010, inflation: 0.0160, equity: 0.1415, bond: 0.0633},\n        { year: 2011, inflation: 0.0320, equity: 0.0140, bond: 0.1500},\n        { year: 2012, inflation: 0.0210, equity: 0.1383, bond: 0.0246},\n        { year: 2013, inflation: 0.0150, equity: 0.2310, bond: -0.0554},\n        { year: 2014, inflation: 0.0160, equity: 0.1129, bond: 0.1090},\n        { year: 2015, inflation: 0.0010, equity: -0.0540, bond: 0.0017},\n        { year: 2016, inflation: 0.0130, equity: 0.1858, bond: -0.0063},\n        { year: 2017, inflation: 0.0210, equity: 0.2262, bond: 0.0124},\n        { year: 2018, inflation: 0.0240, equity: -0.0654, bond: 0.0155},\n        { year: 2019, inflation: 0.0180, equity: 0.2573, bond: 0.1055},\n        { year: 2020, inflation: 0.0120, equity: 0.1573, bond: 0.0176}];\n    \n    \n        const margin = { top: 40, right: 80, bottom: 60, left: 50 };\n        const totalWidth = 960;\n        const totalHeight = 700;\n        const boundedWidth = totalWidth - margin.left - margin.right;\n        const boundedHeight = totalHeight - margin.top - margin.bottom;\n        const tooltipWidth = 75;\n        const tooltipHeight = 75;\n        const marginTranslate = \"translate(\" + margin.left + \",\" + margin.top + \")\";\n        const equityColor = \"Blue\";\n        const bondColor = \"Purple\";\n        const inflationColor = \"DarkGrey\";\n        const normalStrokeWidth = 1.5;\n        const normalLineOp = 0.5;\n        var pctFormat = d3.format(\"4.2%\");\n    \n        const getXScale = (dataIn, widthIn) => { \n            var xExt = d3.extent(dataIn, (d) => d.year);\n            return d3.scaleLinear()\n                     .domain(xExt)\n                     .range([ 0, widthIn ]);\n        }\n    \n        const getYScale = (dataIn, heightIn) => {\n            var yExt = d3.extent(dataIn, (d) => d.equity);\n            return d3.scaleLinear()\n                     .domain(yExt)\n                     .range([ heightIn, 0 ]);\n        }\n    \n        const drawAxes = (svg, xScaleIn, yScaleIn, heightIn) => {\n            var yearFormat = d3.format(\"d\");\n            var xGen = d3.axisBottom(xScaleIn)\n                         .tickFormat(yearFormat);            \n            var yGen = d3.axisLeft(yScaleIn)\n                         .tickFormat(pctFormat);    \n    \n            svg.append(\"g\")\n                .attr(\"transform\", \"translate(0,\" + heightIn + \")\")\n                .call(xGen);\n            svg.append(\"g\")\n               .call(yGen);\n        };\n    \n        const drawLines = (svg, dataIn, xScaleIn, yScaleIn) => {\n            // Add the equity line\n            svg.append(\"path\")\n                .datum(dataIn)\n                .attr(\"fill\", \"none\")\n                .attr(\"pointer-events\", \"none\")\n                .style(\"opacity\", normalLineOp)\n                .attr(\"stroke\", equityColor)\n                .attr(\"stroke-width\", normalStrokeWidth)\n                .attr(\"d\", d3.line()\n                            .x(function(d) { return xScaleIn(d.year) })\n                            .y(function(d) { return yScaleIn(d.equity) })\n                );\n            // Add the bonds line\n            svg.append(\"path\")\n                .datum(dataIn)\n                .attr(\"fill\", \"none\")\n                .attr(\"pointer-events\", \"none\")\n                .attr(\"stroke\", bondColor)\n                .attr(\"stroke-width\", normalStrokeWidth)\n                .attr(\"d\", d3.line()\n                            .x(function(d) { return xScaleIn(d.year) })\n                            .y(function(d) { return yScaleIn(d.bond) })\n                );\n            // Add the inflation line\n            svg.append(\"path\")\n                .datum(dataIn)\n                .style(\"stroke-dasharray\", (\"3, 3\")) \n                .attr(\"pointer-events\", \"none\")\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", inflationColor)\n                .attr(\"stroke-width\", normalStrokeWidth)\n                .attr(\"d\", d3.line()\n                            .x(function(d) { return xScaleIn(d.year) })\n                            .y(function(d) { return yScaleIn(d.inflation) })\n                );\n            \n        }\n    \n        const prepHoverStuff = (svg) => {\n            const focus = svg\n                    .append('g')\n                    .append('circle')\n                        .style('opacity', 0)\n                        .style('fill', 'none')\n                        .attr(\"pointer-events\", \"none\")\n                        .attr('stroke', 'black')\n                        .attr('r', 5);\n    \n            const tooltipWrapper = svg\n                    .append('g')\n                    .attr('display', 'none');\n            \n            const tooltipBackground = tooltipWrapper.append('rect')\n                          .style('opacity', 0.70)\n                          .attr('width', tooltipWidth)\n                          .attr('height', tooltipHeight)\n                          .attr(\"pointer-events\", \"none\")\n                          .attr(\"fill\", \"#e8e8e8\"); \n    \n            const tooltipText = tooltipWrapper.append('g').append('text');\n    \n            tooltipText.attr(\"pointer-events\", \"none\")\n                       .attr('font-weight', 900)\n                       .attr('text-anchor', 'left');\n                        \n            const yearTT = tooltipText\n                    .append('tspan')\n                    .attr('x', '5')\n                    .attr('y', '5')\n                    .attr('dy', '15px')\n                    .attr(\"pointer-events\", \"none\");\n            const equityTT = tooltipText\n                    .append('tspan')\n                    .attr('x', '5')\n                    .attr('y', '5')\n                    .attr('dy', '30px')\n                    .attr(\"pointer-events\", \"none\");\n            const bondTT = tooltipText\n                    .append('tspan')\n                    .attr('x', '5')\n                    .attr('y', '5')\n                    .attr('dy', '45px')\n                    .attr(\"pointer-events\", \"none\");\n            const inflationTT = tooltipText\n                    .append('tspan')\n                    .attr('x', '5')\n                    .attr('y', '5')\n                    .attr('dy', '60px')\n                    .attr(\"pointer-events\", \"none\");                \n    \n            const hoverLine = svg\n                    .append(\"g\")\n                    .append(\"rect\")\n                        .style('opacity', 0)\n                        .attr(\"pointer-events\", \"none\")\n                        .attr(\"class\", \"dotted\")\n                        .attr(\"stroke-width\", \"1px\")\n                        .attr(\"width\", \".5px\")\n                        .attr(\"height\", boundedHeight);\n    \n            this.setState({ focusState: focus});\n            this.setState({tooltipWrapperState: tooltipWrapper});\n            this.setState({yearTooltipState: yearTT});\n            this.setState({equityTooltipState: equityTT});\n            this.setState({bondTooltipState: bondTT});\n            this.setState({inflationTooltipState: inflationTT});\n            this.setState({TooltipBackgroundState: tooltipBackground});\n            this.setState({hoverLineState: hoverLine});\n        }\n    \n        const isDataTrackingReady = () => {\n            return ( (0 < histDataState.length) &&\n                     (null != focusState)\n                   );\n        }\n    \n        const handleMouseOver = (e) => {\n            if (isDataTrackingReady()) {\n                focusState.style('opacity', 1);\n                tooltipWrapperState.attr('display', null);\n                hoverLineState.style('opacity', 1)\n            }\n        }\n    \n        const handleMouseMove = (e) => {\n            if (isDataTrackingReady()) {  \n                const bisect = d3.bisector((d) => d.year).left;\n                var xScaleIn = getXScale(histDataState, boundedWidth);\n                var yScaleIn = getYScale(histDataState, boundedHeight);\n    \n                const coords = d3.pointer(e);\n                const x0 = xScaleIn.invert(coords[0]);\n                const i = bisect(histDataState, x0, 1);\n                const selectedData = histDataState[i];\n                const clientX = xScaleIn(selectedData.year);\n                const clientY = yScaleIn(selectedData.equity);\n                var tooltipX = clientX;\n    \n                // prevent the tooltip from getting clipped.\n                if (boundedWidth <= (clientX + tooltipWidth)) {\n                    tooltipX = clientX - tooltipWidth;\n                }\n    \n                focusState\n                    .attr('cx', clientX)\n                    .attr('cy', clientY);\n    \n                yearTooltipState\n                    .text(selectedData.year);\n                equityTooltipState\n                    .text('stocks: ' + pctFormat(selectedData.equity));\n                bondTooltipState\n                    .text('bonds: ' + pctFormat(selectedData.bond));\n                inflationTooltipState\n                    .text('inflation: ' + pctFormat(selectedData.inflation));\n    \n                const ttBounds = tooltipWrapperState.node().getBBox();\n                tooltipBackgroundState                \n                    .attr('width', ttBounds.width)\n                    .attr('height', ttBounds.height);\n    \n                tooltipWrapperState\n                    .attr(\"transform\", \"translate(\" + tooltipX + \",\" + coords[1] + \")\");        \n                hoverLineState\n                    .attr('x', clientX);\n    \n                // console.log(\"invert: \" + x0 + \" year: \" + selectedData.year);\n            }\n        };\n        \n        const handleMouseLeave = () => {\n            // BUG - why are we getting mouseleave events while hovering over rect, but not over a line?\n            console.log(\"leave\");\n            if (isDataTrackingReady()) {\n                focusState.style('opacity', 0);\n                tooltipWrapperState.attr('display', 'none');\n                hoverLineState.style('opacity', 0)\n            }\n        };\n    \n        var svg = d3.select(\"#d3target\")\n                    .attr(\"width\", totalWidth)\n                    .attr(\"height\", totalHeight)\n                    .append(\"g\")\n                    .attr(\"transform\",\n                            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        var xScaleIn = getXScale(dataset, boundedWidth);\n        var yScaleIn = getYScale(dataset, boundedHeight);\n\n        drawAxes(svg, xScaleIn, yScaleIn, boundedHeight);            \n        drawLines(svg, dataset, xScaleIn, yScaleIn); \n        prepHoverStuff(svg);\n\n        setHistDataState(dataset);\n    \n        return (\n            <div>\n                <Box sx={{\n                    boxShadow: 10,\n                    borderRadius: 10,\n                    p: 2,\n                    minWidth: 1200,\n                    minHeight: 1200,\n                    \n                    }} >           \n\n                    <svg id=\"d3target\" \n                        width={totalWidth}\n                        height={totalHeight} \n                    >\n                        <rect id='trackingRect'\n                            style={{ opacity:0 }}\n                            width={boundedWidth}\n                            height={boundedHeight}\n                            transform={marginTranslate}\n                            fill='LightGray'\n                            onMouseEnter={handleMouseOver}\n                            onMouseMove={handleMouseMove}\n                            onMouseLeave={handleMouseLeave}\n                        >\n                        </rect>\n                    </svg>   \n                </Box>         \n            </div>\n        );\n    };\n};\n\nexport default Chart;\n\n// d3 line chart example : https://www.d3-graph-gallery.com/graph/line_basic.html\n// example to draw axis : https://wattenberger.com/blog/react-and-d3\n// example : https://sharkcoder.com/data-visualization/d3-react\n// tooltip example : https://observablehq.com/@connor-roche/multi-line-chart-focus-context-w-mouseover-tooltip\n"]},"metadata":{},"sourceType":"module"}