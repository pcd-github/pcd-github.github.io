{"ast":null,"code":"var _jsxFileName = \"/Users/paul/OneDrive/Documents/code/src/swrve/src/chart.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { Stack } from \"@mui/material\";\nimport { Card } from \"@mui/material\";\nimport { CardContent } from \"@mui/material\";\nimport { Typography } from \"@mui/material\";\nimport * as d3 from \"d3\";\nimport \"./chartdata.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst histData = [{\n  year: 1921,\n  inflation: -0.1090,\n  equity: 0.0267,\n  bond: 0.1088\n}, {\n  year: 1922,\n  inflation: -0.0620,\n  equity: 0.2192,\n  bond: 0.0386\n}, {\n  year: 1923,\n  inflation: 0.0180,\n  equity: -0.0079,\n  bond: 0.0658\n}, {\n  year: 1924,\n  inflation: 0.0040,\n  equity: 0.1982,\n  bond: 0.0556\n}, {\n  year: 1925,\n  inflation: 0.0240,\n  equity: 0.1957,\n  bond: 0.0522\n}, {\n  year: 1926,\n  inflation: 0.0090,\n  equity: 0.0593,\n  bond: 0.0629\n}, {\n  year: 1927,\n  inflation: -0.0190,\n  equity: 0.3082,\n  bond: 0.0342\n}, {\n  year: 1928,\n  inflation: -0.0120,\n  equity: 0.4181,\n  bond: 0.0129\n}, {\n  year: 1929,\n  inflation: 0.0000,\n  equity: -0.1267,\n  bond: 0.0598\n}, {\n  year: 1930,\n  inflation: -0.0270,\n  equity: -0.2639,\n  bond: 0.0291\n}, {\n  year: 1931,\n  inflation: -0.0890,\n  equity: -0.4806,\n  bond: 0.0077\n}, {\n  year: 1932,\n  inflation: -0.1030,\n  equity: -0.1458,\n  bond: 0.0652\n}, {\n  year: 1933,\n  inflation: -0.0520,\n  equity: 0.4866,\n  bond: 0.0478\n}, {\n  year: 1934,\n  inflation: 0.0350,\n  equity: -0.1214,\n  bond: 0.0571\n}, {\n  year: 1935,\n  inflation: 0.0260,\n  equity: 0.4860,\n  bond: 0.0390\n}, {\n  year: 1937,\n  inflation: 0.0370,\n  equity: -0.3570,\n  bond: 0.0363\n}, {\n  year: 1938,\n  inflation: -0.0200,\n  equity: 0.1052,\n  bond: 0.0416\n}, {\n  year: 1939,\n  inflation: -0.0130,\n  equity: -0.0160,\n  bond: 0.0357\n}, {\n  year: 1940,\n  inflation: 0.0070,\n  equity: -0.1423,\n  bond: 0.0434\n}, {\n  year: 1941,\n  inflation: 0.0510,\n  equity: -0.1536,\n  bond: -0.0212\n}, {\n  year: 1942,\n  inflation: 0.1090,\n  equity: 0.1299,\n  bond: 0.0238\n}, {\n  year: 1943,\n  inflation: 0.0600,\n  equity: 0.1744,\n  bond: 0.0239\n}, {\n  year: 1944,\n  inflation: 0.0160,\n  equity: 0.1384,\n  bond: 0.0336\n}, {\n  year: 1945,\n  inflation: 0.0230,\n  equity: 0.3358,\n  bond: 0.0383\n}, {\n  year: 1946,\n  inflation: 0.0850,\n  equity: -0.1559,\n  bond: 0.0171\n}, {\n  year: 1947,\n  inflation: 0.1440,\n  equity: -0.0250,\n  bond: 0.0073\n}, {\n  year: 1948,\n  inflation: 0.0770,\n  equity: 0.0357,\n  bond: 0.0349\n}, {\n  year: 1949,\n  inflation: -0.0100,\n  equity: 0.0990,\n  bond: 0.0223\n}, {\n  year: 1950,\n  inflation: 0.0110,\n  equity: 0.2565,\n  bond: 0.0033\n}, {\n  year: 1951,\n  inflation: 0.0790,\n  equity: 0.1405,\n  bond: 0.0170\n}, {\n  year: 1952,\n  inflation: 0.0230,\n  equity: 0.0823,\n  bond: 0.0150\n}, {\n  year: 1953,\n  inflation: 0.0080,\n  equity: -0.0275,\n  bond: 0.0562\n}, {\n  year: 1954,\n  inflation: 0.0030,\n  equity: 0.3983,\n  bond: 0.0145\n}, {\n  year: 1955,\n  inflation: -0.0030,\n  equity: 0.2402,\n  bond: 0.0261\n}, {\n  year: 1956,\n  inflation: 0.0150,\n  equity: 0.0290,\n  bond: -0.0137\n}, {\n  year: 1957,\n  inflation: 0.0330,\n  equity: -0.0949,\n  bond: 0.0633\n}, {\n  year: 1958,\n  inflation: 0.0270,\n  equity: 0.3526,\n  bond: -0.0382\n}, {\n  year: 1959,\n  inflation: 0.0108,\n  equity: 0.0433,\n  bond: -0.0102\n}, {\n  year: 1960,\n  inflation: 0.0150,\n  equity: 0.0291,\n  bond: 0.1131\n}, {\n  year: 1961,\n  inflation: 0.0110,\n  equity: 0.1566,\n  bond: 0.0206\n}, {\n  year: 1962,\n  inflation: 0.0120,\n  equity: -0.0581,\n  bond: 0.0595\n}, {\n  year: 1963,\n  inflation: 0.0120,\n  equity: 0.1751,\n  bond: 0.0132\n}, {\n  year: 1964,\n  inflation: 0.0130,\n  equity: 0.1265,\n  bond: 0.0402\n}, {\n  year: 1965,\n  inflation: 0.0160,\n  equity: 0.0836,\n  bond: 0.0115\n}, {\n  year: 1966,\n  inflation: 0.0300,\n  equity: -0.0950,\n  bond: 0.0483\n}, {\n  year: 1967,\n  inflation: 0.0280,\n  equity: 0.1254,\n  bond: -0.0202\n}, {\n  year: 1968,\n  inflation: 0.0430,\n  equity: 0.0732,\n  bond: 0.0207\n}, {\n  year: 1969,\n  inflation: 0.0550,\n  equity: -0.1146,\n  bond: -0.0499\n}, {\n  year: 1970,\n  inflation: 0.0580,\n  equity: 0.0352,\n  bond: 0.1822\n}, {\n  year: 1971,\n  inflation: 0.0430,\n  equity: 0.1049,\n  bond: 0.0822\n}, {\n  year: 1972,\n  inflation: 0.0330,\n  equity: 0.1462,\n  bond: 0.0255\n}, {\n  year: 1973,\n  inflation: 0.0620,\n  equity: -0.1883,\n  bond: 0.0301\n}, {\n  year: 1974,\n  inflation: 0.1110,\n  equity: -0.2450,\n  bond: 0.0374\n}, {\n  year: 1975,\n  inflation: 0.0910,\n  equity: 0.3349,\n  bond: 0.0598\n}, {\n  year: 1976,\n  inflation: 0.0570,\n  equity: 0.0716,\n  bond: 0.1116\n}, {\n  year: 1977,\n  inflation: 0.0650,\n  equity: -0.1305,\n  bond: 0.0252\n}, {\n  year: 1978,\n  inflation: 0.0760,\n  equity: 0.1048,\n  bond: 0.0115\n}, {\n  year: 1979,\n  inflation: 0.1130,\n  equity: 0.1122,\n  bond: -0.0039\n}, {\n  year: 1980,\n  inflation: 0.1350,\n  equity: 0.1993,\n  bond: 0.0157\n}, {\n  year: 1981,\n  inflation: 0.1030,\n  equity: -0.1180,\n  bond: 0.0279\n}, {\n  year: 1982,\n  inflation: 0.0610,\n  equity: 0.2302,\n  bond: 0.3795\n}, {\n  year: 1983,\n  inflation: 0.0320,\n  equity: 0.1532,\n  bond: 0.0393\n}, {\n  year: 1984,\n  inflation: 0.0430,\n  equity: 0.0312,\n  bond: 0.1325\n}, {\n  year: 1985,\n  inflation: 0.0350,\n  equity: 0.2133,\n  bond: 0.2441\n}, {\n  year: 1986,\n  inflation: 0.0190,\n  equity: 0.2704,\n  bond: 0.2289\n}, {\n  year: 1987,\n  inflation: 0.0370,\n  equity: -0.0529,\n  bond: -0.0258\n}, {\n  year: 1988,\n  inflation: 0.0410,\n  equity: 0.1393,\n  bond: 0.0616\n}, {\n  year: 1989,\n  inflation: 0.0480,\n  equity: 0.1912,\n  bond: 0.0909\n}, {\n  year: 1990,\n  inflation: 0.0540,\n  equity: -0.0426,\n  bond: 0.0896\n}, {\n  year: 1991,\n  inflation: 0.0420,\n  equity: 0.2783,\n  bond: 0.1499\n}, {\n  year: 1992,\n  inflation: 0.0300,\n  equity: 0.0460,\n  bond: 0.0988\n}, {\n  year: 1993,\n  inflation: 0.0300,\n  equity: 0.0868,\n  bond: 0.1244\n}, {\n  year: 1994,\n  inflation: 0.0260,\n  equity: -0.0164,\n  bond: -0.0705\n}, {\n  year: 1995,\n  inflation: 0.0280,\n  equity: 0.3206,\n  bond: 0.2249\n}, {\n  year: 1996,\n  inflation: 0.0290,\n  equity: 0.2471,\n  bond: -0.0052\n}, {\n  year: 1997,\n  inflation: 0.0230,\n  equity: 0.2573,\n  bond: 0.1380\n}, {\n  year: 1998,\n  inflation: 0.0160,\n  equity: 0.2963,\n  bond: 0.1144\n}, {\n  year: 1999,\n  inflation: 0.0220,\n  equity: 0.1416,\n  bond: -0.0810\n}, {\n  year: 2000,\n  inflation: 0.0340,\n  equity: -0.0631,\n  bond: 0.1725\n}, {\n  year: 2001,\n  inflation: 0.0280,\n  equity: -0.1463,\n  bond: 0.0601\n}, {\n  year: 2002,\n  inflation: 0.0160,\n  equity: -0.2143,\n  bond: 0.1238\n}, {\n  year: 2003,\n  inflation: 0.0230,\n  equity: 0.2642,\n  bond: 0.0331\n}, {\n  year: 2004,\n  inflation: 0.0270,\n  equity: 0.0432,\n  bond: 0.0363\n}, {\n  year: 2005,\n  inflation: 0.0340,\n  equity: 0.0824,\n  bond: 0.0276\n}, {\n  year: 2006,\n  inflation: 0.0320,\n  equity: 0.1137,\n  bond: 0.0198\n}, {\n  year: 2007,\n  inflation: 0.0290,\n  equity: -0.0319,\n  bond: 0.1243\n}, {\n  year: 2008,\n  inflation: 0.0380,\n  equity: -0.3722,\n  bond: 0.1346\n}, {\n  year: 2009,\n  inflation: -0.0040,\n  equity: 0.2981,\n  bond: -0.0659\n}, {\n  year: 2010,\n  inflation: 0.0160,\n  equity: 0.1415,\n  bond: 0.0633\n}, {\n  year: 2011,\n  inflation: 0.0320,\n  equity: 0.0140,\n  bond: 0.1500\n}, {\n  year: 2012,\n  inflation: 0.0210,\n  equity: 0.1383,\n  bond: 0.0246\n}, {\n  year: 2013,\n  inflation: 0.0150,\n  equity: 0.2310,\n  bond: -0.0554\n}, {\n  year: 2014,\n  inflation: 0.0160,\n  equity: 0.1129,\n  bond: 0.1090\n}, {\n  year: 2015,\n  inflation: 0.0010,\n  equity: -0.0540,\n  bond: 0.0017\n}, {\n  year: 2016,\n  inflation: 0.0130,\n  equity: 0.1858,\n  bond: -0.0063\n}, {\n  year: 2017,\n  inflation: 0.0210,\n  equity: 0.2262,\n  bond: 0.0124\n}, {\n  year: 2018,\n  inflation: 0.0240,\n  equity: -0.0654,\n  bond: 0.0155\n}, {\n  year: 2019,\n  inflation: 0.0180,\n  equity: 0.2573,\n  bond: 0.1055\n}, {\n  year: 2020,\n  inflation: 0.0120,\n  equity: 0.1573,\n  bond: 0.0176\n}];\n\nfunction Chart(props) {\n  _s();\n\n  const [allCycleDataState, setAllCycleDataState] = useState([]);\n  const [avgEndValueState, setAvgEndValueState] = useState(0);\n  const [medianEndValueState, setMedianEndValueState] = useState(0);\n  const [minEndValueState, setMinEndValueState] = useState(0);\n  const [maxEndValueState, setMaxEndValueState] = useState(0);\n  const [avgSpendState, setAvgSpendState] = useState(0);\n  const [medianSpendState, setMedianSpendState] = useState(0);\n  const [minSpendState, setMinSpendState] = useState(0);\n  const [maxSpendState, setMaxSpendState] = useState(0);\n  const [avgReturnsState, setAvgReturnsState] = useState(0);\n  const [medianReturnsState, setMedianReturnsState] = useState(0);\n  const [minReturnsState, setMinReturnsState] = useState(0);\n  const [maxReturnsState, setMaxReturnsState] = useState(0);\n  const [avgApprState, setAvgAppreciationState] = useState(0);\n  const [medianApprState, setMedianAppreciationState] = useState(0);\n  const [minApprState, setMinAppreciationState] = useState(0);\n  const [maxApprState, setMaxAppreciationState] = useState(0);\n  const [numCyclesState, setNumCyclesState] = useState(0);\n  const [numFailsState, setNumFailsState] = useState(0);\n  const [minFailAgeState, setMinFailAgeState] = useState(0);\n  const [medianFailAgeState, setMedianFailAgeState] = useState(0);\n  const svgID = 'd3target';\n  const perRunClass = 'perrundata';\n  const hoverLineID = 'hoverLine';\n  const ttWrapID = 'ttwrapper';\n  const ttBackID = 'ttbackground';\n  const ttAgeID = 'ttage';\n  const margin = {\n    top: 40,\n    right: 80,\n    bottom: 60,\n    left: 100\n  };\n  const totalWidth = 960;\n  const totalHeight = 700;\n  const boundedWidth = totalWidth - margin.left - margin.right;\n  const boundedHeight = totalHeight - margin.top - margin.bottom;\n  const tooltipWidth = 75;\n  const tooltipHeight = 75;\n  const marginTranslate = \"translate(\" + margin.left + \",\" + margin.top + \")\";\n  const plotTranslate = \"translate(\" + margin.left + \",\" + totalHeight + \")\";\n  const portfolioLineColor = \"Blue\";\n  const portfolioFailedLineColor = \"OrangeRed\";\n  const normalStrokeWidth = 1.5;\n  var allCycleMeta = [];\n\n  const getXScale = () => {\n    var xExt = [props.currentage, props.lifeexpectancy];\n    return d3.scaleLinear().domain(xExt).range([0, boundedWidth]);\n  };\n\n  const getYScale = (rangeMin, rangeMax) => {\n    var yExt = [rangeMin, rangeMax];\n    return d3.scaleLinear().domain(yExt).range([boundedHeight, 0]);\n  };\n\n  const drawAxes = (svg, xScaleIn, yScaleIn, rangeMin, rangeMax) => {\n    svg.append(\"g\").attr(\"class\", perRunClass).attr(\"transform\", \"translate(0,\" + boundedHeight + \")\").call(d3.axisBottom(xScaleIn));\n    svg.append(\"g\").attr(\"class\", perRunClass).call(d3.axisLeft(yScaleIn)); // draw line at zero y\n\n    var yScale = getYScale(rangeMin, rangeMax);\n    const zeroY = yScale(0.0);\n    svg.append(\"g\").attr(\"class\", perRunClass).append(\"rect\").attr(\"pointer-events\", \"none\").attr(\"stroke-width\", \"2.5px\").attr(\"stroke\", \"DarkRed\").attr('x', 0.0).attr('y', zeroY).attr(\"height\", \".25px\").attr(\"width\", boundedWidth);\n  };\n\n  const drawPortfolioLine = (svg, xScaleIn, yScaleIn, oneCycleMeta, oneCycle) => {\n    // Add the equity line\n    svg.append(\"path\").datum(oneCycle).attr('class', perRunClass).attr(\"fill\", \"none\").attr(\"pointer-events\", \"none\").style(\"opacity\", 1).attr(\"stroke\", oneCycleMeta.lineColor).attr(\"stroke-width\", normalStrokeWidth).attr(\"d\", d3.line().x(function (d) {\n      return xScaleIn(d.age);\n    }).y(function (d) {\n      return yScaleIn(d.endValue);\n    }));\n  };\n\n  const prepHoverStuff = svg => {\n    const tooltipWrapper = svg.append('g').attr('id', ttWrapID).attr('display', 'none');\n    tooltipWrapper.append('rect').style('opacity', 0.70).attr('id', ttBackID).attr('width', tooltipWidth).attr('height', tooltipHeight).attr(\"pointer-events\", \"none\").attr(\"fill\", \"#e8e8e8\");\n    const tooltipText = tooltipWrapper.append('g').append('text');\n    tooltipText.attr(\"pointer-events\", \"none\").attr('font-weight', 900).attr('text-anchor', 'left');\n    const ageTT = tooltipText.append('tspan').attr('id', ttAgeID).attr('x', '5').attr('y', '5').attr('dy', '15px').attr(\"pointer-events\", \"none\");\n    const hoverLine = svg.append(\"g\").append(\"rect\").style('opacity', 0).attr('id', hoverLineID).attr(\"pointer-events\", \"none\").attr(\"class\", \"dotted\").attr(\"stroke-width\", \"1px\").attr(\"width\", \".5px\").attr(\"height\", boundedHeight);\n  };\n\n  const getHoverLine = () => {\n    return d3.select('#' + hoverLineID);\n  };\n\n  const getTooltipWrapper = () => {\n    return d3.select('#' + ttWrapID);\n  };\n\n  const getTooltipBackground = () => {\n    return d3.select('#' + ttBackID);\n  };\n\n  const getTooltipAgeSpan = () => {\n    return d3.select('#' + ttAgeID);\n  };\n\n  const handleMouseOver = e => {\n    console.log('handleMouseOver');\n    getHoverLine().style('opacity', 1);\n    getTooltipWrapper().attr('display', null);\n  };\n\n  const handleMouseMove = e => {\n    console.log('handleMouseMove');\n    const bisect = d3.bisector(d => d.age).left;\n    var xScaleIn = getXScale();\n    const coords = d3.pointer(e);\n    const x0 = xScaleIn.invert(coords[0]);\n    const oneCycleData = allCycleDataState[0];\n    const i = bisect(oneCycleData, x0, 1);\n    const selectedData = oneCycleData[i];\n    const clientX = xScaleIn(selectedData.age);\n    var tooltipX = clientX; // prevent the tooltip from getting clipped.\n\n    const tooltipWidth = 75;\n\n    if (boundedWidth <= clientX + tooltipWidth) {\n      tooltipX = clientX - tooltipWidth;\n    }\n\n    getTooltipAgeSpan().text('age: ' + selectedData.age);\n    const ttBounds = getTooltipWrapper().node().getBBox();\n    getTooltipBackground().attr('width', ttBounds.width).attr('height', ttBounds.height);\n    getTooltipWrapper().attr(\"transform\", \"translate(\" + tooltipX + \",\" + coords[1] + \")\");\n    getHoverLine().attr('x', clientX);\n    getTooltipWrapper().attr('x', tooltipX);\n  };\n\n  const handleMouseLeave = () => {\n    console.log('handleMouseLeave');\n    getHoverLine().style('opacity', 0);\n    getTooltipWrapper().attr('display', 'none');\n  };\n\n  const makeCurrency = num => {\n    let dollarUSLocale = Intl.NumberFormat('en-US', {\n      style: \"currency\",\n      currency: \"USD\"\n    });\n    return dollarUSLocale.format(num);\n  };\n\n  const makePct = num => {\n    return Number(num * 100).toFixed(2) + '%';\n  };\n\n  const cleanupPrev = svg => {\n    const perRunSelect = '.' + perRunClass;\n    d3.selectAll(perRunSelect).remove();\n  };\n  /*\n  const deadCycleCode = () => {\n          // summary : \n          //           translate beginValue to infl adj dollars\n          var beginInflAdj = obj.beginValue * obj.cumulativeCPI;\n          //           derive spend amount, and translate into infl adj dollars\n          //           TODO - determine whether or not to vary ssincome with inflation\n          var spendInflAdj = obj.spend * obj.cumulativeCPI;\n          if (obj.age >= props.ssage) {\n              spendInflAdj -= props.ssincome;\n          }\n          //           subtract adj spend and fees from adj begin\n          var adjFees = feePct * beginInflAdj;\n          var endAdjInfl = beginInflAdj - spendInflAdj - adjFees;\n          //           calc gains, and add them\n          var adjGains = endAdjInfl * obj.aggReturn;\n          endAdjInfl += adjGains;\n          //           translate results back to today's dollars\n          obj.endValue = endAdjInfl / obj.cumulativeCPI;\n          obj.actualSpend = spendInflAdj / obj.cumulativeCPI;\n          obj.appr = adjGains / obj.cumulativeCPI;\n   }\n  */\n\n\n  const runCycle = (startIndex, numYears) => {\n    var cycleData = [];\n    var stockPct = +props.stockallocation / 100;\n    var bondPct = +props.bondallocation / 100;\n    var feePct = +props.feepct / 100; // TODO : apply corrected per-year math\n    // TODO : figure out per-year dividends\n    // TODO : capture end port with and without cumulative CPI \n    // \n\n    for (var i = 0; i < numYears; i++) {\n      var obj = {\n        \"year\": histData[startIndex + i].year,\n        \"age\": +props.currentage + i,\n        \"beginValue\": i > 0 ? cycleData[i - 1].endValue : +props.portfoliovalue,\n        \"equityReturn\": histData[startIndex + i].equity,\n        \"bondReturn\": histData[startIndex + i].bond,\n        \"aggReturn\": histData[startIndex + i].equity * stockPct + histData[startIndex + i].bond * bondPct,\n        \"inflation\": histData[startIndex + i].inflation,\n        \"cumulativeCPI\": i > 0 ? cycleData[i - 1].cumulativeCPI + histData[startIndex + i].inflation : 1 + histData[startIndex + i].inflation,\n        \"spend\": +props.spendvalue,\n        \"actualSpend\": +props.spendvalue,\n        \"endValue\": +props.portfoliovalue,\n        \"appr\": 0\n      }; // spend = yearly-spend * cum-cpi\n\n      var adjSpend = obj.spend * obj.cumulativeCPI; // port1 = subtract spend from start port\n      // e growth = port1 * e-share * e-growth\n      // b growth = port1 * b=share * b-growth\n      // port2 = port1 + e-growth + b-growth\n      // end port = port2 + dividends - fees\n\n      cycleData.push(obj);\n\n      if (0 >= obj.endValue) {\n        obj.endValue = 0;\n        break;\n      }\n    }\n\n    return cycleData;\n  };\n\n  const getAggReturns = () => {\n    var retVal = [];\n    var stockPct = props.stockallocation / 100;\n    var bondPct = props.bondallocation / 100;\n\n    for (var i = 0; i < histData.length; i++) {\n      retVal[i] = histData[i].equity * stockPct + histData[i].bond * bondPct;\n    }\n\n    return retVal;\n  };\n\n  const calcCycleMeta = (oneCycle, lifetime) => {\n    var ext = d3.extent(oneCycle, d => d.endValue);\n    var avg = d3.mean(oneCycle, d => d.endValue);\n    var med = d3.median(oneCycle, d => d.endValue);\n    var totalSpend = d3.sum(oneCycle, d => d.actualSpend);\n    var totalAppr = d3.sum(oneCycle, d => d.appr);\n    var oneMeta = {\n      'startCycleValue': props.portfoliovalue,\n      'endCycleValue': oneCycle[oneCycle.length - 1].endValue,\n      'extent': ext,\n      'mean': avg,\n      'median': med,\n      'totalSpend': totalSpend,\n      'totalAppreciation': totalAppr,\n      'fail': oneCycle.length < lifetime,\n      'failAge': oneCycle.length < lifetime ? oneCycle.length + props.currentage : 0,\n      'lineColor': oneCycle.length === lifetime ? portfolioLineColor : portfolioFailedLineColor\n    };\n    return oneMeta;\n  };\n\n  const showSummaryData = allCycles => {\n    var ext = d3.extent(allCycleMeta, d => d.endCycleValue);\n    var avg = d3.mean(allCycleMeta, d => d.endCycleValue);\n    var med = d3.median(allCycleMeta, d => d.endCycleValue);\n    var avgSpend = d3.mean(allCycleMeta, d => d.totalSpend);\n    var medianSpend = d3.median(allCycleMeta, d => d.totalSpend);\n    var extSpend = d3.extent(allCycleMeta, d => d.totalSpend);\n    var aggReturns = getAggReturns();\n    var avgReturns = d3.mean(aggReturns);\n    var medianReturns = d3.median(aggReturns);\n    var extReturns = d3.extent(aggReturns);\n    var avgAppr = d3.mean(allCycleMeta, d => d.totalAppreciation);\n    var medianAppr = d3.median(allCycleMeta, d => d.totalAppreciation);\n    var extAppr = d3.extent(allCycleMeta, d => d.totalAppreciation);\n    var numFails = 0;\n    var minFailAge = props.lifeexpectancy + 1;\n    var failAges = [];\n\n    for (var i = 0; i < allCycleMeta.length; i++) {\n      if (allCycleMeta[i].fail) {\n        minFailAge = Math.min(allCycleMeta[i].failAge, minFailAge);\n        failAges[numFails] = allCycleMeta[i].failAge;\n        numFails++;\n      }\n    }\n\n    setAvgEndValueState(avg);\n    setMedianEndValueState(med);\n    setMinEndValueState(ext[0]);\n    setMaxEndValueState(ext[1]);\n    setAvgSpendState(avgSpend);\n    setMedianSpendState(medianSpend);\n    setMinSpendState(extSpend[0]);\n    setMaxSpendState(extSpend[1]);\n    setAvgReturnsState(avgReturns);\n    setMedianReturnsState(medianReturns);\n    setMinReturnsState(extReturns[0]);\n    setMaxReturnsState(extReturns[1]);\n    setAvgAppreciationState(avgAppr);\n    setMedianAppreciationState(medianAppr);\n    setMinAppreciationState(extAppr[0]);\n    setMaxAppreciationState(extAppr[1]);\n    setNumCyclesState(allCycleMeta.length);\n    setNumFailsState(numFails);\n    setMinFailAgeState(minFailAge);\n    setMedianFailAgeState(d3.median(failAges));\n  };\n\n  const calcCycles = svg => {\n    const lifetime = props.lifeexpectancy - props.currentage + 1;\n    const numCycles = histData.length - lifetime;\n    const startIndex = 0;\n    var portMin = Number.POSITIVE_INFINITY;\n    var portMax = Number.NEGATIVE_INFINITY;\n    var allCycles = [];\n    cleanupPrev();\n\n    for (var i = 0; i < numCycles; i++) {\n      var oneCycle = runCycle(startIndex + i, lifetime);\n      var cycleMeta = calcCycleMeta(oneCycle, lifetime);\n      allCycleMeta[i] = cycleMeta;\n      allCycles[i] = oneCycle;\n      portMin = Math.min(portMin, cycleMeta.extent[0]);\n      portMax = Math.max(portMax, cycleMeta.extent[1]);\n    }\n\n    setAllCycleDataState(allCycles);\n    showSummaryData(allCycles);\n    const xScale = getXScale();\n    const yScale = getYScale(portMin, portMax);\n    drawAxes(svg, xScale, yScale, portMin, portMax);\n\n    for (i = 0; i < numCycles; i++) {\n      drawPortfolioLine(svg, xScale, yScale, allCycleMeta[i], allCycles[i]);\n    }\n  };\n\n  React.useEffect(() => {\n    const svgSelect = '#' + svgID;\n    const svg = d3.select(svgSelect).append(\"g\").attr(\"transform\", marginTranslate);\n    calcCycles(svg);\n    prepHoverStuff(svg);\n    console.log('effect');\n  }, [props]);\n  console.log('render');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [makePct(1 - numFailsState / numCyclesState), \" success\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [numFailsState, \" failure of \", numCyclesState, \" cycles\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"Median failure age : \", medianFailAgeState]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"Minimum failure age : \", minFailAgeState]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"$ End Value\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"median : \", makeCurrency(medianEndValueState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"mean : \", makeCurrency(avgEndValueState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"max : \", makeCurrency(maxEndValueState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"min : \", makeCurrency(minEndValueState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"% Returns\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"median : \", makePct(medianReturnsState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"mean : \", makePct(avgReturnsState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"max : \", makePct(maxReturnsState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"min : \", makePct(minReturnsState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"$ Appreciation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"median : \", makeCurrency(medianApprState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"mean : \", makeCurrency(avgApprState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"max : \", makeCurrency(maxApprState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"min : \", makeCurrency(minApprState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Total Spend\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"median : \", makeCurrency(medianSpendState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"mean : \", makeCurrency(avgSpendState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"max : \", makeCurrency(maxSpendState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: [\"min : \", makeCurrency(minSpendState)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      id: svgID,\n      width: totalWidth,\n      height: totalHeight,\n      children: /*#__PURE__*/_jsxDEV(\"rect\", {\n        id: \"trackingRect\",\n        style: {\n          opacity: 0\n        },\n        width: boundedWidth,\n        height: boundedHeight,\n        transform: marginTranslate,\n        fill: \"LightGrey\",\n        onMouseEnter: handleMouseOver,\n        onMouseMove: handleMouseMove,\n        onMouseLeave: handleMouseLeave\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 541,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chart, \"55miDhuQTG1tdHAHSF/B2i4B4Gw=\");\n\n_c = Chart;\n;\nexport default Chart; // d3 line chart example : https://www.d3-graph-gallery.com/graph/line_basic.html\n// example to draw axis : https://wattenberger.com/blog/react-and-d3\n// example : https://sharkcoder.com/data-visualization/d3-react\n// tooltip example : https://observablehq.com/@connor-roche/multi-line-chart-focus-context-w-mouseover-tooltip\n\nvar _c;\n\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"sources":["/Users/paul/OneDrive/Documents/code/src/swrve/src/chart.js"],"names":["React","useState","Stack","Card","CardContent","Typography","d3","histData","year","inflation","equity","bond","Chart","props","allCycleDataState","setAllCycleDataState","avgEndValueState","setAvgEndValueState","medianEndValueState","setMedianEndValueState","minEndValueState","setMinEndValueState","maxEndValueState","setMaxEndValueState","avgSpendState","setAvgSpendState","medianSpendState","setMedianSpendState","minSpendState","setMinSpendState","maxSpendState","setMaxSpendState","avgReturnsState","setAvgReturnsState","medianReturnsState","setMedianReturnsState","minReturnsState","setMinReturnsState","maxReturnsState","setMaxReturnsState","avgApprState","setAvgAppreciationState","medianApprState","setMedianAppreciationState","minApprState","setMinAppreciationState","maxApprState","setMaxAppreciationState","numCyclesState","setNumCyclesState","numFailsState","setNumFailsState","minFailAgeState","setMinFailAgeState","medianFailAgeState","setMedianFailAgeState","svgID","perRunClass","hoverLineID","ttWrapID","ttBackID","ttAgeID","margin","top","right","bottom","left","totalWidth","totalHeight","boundedWidth","boundedHeight","tooltipWidth","tooltipHeight","marginTranslate","plotTranslate","portfolioLineColor","portfolioFailedLineColor","normalStrokeWidth","allCycleMeta","getXScale","xExt","currentage","lifeexpectancy","scaleLinear","domain","range","getYScale","rangeMin","rangeMax","yExt","drawAxes","svg","xScaleIn","yScaleIn","append","attr","call","axisBottom","axisLeft","yScale","zeroY","drawPortfolioLine","oneCycleMeta","oneCycle","datum","style","lineColor","line","x","d","age","y","endValue","prepHoverStuff","tooltipWrapper","tooltipText","ageTT","hoverLine","getHoverLine","select","getTooltipWrapper","getTooltipBackground","getTooltipAgeSpan","handleMouseOver","e","console","log","handleMouseMove","bisect","bisector","coords","pointer","x0","invert","oneCycleData","i","selectedData","clientX","tooltipX","text","ttBounds","node","getBBox","width","height","handleMouseLeave","makeCurrency","num","dollarUSLocale","Intl","NumberFormat","currency","format","makePct","Number","toFixed","cleanupPrev","perRunSelect","selectAll","remove","runCycle","startIndex","numYears","cycleData","stockPct","stockallocation","bondPct","bondallocation","feePct","feepct","obj","portfoliovalue","cumulativeCPI","spendvalue","adjSpend","spend","push","getAggReturns","retVal","length","calcCycleMeta","lifetime","ext","extent","avg","mean","med","median","totalSpend","sum","actualSpend","totalAppr","appr","oneMeta","showSummaryData","allCycles","endCycleValue","avgSpend","medianSpend","extSpend","aggReturns","avgReturns","medianReturns","extReturns","avgAppr","totalAppreciation","medianAppr","extAppr","numFails","minFailAge","failAges","fail","Math","min","failAge","calcCycles","numCycles","portMin","POSITIVE_INFINITY","portMax","NEGATIVE_INFINITY","cycleMeta","max","xScale","useEffect","svgSelect","opacity"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {useState} from \"react\";\nimport { Stack } from \"@mui/material\";\nimport { Card } from \"@mui/material\";\nimport { CardContent } from \"@mui/material\";\nimport { Typography } from \"@mui/material\";\nimport * as d3 from \"d3\";\nimport \"./chartdata.css\";\n\nconst histData = \n    [{ year: 1921, inflation: -0.1090, equity: 0.0267, bond: 0.1088},\n    { year: 1922, inflation: -0.0620, equity: 0.2192, bond: 0.0386},\n    { year: 1923, inflation: 0.0180, equity: -0.0079, bond: 0.0658},\n    { year: 1924, inflation: 0.0040, equity: 0.1982, bond: 0.0556},\n    { year: 1925, inflation: 0.0240, equity: 0.1957, bond: 0.0522},\n    { year: 1926, inflation: 0.0090, equity: 0.0593, bond: 0.0629},\n    { year: 1927, inflation: -0.0190, equity: 0.3082, bond: 0.0342},\n    { year: 1928, inflation: -0.0120, equity: 0.4181, bond: 0.0129},\n    { year: 1929, inflation: 0.0000, equity: -0.1267, bond: 0.0598},\n    { year: 1930, inflation: -0.0270, equity: -0.2639, bond: 0.0291},\n    { year: 1931, inflation: -0.0890, equity: -0.4806, bond: 0.0077},\n    { year: 1932, inflation: -0.1030, equity: -0.1458, bond: 0.0652},\n    { year: 1933, inflation: -0.0520, equity: 0.4866, bond: 0.0478},\n    { year: 1934, inflation: 0.0350, equity: -0.1214, bond: 0.0571},\n    { year: 1935, inflation: 0.0260, equity: 0.4860, bond: 0.0390},\n    { year: 1937, inflation: 0.0370, equity: -0.3570,  bond: 0.0363},\n    { year: 1938, inflation: -0.0200, equity: 0.1052, bond: 0.0416},\n    { year: 1939, inflation: -0.0130, equity: -0.0160, bond: 0.0357},\n    { year: 1940, inflation: 0.0070, equity: -0.1423, bond: 0.0434},\n    { year: 1941, inflation: 0.0510, equity: -0.1536, bond: -0.0212},\n    { year: 1942, inflation: 0.1090, equity: 0.1299, bond: 0.0238},\n    { year: 1943, inflation: 0.0600, equity: 0.1744, bond: 0.0239},\n    { year: 1944, inflation: 0.0160, equity: 0.1384, bond: 0.0336},\n    { year: 1945, inflation: 0.0230, equity: 0.3358, bond: 0.0383},\n    { year: 1946, inflation: 0.0850, equity: -0.1559, bond: 0.0171},\n    { year: 1947, inflation: 0.1440, equity: -0.0250, bond: 0.0073},\n    { year: 1948, inflation: 0.0770, equity: 0.0357, bond: 0.0349},\n    { year: 1949, inflation: -0.0100, equity: 0.0990, bond: 0.0223},\n    { year: 1950, inflation: 0.0110, equity: 0.2565, bond: 0.0033},\n    { year: 1951, inflation: 0.0790, equity: 0.1405, bond: 0.0170},\n    { year: 1952, inflation: 0.0230, equity: 0.0823, bond: 0.0150},\n    { year: 1953, inflation: 0.0080, equity: -0.0275, bond: 0.0562},\n    { year: 1954, inflation: 0.0030, equity: 0.3983, bond: 0.0145},\n    { year: 1955, inflation: -0.0030, equity: 0.2402, bond: 0.0261},\n    { year: 1956, inflation: 0.0150, equity: 0.0290, bond: -0.0137},\n    { year: 1957, inflation: 0.0330, equity: -0.0949, bond: 0.0633},\n    { year: 1958, inflation: 0.0270, equity: 0.3526, bond: -0.0382},\n    { year: 1959, inflation: 0.0108, equity: 0.0433, bond: -0.0102},\n    { year: 1960, inflation: 0.0150, equity: 0.0291, bond: 0.1131},\n    { year: 1961, inflation: 0.0110, equity: 0.1566, bond: 0.0206},\n    { year: 1962, inflation: 0.0120, equity: -0.0581, bond: 0.0595},\n    { year: 1963, inflation: 0.0120, equity: 0.1751, bond: 0.0132},\n    { year: 1964, inflation: 0.0130, equity: 0.1265, bond: 0.0402},\n    { year: 1965, inflation: 0.0160, equity: 0.0836, bond: 0.0115},\n    { year: 1966, inflation: 0.0300, equity: -0.0950, bond: 0.0483},\n    { year: 1967, inflation: 0.0280, equity: 0.1254, bond: -0.0202},\n    { year: 1968, inflation: 0.0430, equity: 0.0732, bond: 0.0207},\n    { year: 1969, inflation: 0.0550, equity: -0.1146, bond: -0.0499},\n    { year: 1970, inflation: 0.0580, equity: 0.0352, bond: 0.1822},\n    { year: 1971, inflation: 0.0430, equity: 0.1049, bond: 0.0822},\n    { year: 1972, inflation: 0.0330, equity: 0.1462, bond: 0.0255},\n    { year: 1973, inflation: 0.0620, equity: -0.1883, bond: 0.0301},\n    { year: 1974, inflation: 0.1110, equity: -0.2450, bond: 0.0374},\n    { year: 1975, inflation: 0.0910, equity: 0.3349, bond: 0.0598},\n    { year: 1976, inflation: 0.0570, equity: 0.0716, bond: 0.1116},\n    { year: 1977, inflation: 0.0650, equity: -0.1305, bond: 0.0252},\n    { year: 1978, inflation: 0.0760, equity: 0.1048, bond: 0.0115},\n    { year: 1979, inflation: 0.1130, equity: 0.1122, bond: -0.0039},\n    { year: 1980, inflation: 0.1350, equity: 0.1993, bond: 0.0157},\n    { year: 1981, inflation: 0.1030, equity: -0.1180, bond: 0.0279},\n    { year: 1982, inflation: 0.0610, equity: 0.2302, bond: 0.3795},\n    { year: 1983, inflation: 0.0320, equity: 0.1532, bond: 0.0393},\n    { year: 1984, inflation: 0.0430, equity: 0.0312, bond: 0.1325},\n    { year: 1985, inflation: 0.0350, equity: 0.2133, bond: 0.2441},\n    { year: 1986, inflation: 0.0190, equity: 0.2704, bond: 0.2289},\n    { year: 1987, inflation: 0.0370, equity: -0.0529, bond: -0.0258},\n    { year: 1988, inflation: 0.0410, equity: 0.1393, bond: 0.0616},\n    { year: 1989, inflation: 0.0480, equity: 0.1912, bond: 0.0909},\n    { year: 1990, inflation: 0.0540, equity: -0.0426, bond: 0.0896},\n    { year: 1991, inflation: 0.0420, equity: 0.2783, bond: 0.1499},\n    { year: 1992, inflation: 0.0300, equity: 0.0460, bond: 0.0988},\n    { year: 1993, inflation: 0.0300, equity: 0.0868, bond: 0.1244},\n    { year: 1994, inflation: 0.0260, equity: -0.0164, bond: -0.0705},\n    { year: 1995, inflation: 0.0280, equity: 0.3206, bond: 0.2249},\n    { year: 1996, inflation: 0.0290, equity: 0.2471, bond: -0.0052},\n    { year: 1997, inflation: 0.0230, equity: 0.2573, bond: 0.1380},\n    { year: 1998, inflation: 0.0160, equity: 0.2963, bond: 0.1144},\n    { year: 1999, inflation: 0.0220, equity: 0.1416, bond: -0.0810},\n    { year: 2000, inflation: 0.0340, equity: -0.0631, bond: 0.1725},\n    { year: 2001, inflation: 0.0280, equity: -0.1463, bond: 0.0601},\n    { year: 2002, inflation: 0.0160, equity: -0.2143, bond: 0.1238},\n    { year: 2003, inflation: 0.0230, equity: 0.2642, bond: 0.0331},\n    { year: 2004, inflation: 0.0270, equity: 0.0432, bond: 0.0363},\n    { year: 2005, inflation: 0.0340, equity: 0.0824, bond: 0.0276},\n    { year: 2006, inflation: 0.0320, equity: 0.1137, bond: 0.0198},\n    { year: 2007, inflation: 0.0290, equity: -0.0319, bond: 0.1243},\n    { year: 2008, inflation: 0.0380, equity: -0.3722, bond: 0.1346},\n    { year: 2009, inflation: -0.0040, equity: 0.2981, bond: -0.0659},\n    { year: 2010, inflation: 0.0160, equity: 0.1415, bond: 0.0633},\n    { year: 2011, inflation: 0.0320, equity: 0.0140, bond: 0.1500},\n    { year: 2012, inflation: 0.0210, equity: 0.1383, bond: 0.0246},\n    { year: 2013, inflation: 0.0150, equity: 0.2310, bond: -0.0554},\n    { year: 2014, inflation: 0.0160, equity: 0.1129, bond: 0.1090},\n    { year: 2015, inflation: 0.0010, equity: -0.0540, bond: 0.0017},\n    { year: 2016, inflation: 0.0130, equity: 0.1858, bond: -0.0063},\n    { year: 2017, inflation: 0.0210, equity: 0.2262, bond: 0.0124},\n    { year: 2018, inflation: 0.0240, equity: -0.0654, bond: 0.0155},\n    { year: 2019, inflation: 0.0180, equity: 0.2573, bond: 0.1055},\n    { year: 2020, inflation: 0.0120, equity: 0.1573, bond: 0.0176}];\n\nfunction Chart (props) {\n  \n    const [allCycleDataState, setAllCycleDataState] = useState([]);\n\n    const [avgEndValueState, setAvgEndValueState] = useState(0);\n    const [medianEndValueState, setMedianEndValueState] = useState(0);\n    const [minEndValueState, setMinEndValueState] = useState(0);\n    const [maxEndValueState, setMaxEndValueState] = useState(0);\n\n    const [avgSpendState, setAvgSpendState] = useState(0);\n    const [medianSpendState, setMedianSpendState] = useState(0);\n    const [minSpendState, setMinSpendState] = useState(0);\n    const [maxSpendState, setMaxSpendState] = useState(0);\n\n    const [avgReturnsState, setAvgReturnsState] = useState(0);\n    const [medianReturnsState, setMedianReturnsState] = useState(0);\n    const [minReturnsState, setMinReturnsState] = useState(0);\n    const [maxReturnsState, setMaxReturnsState] = useState(0);\n    \n    const [avgApprState, setAvgAppreciationState] = useState(0);\n    const [medianApprState, setMedianAppreciationState] = useState(0);\n    const [minApprState, setMinAppreciationState] = useState(0);\n    const [maxApprState, setMaxAppreciationState] = useState(0);\n    \n    const [numCyclesState, setNumCyclesState] = useState(0);\n    const [numFailsState, setNumFailsState] = useState(0);\n    const [minFailAgeState, setMinFailAgeState] = useState(0);\n    const [medianFailAgeState, setMedianFailAgeState] = useState(0);\n\n    const svgID = 'd3target';\n    const perRunClass = 'perrundata';\n    const hoverLineID = 'hoverLine';\n    const ttWrapID = 'ttwrapper';\n    const ttBackID = 'ttbackground';\n    const ttAgeID = 'ttage';\n    const margin = { top: 40, right: 80, bottom: 60, left: 100 };\n    const totalWidth = 960;\n    const totalHeight = 700;\n    const boundedWidth = totalWidth - margin.left - margin.right;\n    const boundedHeight = totalHeight - margin.top - margin.bottom;\n    const tooltipWidth = 75;\n    const tooltipHeight = 75;\n    const marginTranslate = \"translate(\" + margin.left + \",\" + margin.top + \")\";\n    const plotTranslate = \"translate(\" + margin.left + \",\" + totalHeight + \")\";\n    const portfolioLineColor = \"Blue\";\n    const portfolioFailedLineColor = \"OrangeRed\";\n    const normalStrokeWidth = 1.5;\n    var allCycleMeta = [];\n\n    const getXScale = () => { \n        var xExt = [props.currentage, props.lifeexpectancy];\n        return d3.scaleLinear()\n                    .domain(xExt)\n                    .range([ 0, boundedWidth ]);\n    }\n\n    const getYScale = (rangeMin, rangeMax) => {\n        var yExt = [rangeMin, rangeMax];\n        return d3.scaleLinear()\n                    .domain(yExt)\n                    .range([ boundedHeight, 0 ]);\n    }\n\n    const drawAxes = (svg, xScaleIn, yScaleIn, rangeMin, rangeMax) => {\n \n        svg.append(\"g\")\n            .attr(\"class\", perRunClass)\n            .attr(\"transform\", \"translate(0,\" + boundedHeight + \")\")\n            .call(d3.axisBottom(xScaleIn));\n        svg.append(\"g\")\n            .attr(\"class\", perRunClass)\n            .call(d3.axisLeft(yScaleIn));\n\n        // draw line at zero y\n        var yScale = getYScale(rangeMin, rangeMax);\n        const zeroY = yScale(0.0);\n\n        svg.append(\"g\")\n           .attr(\"class\", perRunClass)\n           .append(\"rect\")\n           .attr(\"pointer-events\", \"none\")\n           .attr(\"stroke-width\", \"2.5px\")\n           .attr(\"stroke\", \"DarkRed\")\n           .attr('x', 0.0)\n           .attr('y', zeroY)\n           .attr(\"height\", \".25px\")\n           .attr(\"width\", boundedWidth);\n    };\n\n    const drawPortfolioLine = (svg, xScaleIn, yScaleIn, oneCycleMeta, oneCycle) => {\n        // Add the equity line\n        svg.append(\"path\")\n            .datum(oneCycle)\n            .attr('class', perRunClass)\n            .attr(\"fill\", \"none\")\n            .attr(\"pointer-events\", \"none\")\n            .style(\"opacity\", 1)\n            .attr(\"stroke\", oneCycleMeta.lineColor)\n            .attr(\"stroke-width\", normalStrokeWidth)\n            .attr(\"d\", d3.line()\n                        .x(function(d) { return xScaleIn(d.age) })\n                        .y(function(d) { return yScaleIn(d.endValue) })\n            );        \n    }\n\n    const prepHoverStuff = (svg) => {\n        const tooltipWrapper = svg\n                .append('g')\n                .attr('id', ttWrapID)\n                .attr('display', 'none');\n        \n        tooltipWrapper.append('rect')\n                        .style('opacity', 0.70)\n                        .attr('id', ttBackID)\n                        .attr('width', tooltipWidth)\n                        .attr('height', tooltipHeight)\n                        .attr(\"pointer-events\", \"none\")\n                        .attr(\"fill\", \"#e8e8e8\"); \n\n        const tooltipText = tooltipWrapper.append('g').append('text');\n\n        tooltipText.attr(\"pointer-events\", \"none\")\n                    .attr('font-weight', 900)\n                    .attr('text-anchor', 'left');\n                    \n        const ageTT = tooltipText\n                .append('tspan')\n                .attr('id', ttAgeID)\n                .attr('x', '5')\n                .attr('y', '5')\n                .attr('dy', '15px')\n                .attr(\"pointer-events\", \"none\");\n\n        const hoverLine = svg\n                .append(\"g\")\n                .append(\"rect\")\n                    .style('opacity', 0)\n                    .attr('id', hoverLineID)\n                    .attr(\"pointer-events\", \"none\")\n                    .attr(\"class\", \"dotted\")\n                    .attr(\"stroke-width\", \"1px\")\n                    .attr(\"width\", \".5px\")\n                    .attr(\"height\", boundedHeight);\n        \n    }\n\n    const getHoverLine = () => {\n        return d3.select('#' + hoverLineID);\n    }\n\n    const getTooltipWrapper = () => {\n        return d3.select('#' + ttWrapID);\n    }\n\n    const getTooltipBackground = () => {\n        return d3.select('#' + ttBackID);\n    }\n\n    const getTooltipAgeSpan = () => {\n        return d3.select('#' + ttAgeID);\n    }\n\n    const handleMouseOver = (e) => {\n        console.log('handleMouseOver');\n        getHoverLine().style('opacity', 1);\n        getTooltipWrapper().attr('display', null);\n    }\n\n    const handleMouseMove = (e) => {\n        console.log('handleMouseMove');\n\n        const bisect = d3.bisector((d) => d.age).left;\n        var xScaleIn = getXScale();\n        const coords = d3.pointer(e);\n        const x0 = xScaleIn.invert(coords[0]);\n        const oneCycleData = allCycleDataState[0];\n        const i = bisect(oneCycleData, x0, 1);\n        const selectedData = oneCycleData[i];\n        const clientX = xScaleIn(selectedData.age);\n        var tooltipX = clientX;\n        \n        // prevent the tooltip from getting clipped.\n        const tooltipWidth = 75;             \n        if (boundedWidth <= (clientX + tooltipWidth)) {\n            tooltipX = clientX - tooltipWidth;\n        }\n        getTooltipAgeSpan().text('age: ' + selectedData.age);\n\n        const ttBounds = getTooltipWrapper().node().getBBox();\n        getTooltipBackground()                \n            .attr('width', ttBounds.width)\n            .attr('height', ttBounds.height);\n\n        getTooltipWrapper().attr(\"transform\", \"translate(\" + tooltipX + \",\" + coords[1] + \")\");  \n\n        getHoverLine().attr('x', clientX);\n        getTooltipWrapper().attr('x', tooltipX)\n    };\n    \n    const handleMouseLeave = () => {\n        console.log('handleMouseLeave');\n        getHoverLine().style('opacity', 0);\n        getTooltipWrapper().attr('display', 'none');\n    };\n\n    const makeCurrency = (num) => {\n        let dollarUSLocale = Intl.NumberFormat('en-US', {\n            style: \"currency\",\n            currency: \"USD\",\n        });\n        return dollarUSLocale.format(num);\n    }\n\n    const makePct = (num) => {\n        return Number( num * 100).toFixed(2) + '%';\n    }\n\n    const cleanupPrev = (svg) => {\n        const perRunSelect = '.' + perRunClass;\n        d3.selectAll(perRunSelect).remove();\n    }\n\n    /*\n    const deadCycleCode = () => {\n            // summary : \n            //           translate beginValue to infl adj dollars\n            var beginInflAdj = obj.beginValue * obj.cumulativeCPI;\n            //           derive spend amount, and translate into infl adj dollars\n            //           TODO - determine whether or not to vary ssincome with inflation\n            var spendInflAdj = obj.spend * obj.cumulativeCPI;\n            if (obj.age >= props.ssage) {\n                spendInflAdj -= props.ssincome;\n            }\n            //           subtract adj spend and fees from adj begin\n            var adjFees = feePct * beginInflAdj;\n            var endAdjInfl = beginInflAdj - spendInflAdj - adjFees;\n            //           calc gains, and add them\n            var adjGains = endAdjInfl * obj.aggReturn;\n            endAdjInfl += adjGains;\n            //           translate results back to today's dollars\n            obj.endValue = endAdjInfl / obj.cumulativeCPI;\n            obj.actualSpend = spendInflAdj / obj.cumulativeCPI;\n            obj.appr = adjGains / obj.cumulativeCPI;\n\n    }\n    */\n\n    const runCycle = (startIndex, numYears) => {\n        var cycleData = [];\n        var stockPct = +(props.stockallocation) / 100;\n        var bondPct = +(props.bondallocation) / 100;\n        var feePct = +(props.feepct) / 100;\n\n        // TODO : apply corrected per-year math\n        // TODO : figure out per-year dividends\n        // TODO : capture end port with and without cumulative CPI \n        // \n\n        for(var i = 0; i < numYears; i++){\n            var obj = { \"year\": histData[startIndex + i].year,\n                        \"age\": +(props.currentage) + i,\n                        \"beginValue\": (i > 0) ? cycleData[i - 1].endValue : +(props.portfoliovalue),\n                        \"equityReturn\": histData[startIndex + i].equity,\n                        \"bondReturn\": histData[startIndex + i].bond,\n                        \"aggReturn\": ((histData[startIndex + i].equity * stockPct) +\n                                      (histData[startIndex + i].bond * bondPct)),\n                        \"inflation\": histData[startIndex + i].inflation,\n                        \"cumulativeCPI\": (i > 0) ? \n                                         (cycleData[i - 1].cumulativeCPI + histData[startIndex + i].inflation) :\n                                         (1 + histData[startIndex + i].inflation),\n                        \"spend\": +(props.spendvalue),\n                        \"actualSpend\": +(props.spendvalue),\n                        \"endValue\": +(props.portfoliovalue),\n                        \"appr\": 0,\n                      };\n            // spend = yearly-spend * cum-cpi\n            var adjSpend = obj.spend * obj.cumulativeCPI;\n            // port1 = subtract spend from start port\n            // e growth = port1 * e-share * e-growth\n            // b growth = port1 * b=share * b-growth\n            // port2 = port1 + e-growth + b-growth\n            // end port = port2 + dividends - fees\n\n\n            cycleData.push(obj);\n\n            if (0 >= obj.endValue) {\n                obj.endValue = 0;\n                break;\n            }\n        }\n        return cycleData;\n    }\n\n    const getAggReturns = () => {\n        var retVal = [];\n        var stockPct = props.stockallocation / 100;\n        var bondPct = props.bondallocation / 100;\n        for (var i = 0; i < histData.length; i++) {\n            retVal[i] = (histData[i].equity * stockPct) +\n                        (histData[i].bond * bondPct);\n        }\n\n        return retVal;\n    }\n\n    const calcCycleMeta = (oneCycle, lifetime) => {\n        var ext = d3.extent(oneCycle, (d) => d.endValue);\n        var avg = d3.mean(oneCycle, (d) => d.endValue);\n        var med = d3.median(oneCycle, (d) => d.endValue);\n        var totalSpend = d3.sum(oneCycle, (d) => d.actualSpend);\n        var totalAppr = d3.sum(oneCycle, (d) => d.appr);\n\n        var oneMeta = {\n            'startCycleValue': props.portfoliovalue,\n            'endCycleValue': oneCycle[oneCycle.length - 1].endValue,\n            'extent': ext,\n            'mean': avg,\n            'median': med,\n            'totalSpend': totalSpend,\n            'totalAppreciation': totalAppr,\n            'fail': (oneCycle.length < lifetime),\n            'failAge': (oneCycle.length < lifetime) ? \n                       (oneCycle.length + props.currentage) :\n                       0,\n            'lineColor': (oneCycle.length === lifetime) ? portfolioLineColor : portfolioFailedLineColor,\n        };\n\n        return oneMeta;\n    }\n\n    const showSummaryData = (allCycles) => {\n        var ext = d3.extent(allCycleMeta, (d) => d.endCycleValue);\n        var avg = d3.mean(allCycleMeta, (d) => d.endCycleValue);\n        var med = d3.median(allCycleMeta, (d) => d.endCycleValue);\n        var avgSpend = d3.mean(allCycleMeta, (d) => d.totalSpend);        \n        var medianSpend = d3.median(allCycleMeta, (d) => d.totalSpend);\n        var extSpend = d3.extent(allCycleMeta, (d) => d.totalSpend);\n        var aggReturns = getAggReturns();\n        var avgReturns = d3.mean(aggReturns);\n        var medianReturns = d3.median(aggReturns);\n        var extReturns = d3.extent(aggReturns);\n        var avgAppr = d3.mean(allCycleMeta, (d) => d.totalAppreciation);\n        var medianAppr = d3.median(allCycleMeta, (d) => d.totalAppreciation);\n        var extAppr = d3.extent(allCycleMeta, (d) => d.totalAppreciation);\n        var numFails = 0;\n        var minFailAge = props.lifeexpectancy + 1;\n        var failAges = [];\n\n        for (var i = 0; i < allCycleMeta.length; i++) {\n            if (allCycleMeta[i].fail) {\n                minFailAge = Math.min(allCycleMeta[i].failAge, minFailAge);\n                failAges[numFails] = allCycleMeta[i].failAge;\n                numFails++;\n            }\n        }\n\n        setAvgEndValueState(avg);\n        setMedianEndValueState(med);\n        setMinEndValueState(ext[0]);\n        setMaxEndValueState(ext[1]);\n\n        setAvgSpendState(avgSpend);\n        setMedianSpendState(medianSpend);\n        setMinSpendState(extSpend[0]);\n        setMaxSpendState(extSpend[1]);\n\n        setAvgReturnsState(avgReturns);\n        setMedianReturnsState(medianReturns);\n        setMinReturnsState(extReturns[0]);\n        setMaxReturnsState(extReturns[1]);\n\n        setAvgAppreciationState(avgAppr);\n        setMedianAppreciationState(medianAppr);\n        setMinAppreciationState(extAppr[0]);\n        setMaxAppreciationState(extAppr[1]);\n\n        setNumCyclesState(allCycleMeta.length);\n        setNumFailsState(numFails);\n        setMinFailAgeState(minFailAge);\n        setMedianFailAgeState(d3.median(failAges));\n    }\n\n    const calcCycles = (svg) => {\n        const lifetime = props.lifeexpectancy - props.currentage + 1;\n        const numCycles = (histData.length - lifetime);\n        const startIndex = 0;\n        var portMin = Number.POSITIVE_INFINITY;\n        var portMax = Number.NEGATIVE_INFINITY;\n        var allCycles = [];\n\n        cleanupPrev();\n\n        for (var i = 0; i < numCycles; i++) {\n            var oneCycle = runCycle(startIndex + i, lifetime);\n            var cycleMeta = calcCycleMeta(oneCycle, lifetime);\n            \n            allCycleMeta[i] = cycleMeta;\n            allCycles[i] = oneCycle;\n\n            portMin = Math.min(portMin, cycleMeta.extent[0]);\n            portMax = Math.max(portMax, cycleMeta.extent[1]);\n        }\n\n        setAllCycleDataState(allCycles);\n        showSummaryData(allCycles);\n\n        const xScale = getXScale();\n        const yScale = getYScale(portMin, portMax);\n\n        drawAxes(svg, xScale, yScale, portMin, portMax);\n        for (i = 0; i < numCycles; i++) {\n            drawPortfolioLine(svg, xScale, yScale, allCycleMeta[i], allCycles[i]);\n        }\n    }\n\n    React.useEffect(() => {\n\n        const svgSelect = '#' + svgID;\n        const svg = d3.select(svgSelect)\n                      .append(\"g\")\n                      .attr(\"transform\", marginTranslate);\n        calcCycles(svg);\n\n        prepHoverStuff(svg);\n        console.log('effect');\n    }, [props] );\n\n    console.log('render');\n    return (\n        <div>\n            <Stack direction=\"row\">\n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n                            Summary\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            {makePct(1 - (numFailsState / numCyclesState))} success\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            {numFailsState} failure of {numCyclesState} cycles                               \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            Median failure age : {medianFailAgeState}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            Minimum failure age : {minFailAgeState}\n                        </Typography>\n                    </CardContent>\n                </Card>\n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n                            $ End Value\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : {makeCurrency(medianEndValueState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : {makeCurrency(avgEndValueState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : {makeCurrency(maxEndValueState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            min : {makeCurrency(minEndValueState)}\n                        </Typography>\n                    </CardContent>\n                </Card>\n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n                            % Returns\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : { makePct(medianReturnsState) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : { makePct(avgReturnsState) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : { makePct(maxReturnsState) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            min : { makePct(minReturnsState) }\n                        </Typography>\n                    </CardContent>\n                </Card>                \n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n                            $ Appreciation\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : {makeCurrency(medianApprState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : {makeCurrency(avgApprState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : {makeCurrency(maxApprState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            min : {makeCurrency(minApprState)}\n                        </Typography>\n                    </CardContent>\n                </Card>                \n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n                            Total Spend\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : {makeCurrency(medianSpendState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : {makeCurrency(avgSpendState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : {makeCurrency(maxSpendState)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            min : {makeCurrency(minSpendState)}\n                        </Typography>\n                    </CardContent>\n                </Card>\n            </Stack>\n            <svg id={svgID} \n                    width={totalWidth}\n                    height={totalHeight} \n            >\n                <rect id='trackingRect'\n                    style={{ opacity:0 }}\n                    width={boundedWidth}\n                    height={boundedHeight}\n                    transform={marginTranslate}\n                    fill='LightGrey'\n                    onMouseEnter={handleMouseOver}\n                    onMouseMove={handleMouseMove}\n                    onMouseLeave={handleMouseLeave}\n                />\n            </svg>   \n        </div>\n    );\n};\n\nexport default Chart;\n\n// d3 line chart example : https://www.d3-graph-gallery.com/graph/line_basic.html\n// example to draw axis : https://wattenberger.com/blog/react-and-d3\n// example : https://sharkcoder.com/data-visualization/d3-react\n// tooltip example : https://observablehq.com/@connor-roche/multi-line-chart-focus-context-w-mouseover-tooltip\n"]},"metadata":{},"sourceType":"module"}