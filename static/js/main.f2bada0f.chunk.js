(this.webpackJsonpswrve=this.webpackJsonpswrve||[]).push([[0],{219:function(e,t,a){},220:function(e,t,a){},228:function(e,t,a){},231:function(e,t,a){"use strict";a.r(t);var n=a(0),d=a.n(n),i=a(39),r=a.n(i),o=(a(219),a(267)),s=a(284),c=(a(220),a(62)),l=a(63),u=a(107),y=a(111),p=a(14),b=a(280),v=a(291),g=a(294),j=a(295),h=a(281),f=a(275),x=a(289),m=a(278),S=a(279),q=a(292),O=a(293),V=a(290),A=a(273),C=a(283),E=a(277),k=function(e,t,a,n){for(var d,i,r=[],o=function(e,t,a,n){var d=1e3;return e||(d=Math.max(0,n-a+2-t)),d}(e,t,a,n),s=a-D[0].year,c=0;c<o;c++)for(var l=0;l<t;l++){var u=e?(d=0,i=D.length-1,d=Math.ceil(d),i=Math.floor(i),Math.floor(Math.random()*(i-d+1))+d):s+c+l;r[c*t+l]=u}return r},D=[{year:1871,cpi:12.46,dividends:.05855856,bonds:.0532,gold:.02656043,equity:.09459459},{year:1872,cpi:12.65,dividends:.05417695,bonds:.0536,gold:-.01940492,equity:.05144033},{year:1873,cpi:12.94,dividends:.05919765,bonds:.0558,gold:.01539138,equity:-.08806262},{year:1874,cpi:12.37,dividends:.07081545,bonds:.0547,gold:.01948896,equity:-.02575107},{year:1875,cpi:11.51,dividends:.07213656,bonds:.0507,gold:-.0526763,equity:-.01762115},{year:1876,cpi:10.85,dividends:.06726457,bonds:.0459,gold:-.0470852,equity:-.20403587},{year:1877,cpi:10.94,dividends:.08191549,bonds:.0445,gold:-.02635294,equity:-.08450704},{year:1878,cpi:9.23,dividends:.05821538,bonds:.0434,gold:-96665e-8,equity:.10153846},{year:1879,cpi:8.28,dividends:.05075419,bonds:.0422,gold:0,equity:.4273743},{year:1880,cpi:9.99,dividends:.04011742,bonds:.0402,gold:0,equity:.21135029},{year:1881,cpi:9.42,dividends:.04281099,bonds:.037,gold:0,equity:-.04361874},{year:1882,cpi:10.18,dividends:.05405405,bonds:.0362,gold:0,equity:-.01858108},{year:1883,cpi:9.99,dividends:.05521515,bonds:.0363,gold:0,equity:-.10843373},{year:1884,cpi:9.23,dividends:.06337838,bonds:.0362,gold:0,equity:-.18146718},{year:1885,cpi:8.28,dividends:.07174528,bonds:.0352,gold:0,equity:.22641509},{year:1886,cpi:7.99,dividends:.04582692,bonds:.0337,gold:0,equity:.07307692},{year:1887,cpi:7.99,dividends:.03987455,bonds:.0352,gold:0,equity:-.0483871},{year:1888,cpi:8.37,dividends:.04676083,bonds:.0367,gold:0,equity:-.01318267},{year:1889,cpi:7.99,dividends:.04374046,bonds:.0345,gold:0,equity:.02671756},{year:1890,cpi:7.61,dividends:.04089219,bonds:.0342,gold:0,equity:-.10037175},{year:1891,cpi:7.8,dividends:.04545455,bonds:.0362,gold:0,equity:.13842975},{year:1892,cpi:7.33,dividends:.04023593,bonds:.036,gold:0,equity:.01814882},{year:1893,cpi:7.9,dividends:.04292335,bonds:.0375,gold:0,equity:-.22994652},{year:1894,cpi:6.85,dividends:.05710648,bonds:.037,gold:0,equity:-.0162037},{year:1895,cpi:6.57,dividends:.04901176,bonds:.0346,gold:0,equity:.00470588},{year:1896,cpi:6.66,dividends:.04430913,bonds:.036,gold:0,equity:-.0117096},{year:1897,cpi:6.47,dividends:.04265403,bonds:.034,gold:0,equity:.1563981},{year:1898,cpi:6.66,dividends:.03723361,bonds:.0335,gold:0,equity:.24590164},{year:1899,cpi:6.76,dividends:.03302632,bonds:.031,gold:0,equity:.00328947},{year:1900,cpi:7.9,dividends:.03565574,bonds:.0315,gold:0,equity:.15901639},{year:1901,cpi:7.71,dividends:.04267327,bonds:.031,gold:0,equity:.14851485},{year:1902,cpi:7.9,dividends:.03950739,bonds:.0318,gold:0,equity:.04187192},{year:1903,cpi:8.66,dividends:.03920804,bonds:.033,gold:0,equity:-.21040189},{year:1904,cpi:8.28,dividends:.0519012,bonds:.034,gold:0,equity:.26197605},{year:1905,cpi:8.47,dividends:.03697509,bonds:.0348,gold:0,equity:.17081851},{year:1906,cpi:8.47,dividends:.03402229,bonds:.0343,gold:0,equity:-.03140831},{year:1907,cpi:8.85,dividends:.04218619,bonds:.0367,gold:0,equity:-.2834728},{year:1908,cpi:8.66,dividends:.06375182,bonds:.0387,gold:0,equity:.32262774},{year:1909,cpi:8.94,dividends:.04451435,bonds:.0376,gold:0,equity:.11258278},{year:1910,cpi:9.9,dividends:.04389881,bonds:.0391,gold:0,equity:-.08035714},{year:1911,cpi:9.23,dividends:.05070119,bonds:.0398,gold:0,equity:-.01618123},{year:1912,cpi:9.13,dividends:.05162281,bonds:.0401,gold:0,equity:.01973684},{year:1913,cpi:9.8,dividends:.0516129,bonds:.0445,gold:0,equity:-.1},{year:1914,cpi:10,dividends:.0567503,bonds:.0416,gold:0,equity:-.10633214},{year:1915,cpi:10.1,dividends:.05625668,bonds:.0424,gold:0,equity:.2473262},{year:1916,cpi:10.4,dividends:.04724544,bonds:.0405,gold:0,equity:.02572347},{year:1917,cpi:11.7,dividends:.05964472,bonds:.0423,gold:0,equity:-.24660397},{year:1918,cpi:14,dividends:.09431345,bonds:.0457,gold:0,equity:.0887656},{year:1919,cpi:16.5,dividends:.07219108,bonds:.045,gold:0,equity:.12484076},{year:1920,cpi:19.3,dividends:.05983012,bonds:.0497,gold:0,equity:-.19479049},{year:1921,cpi:19,dividends:.07113924,bonds:.0509,gold:0,equity:.02672293},{year:1922,cpi:16.9,dividends:.06358904,bonds:.043,gold:0,equity:.21917808},{year:1923,cpi:16.8,dividends:.05749438,bonds:.0436,gold:0,equity:-.00786517},{year:1924,cpi:17.3,dividends:.06021518,bonds:.0406,gold:0,equity:.198188},{year:1925,cpi:17.3,dividends:.05238185,bonds:.0386,gold:0,equity:.19565217},{year:1926,cpi:17.9,dividends:.04802372,bonds:.0368,gold:0,equity:.05928854},{year:1927,cpi:17.5,dividends:.05199254,bonds:.0334,gold:0,equity:.30820896},{year:1928,cpi:17.3,dividends:.0443069,bonds:.0333,gold:0,equity:.41814033},{year:1929,cpi:17.1,dividends:.03459372,bonds:.036,gold:0,equity:-.12670957},{year:1930,cpi:17.1,dividends:.04471672,bonds:.0329,gold:0,equity:-.26393367},{year:1931,cpi:15.9,dividends:.06049437,bonds:.0334,gold:0,equity:-.48060075},{year:1932,cpi:14.3,dividends:.09557831,bonds:.0368,gold:.56361877,equity:-.14578313},{year:1933,cpi:12.9,dividends:.06981664,bonds:.0331,gold:.08292079,equity:.48660085},{year:1934,cpi:13.2,dividends:.04182163,bonds:.0312,gold:0,equity:-.12144213},{year:1935,cpi:13.6,dividends:.04859611,bonds:.0279,gold:0,equity:.48596112},{year:1936,cpi:13.8,dividends:.03488372,bonds:.0265,gold:0,equity:.27834302},{year:1937,cpi:14.1,dividends:.04150085,bonds:.0268,gold:0,equity:-.35702103},{year:1938,cpi:14.2,dividends:.07014439,bonds:.0256,gold:0,equity:.10521662},{year:1939,cpi:14,dividends:.04106664,bonds:.0236,gold:-.01428571,equity:-.016},{year:1940,cpi:13.9,dividends:.05067748,bonds:.0221,gold:.02898551,equity:-.14227642},{year:1941,cpi:14.1,dividends:.06382303,bonds:.0195,gold:0,equity:-.1535545},{year:1942,cpi:15.7,dividends:.07876069,bonds:.0246,gold:.02816901,equity:.12989922},{year:1943,cpi:16.9,dividends:.05847374,bonds:.0247,gold:-.00684932,equity:.17443013},{year:1944,cpi:17.4,dividends:.05175806,bonds:.0248,gold:.02758621,equity:.13839662},{year:1945,cpi:17.8,dividends:.04768962,bonds:.0237,gold:.02684564,equity:.3358043},{year:1946,cpi:18.2,dividends:.03699595,bonds:.0219,gold:.12418301,equity:-.15593785},{year:1947,cpi:21.5,dividends:.04689895,bonds:.0225,gold:-.02325581,equity:-.02498356},{year:1948,cpi:23.7,dividends:.05686669,bonds:.0244,gold:-.03571429,equity:.03573837},{year:1949,cpi:24,dividends:.06163197,bonds:.0231,gold:-.00617284,equity:.09895833},{year:1950,cpi:23.5,dividends:.06812796,bonds:.0232,gold:-.00621118,equity:.25651659},{year:1951,cpi:25.4,dividends:.07009288,bonds:.0257,gold:-.0325,equity:.14049976},{year:1952,cpi:26.5,dividends:.05842621,bonds:.0268,gold:-.08268734,equity:.0822654},{year:1953,cpi:26.6,dividends:.05385791,bonds:.0283,gold:-.00704225,equity:-.02750191},{year:1954,cpi:26.9,dividends:.05721406,bonds:.0248,gold:-.00283688,equity:.3982718},{year:1955,cpi:26.7,dividends:.04344579,bonds:.0261,gold:.00142248,equity:.24016854},{year:1956,cpi:26.8,dividends:.03782559,bonds:.029,gold:.00142046,equity:.02899207},{year:1957,cpi:27.6,dividends:.03822738,bonds:.0346,gold:0,equity:-.09487123},{year:1958,cpi:28.6,dividends:.04336892,bonds:.0309,gold:0,equity:.35262646},{year:1959,cpi:29,dividends:.03158342,bonds:.0402,gold:.03546099,equity:.04332974},{year:1960,cpi:29.3,dividends:.03216733,bonds:.0472,gold:-.02739726,equity:.02912287},{year:1961,cpi:29.8,dividends:.03259662,bonds:.0384,gold:-.00422535,equity:.15656397},{year:1962,cpi:30,dividends:.02934226,bonds:.0408,gold:-.00282885,equity:-.05805704},{year:1963,cpi:30.4,dividends:.03284153,bonds:.0383,gold:.00283688,equity:.17506917},{year:1964,cpi:30.9,dividends:.03004147,bonds:.0417,gold:.00424328,equity:.1264879},{year:1965,cpi:31.2,dividends:.02922283,bonds:.0419,gold:-.0028169,equity:.08360427},{year:1966,cpi:31.8,dividends:.02936134,bonds:.0461,gold:.00282486,equity:-.09504929},{year:1967,cpi:32.9,dividends:.03410302,bonds:.0458,gold:.22535211,equity:.12539964},{year:1968,cpi:34.1,dividends:.03082912,bonds:.0553,gold:-.05747126,equity:.07323232},{year:1969,cpi:35.6,dividends:.03019608,bonds:.0604,gold:-.05121951,equity:-.11460784},{year:1970,cpi:37.8,dividends:.03502746,bonds:.0779,gold:.14652956,equity:.03521205},{year:1971,cpi:39.8,dividends:.03347952,bonds:.0624,gold:.43139014,equity:.10493101},{year:1972,cpi:41.1,dividends:.02971926,bonds:.0595,gold:.6679198,equity:.14617619},{year:1973,cpi:42.6,dividends:.02666106,bonds:.0646,gold:.72586401,equity:-.18826014},{year:1974,cpi:46.6,dividends:.03537613,bonds:.0699,gold:-.24204168,equity:-.24503173},{year:1975,cpi:52.1,dividends:.04993564,bonds:.075,gold:-.03962955,equity:.33489526},{year:1976,cpi:55.6,dividends:.03802736,bonds:.0774,gold:.2043059,equity:.0716498},{year:1977,cpi:58.5,dividends:.03946696,bonds:.0721,gold:.29174426,equity:-.1305395},{year:1978,cpi:62.5,dividends:.05222526,bonds:.0796,gold:.99999999,equity:.10481994},{year:1979,cpi:68.3,dividends:.05128202,bonds:.091,gold:.29607843,equity:.11222545},{year:1980,cpi:77.8,dividends:.05139766,bonds:.108,gold:-.32761809,equity:.19927863},{year:1981,cpi:87,dividends:.04661654,bonds:.1257,gold:.1175,equity:-.11804511},{year:1982,cpi:94.3,dividends:.05677749,bonds:.1459,gold:-.14988814,equity:.23017903},{year:1983,cpi:97.8,dividends:.04770152,bonds:.1046,gold:-.18947368,equity:.15315315},{year:1984,cpi:101.9,dividends:.04278846,bonds:.1167,gold:.06168831,equity:.03125},{year:1985,cpi:105.5,dividends:.04413362,bonds:.1138,gold:.19541284,equity:.21328671},{year:1986,cpi:109.6,dividends:.03813641,bonds:.0919,gold:.24456383,equity:.27041306},{year:1987,cpi:111.2,dividends:.03137996,bonds:.0708,gold:-.15693731,equity:-.05293006},{year:1988,cpi:115.7,dividends:.03535597,bonds:.0867,gold:-.02230891,equity:.13932136},{year:1989,cpi:121.1,dividends:.03438448,bonds:.0909,gold:-.03690773,equity:.19120533},{year:1990,cpi:127.4,dividends:.0327676,bonds:.0821,gold:-.08557742,equity:-.04259199},{year:1991,cpi:134.6,dividends:.03719531,bonds:.0809,gold:-.05705791,equity:.27831884},{year:1992,cpi:138.1,dividends:.02941742,bonds:.0703,gold:.17642643,equity:.0460248},{year:1993,cpi:142.6,dividends:.02852124,bonds:.066,gold:-.02169751,equity:.08675873},{year:1994,cpi:146.2,dividends:.0266883,bonds:.0575,gold:.00978474,equity:-.01636398},{year:1995,cpi:150.3,dividends:.02832886,bonds:.0778,gold:-.04651163,equity:.32062332},{year:1996,cpi:154.4,dividends:.02261206,bonds:.0565,gold:-.22208672,equity:.24706227},{year:1997,cpi:159.1,dividends:.01951567,bonds:.0658,gold:.00574813,equity:.25728903},{year:1998,cpi:161.6,dividends:.01614142,bonds:.0554,gold:.0053689,equity:.29626516},{year:1999,cpi:164.3,dividends:.0130395,bonds:.0472,gold:-.06063738,equity:.14159533},{year:2e3,cpi:168.8,dividends:.0116256,bonds:.0666,gold:.01412067,equity:-.0631037},{year:2001,cpi:175.1,dividends:.01210665,bonds:.0516,gold:.23960217,equity:-.14631298},{year:2002,cpi:177.1,dividends:.01380155,bonds:.0504,gold:.21735959,equity:-.21432017},{year:2003,cpi:181.7,dividends:.01799428,bonds:.0405,gold:.04397843,equity:.26419896},{year:2004,cpi:185.2,dividends:.01554056,bonds:.0415,gold:.17768595,equity:.04316922},{year:2005,cpi:190.7,dividends:.01667781,bonds:.0422,gold:.23918129,equity:.08237614},{year:2006,cpi:198.3,dividends:.0175252,bonds:.0442,gold:.31587227,equity:.11373003},{year:2007,cpi:202.416,dividends:.01761272,bonds:.0476,gold:.03974895,equity:-.03187844},{year:2008,cpi:211.08,dividends:.02025008,bonds:.0374,gold:.2503593,equity:-.37220401},{year:2009,cpi:211.143,dividends:.0323598,bonds:.0252,gold:.30597701,equity:.29806604},{year:2010,cpi:216.687,dividends:.01979684,bonds:.0373,gold:.07797923,equity:.14154755},{year:2011,cpi:220.223,dividends:.01790346,bonds:.0339,gold:.08687133,equity:.01400259},{year:2012,cpi:226.665,dividends:.02055749,bonds:.0197,gold:-.27614183,equity:.13826139},{year:2013,cpi:230.28,dividends:.0213028,bonds:.0191,gold:-.00435866,equity:.22114293},{year:2014,cpi:233.916,dividends:.01942536,bonds:.0286,gold:-.11611424,equity:.1369433},{year:2015,cpi:233.707,dividends:.019671167,bonds:.0188,gold:.1799434,equity:-.054028735229542},{year:2016,cpi:236.916,dividends:.02270058,bonds:.0209,gold:.00510098,equity:.18582299661672},{year:2017,cpi:242.839,dividends:.020186481,bonds:.0243,gold:.00904448,equity:.226221034357374},{year:2018,cpi:247.867,dividends:.017666738,bonds:.0258,gold:.09784074,equity:-.065384615734383},{year:2019,cpi:251.712,dividends:.020766616,bonds:.0271,gold:0,equity:.257273694016446},{year:2020,cpi:257.971,dividends:.0179,bonds:.0176,gold:0,equity:.157265},{year:2021,cpi:261.58,dividends:.0153,bonds:.0108,gold:0,equity:.2056}],I="DarkKhaki",w=[0,.75,1.25,3,100],P=20,z=65,R=40,Y=65,N="translate("+Y+","+P+")",B=function(e){var t="."+e;p.q(t).remove()},F=function(e){var t=I;return 0>=e?t="Red":e<.75?t="Orange":e>=1.25&&(t=e>=w[w.length-2]?"ForestGreen":"LimeGreen"),t},M=function(e){var t="#"+e;return p.p(t)},T=function(e){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},L=function(e){return Number(100*e).toFixed(2)+"%"},_=a(11),$=a(285),Z=a(287),G=a(288),H=a(1);var J=function(e){return n.useEffect((function(){}),[e]),Object(H.jsx)("div",{children:Object(H.jsxs)(o.a,{direction:"row",children:[Object(H.jsx)($.a,{children:Object(H.jsxs)(Z.a,{children:[Object(H.jsx)(G.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Summary Results"}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(1-e.fails/e.cycles)," success (",e.cycles-e.fails," / ",e.cycles," cycles)"]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(e.numgreaterthanstart/e.cycles)," of cycles ended w/ more $$ than started"]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(e.netpositivepct)," of years w/ higher appreciation than spend (all cycles)"]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["Minimum failure age : ",Number.POSITIVE_INFINITY===e.minfailage?"n/a":e.minfailage]})]})}),Object(H.jsx)($.a,{children:Object(H.jsxs)(Z.a,{children:[Object(H.jsx)(G.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Inflation Adjusted End Value ($)"}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",T(e.avgendvalue)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",T(e.maxendvalue)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["25% : ",T(e.quantile25endvalue)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["50% : ",T(e.quantile50endvalue)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["75% : ",T(e.quantile75endvalue)]})]})}),Object(H.jsx)($.a,{children:Object(H.jsxs)(Z.a,{children:[Object(H.jsx)(G.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Combined Returns (%)"}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["median : ",L(e.medianreturns)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",L(e.avgreturns)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["min: ",L(e.minreturns)]}),Object(H.jsxs)(G.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",L(e.maxreturns)]})]})})]})})};var U=function(e){var t="endvaluechartsvg",a="perrundata"+t,d="ttbinselectwrap",i=10,r=960-Y-z,o=200-i-0,s="translate("+Y+","+i+")",c=function(t){var a=t.srcElement.__data__,n=null,d=null,i=null,r=null;if(e.selectedbin!==a.x0){var o=a.x0/e.startvalue,s=function(e){for(var t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],a=0;a<e.length;a++){var n=p.f(e[a].cycleData,(function(e){return e.adjEndValue}));t[0]=Math.min(t[0],n[0]),t[1]=Math.max(t[1],n[1])}return t}(a);n=F(o),d=s[0],i=s[1],r=a.x0}e.zoomcallback(d,i,n,r)};return n.useEffect((function(){var n=function(){var t=w,a=[];a[0]=0,a[1]=.01;for(var n=1;n<t.length;n++)a[n+1]=t[n]*e.startvalue;return a},i=function(){var e=n(),t=function(e){for(var t=e.length,a=[],n=r/(t+1),d=0;d<=e.length;d++)a[d]=d*n;return a}(e);return p.o().domain(e).range(t)},l=M(t).append("g").attr("transform",s).append("g");B(a),function(t){var r=n(),l=function(t){return p.c().value((function(e){return e.adjEndCycleValue})).domain([t[0],t[t.length-1]]).thresholds(t)(e.metadata)}(r),u=i(),y=p.n().domain([0,p.i(l,(function(e){return e.length}))]).range([o,0]);t.append("g").attr("class",a).attr("transform","translate(0,"+o+")").call(p.a(u).tickFormat("").tickSize(20)),t.append("g").attr("class",a).call(p.b(y).tickFormat("").tickSizeOuter(10)),t.append("g").attr("class",a).attr("id","pathgroupid").selectAll(".histobarclass").data(l).enter().append("rect").attr("class",a).attr("x",1).attr("transform",(function(e){return"translate("+u(e.x0)+","+y(e.length)+")"})).attr("width",(function(e){return u(e.x1)-u(e.x0)-1})).attr("height",(function(e){return o-y(e.length)})).style("fill",(function(t){return F(t.x0/e.startvalue)})).style("opacity",(function(t){return function(t){var a=1;return null!==e.selectedbin&&t!==e.selectedbin&&(a=.2),a}(t.x0)})).on("click",c),function(t,n,i){for(var r,s=e.metadata.length,c=0;c<n.length;c++)if(0!==n[c].length){var l={binData:r=n[c],extBin:p.f(r,(function(e){return e.adjEndCycleValue})),extPctStartValue:p.f(r,(function(e){return e.pctOfStart})),binCount:r.length},u=(i(n[c].x1)-i(n[c].x0))/2+i(n[c].x0),y=o-45,b=t.append("g").attr("id",d).attr("class",a).append("text").attr("y",y).style("font-size","12px").attr("font-weight","bold").attr("text-anchor","middle").attr("pointer-events","none");b.append("tspan").text(L(n[c].length/s)).attr("x",u).attr("dy","0px").attr("pointer-events","none"),b.append("tspan").text(T(l.extBin[0])).attr("x",u).attr("dy","15px").attr("pointer-events","none"),l.extBin[1]!==l.extBin[0]&&b.append("tspan").text("-"+T(l.extBin[1])).attr("x",u).attr("dy","15px").attr("pointer-events","none")}}(t,l,u),function(e){e.append("g").attr("id",d).attr("class",a).append("g").append("text").text("select a bar to zoom to results").attr("transform",s).attr("pointer-events","none").attr("font-weight","bold")}(t)}(l)}),[e.metadata,e.startvalue,e.selectedbin,e.zoomcolor]),Object(H.jsx)("div",{children:Object(H.jsx)("svg",{id:t,width:960,height:200})})};a(228);var W=function(e){var t=Object(n.useState)(0),a=Object(_.a)(t,2),d=a[0],i=a[1],r=Object(n.useState)(0),o=Object(_.a)(r,2),s=o[0],c=o[1],l=Object(n.useState)(0),u=Object(_.a)(l,2),y=u[0],b=u[1],v=Object(n.useState)(0),g=Object(_.a)(v,2),j=g[0],h=g[1],f=Object(n.useState)(0),x=Object(_.a)(f,2),m=x[0],S=x[1],q=Object(n.useState)(0),O=Object(_.a)(q,2),V=O[0],A=O[1],C=Object(n.useState)(0),E=Object(_.a)(C,2),k=E[0],D=E[1],I=Object(n.useState)(0),w=Object(_.a)(I,2),F=w[0],L=w[1],$=Object(n.useState)(0),Z=Object(_.a)($,2),G=Z[0],W=Z[1],K=Object(n.useState)(0),Q=Object(_.a)(K,2),X=Q[0],ee=Q[1],te=Object(n.useState)(0),ae=Object(_.a)(te,2),ne=ae[0],de=ae[1],ie=Object(n.useState)(0),re=Object(_.a)(ie,2),oe=re[0],se=re[1],ce=Object(n.useState)(0),le=Object(_.a)(ce,2),ue=le[0],ye=le[1],pe="d3cycletarget",be="perrundatad3cycletarget",ve="hoverLine",ge="ttwrapper",je="ttbackground",he="ttage",fe="ttvalue",xe=960-Y-z,me=400-P-R,Se=function(){var t=[e.currentage,e.lifeexpectancy];return p.n().domain(t).range([0,xe])},qe=function(){var t=[+e.portmin,+e.portmax];return null!==e.minzoom&&null!==e.maxzoom&&(t[0]=+e.minzoom,t[1]=+e.maxzoom),t},Oe=function(e,t){var a=[e,t];return p.n().domain(a).range([me,0])},Ve=function(){return M(ve)},Ae=function(){return M(ge)},Ce=function(e){Ve().style("opacity",1),Ae().attr("display",null),p.p(e.currentTarget).attr("stroke-width",5)},Ee=function(t){var a=p.d((function(e){return e.age})).left,n=Se(),d=qe(),i=Oe(d[0],d[1]),r=p.l(t),o=n.invert(r[0]),s=i.invert(r[1]),c=e.cycledata[0],l=c[a(c,o,1)],u=n(l.age),y=u;xe<=u+75&&(y=u-75),M(he).text("age: "+l.age),M(fe).text(T(s));var b=Ae().node().getBBox();M(je).attr("width",b.width).attr("height",b.height),Ae().attr("transform","translate("+y+","+r[1]+")"),Ve().attr("x",u),Ae().attr("x",y)},ke=function(e){Ve().style("opacity",0),Ae().attr("display","none"),p.p(e.currentTarget).attr("stroke-width",1.5)};return n.useEffect((function(){var t=function(t,a,n,d,i){var r=be+" portfolioline "+d.lineColor,o=1,s=Ce,c=Ee,l=ke;null!=e.zoomcolor&&e.zoomcolor!==d.lineColor&&(o=.2,s=null,c=null,l=null),t.append("path").datum(i).attr("id",d.startYear).attr("class",r).attr("fill","none").style("opacity",o).attr("stroke",d.lineColor).attr("stroke-width",1.5).on("mouseenter",s).on("mouseover",c).on("mouseleave",l).attr("d",p.h().x((function(e){return a(e.age)})).y((function(e){return n(e.adjEndValue)})))},a=M(pe).append("g").attr("transform",N),n=a.append("g"),d=a.append("g");B(be),function(){for(var t=e.cycledata,a=e.cyclemeta,n=p.f(a,(function(e){return e.adjEndCycleValue})),d=p.j(a,(function(e){return e.adjEndCycleValue})),r=p.m(a,.25,(function(e){return e.adjEndCycleValue})),o=p.m(a,.5,(function(e){return e.adjEndCycleValue})),s=p.m(a,.75,(function(e){return e.adjEndCycleValue})),l=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var d=e[a][n];t.push(d.aggReturn)}return t}(t),u=p.j(l),y=p.k(l),v=p.f(l),g=function(e){for(var t=0,a=0;a<e.length;a++)0<e[a]&&t++;return t/e.length}(function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var d=e[a][n];t.push(d.netDelta)}return t}(t)),j=0,f=0,x=Number.POSITIVE_INFINITY,m=[],q=0;q<a.length;q++)1<a[q].pctOfStart?j++:a[q].fail&&(x=Math.min(a[q].failAge,x),m[f]=a[q].failAge,f++);i(d),c(n[1]),b(r),h(o),S(s),A(u),D(y),L(v[0]),W(v[1]),ee(g),se(f),de(j),ye(x)}(),function(a){var n=Se(),d=qe(),i=Oe(d[0],d[1]),r=e.cycledata,o=e.cyclemeta,s=+e.numcycles;!function(e,t,a){e.append("g").attr("class",be).attr("transform","translate(0,"+me+")").call(p.a(t)),e.append("g").attr("class",be).call(p.b(a).tickFormat(p.g("$,")))}(a,n,i);for(var c=0;c<s;c++)t(a,n,i,o[c],r[c]);!function(t,a){t.append("rect").attr("class",be).style("stroke-dasharray","10, 5").attr("fill","none").attr("stroke","black").attr("stroke-width",1.5).attr("x",0).attr("y",a(e.portfoliovalue)).attr("width",xe).attr("height",.25)}(a,i)}(n),function(e){var t=be+" tooltip",a=e.append("g").attr("id",ge).attr("class",t).attr("display","none");a.append("rect").style("opacity",.7).attr("id",je).attr("class",t).attr("width",75).attr("height",50).attr("pointer-events","none").attr("fill","#e8e8e8");var n=a.append("g").append("text");n.attr("class",t).attr("pointer-events","none").attr("font-weight","bolder").attr("text-anchor","left"),n.append("tspan").attr("id",he).attr("class",t).attr("pointer-events","none").attr("x","5").attr("y","5").attr("dy","15px"),n.append("tspan").attr("id",fe).attr("class",t).attr("pointer-events","none").attr("x","5").attr("y","5").attr("dy","35px"),e.append("g").append("rect").style("opacity",0).attr("id",ve).attr("class",t).attr("pointer-events","none").attr("class","dotted").attr("stroke-width","1px").attr("width",".5px").attr("height",me)}(d)}),[e.portfoliovalue,e.portmin,e.portmax,e.cycledata,e.cyclemeta,e.numcycles,e.currentage,e.lifeexpectancy,e.minzoom,e.maxzoom,e.zoomcolor,e.selectedbin]),Object(H.jsxs)("div",{children:[Object(H.jsx)(J,{fails:oe,cycles:e.numcycles,numgreaterthanstart:ne,minfailage:ue,avgendvalue:d,quantile25endvalue:y,quantile50endvalue:j,quantile75endvalue:m,maxendvalue:s,medianreturns:k,avgreturns:V,minreturns:F,maxreturns:G,netpositivepct:X}),Object(H.jsx)("svg",{id:pe,width:960,height:400}),Object(H.jsx)(U,{startvalue:e.portfoliovalue,metadata:e.cyclemeta,cyclechartid:pe,zoomcallback:e.zoomcallback,zoomcolor:e.zoomcolor,selectedbin:e.selectedbin})]})},K=125e4,Q=D[0].year,X=D[D.length-1].year,ee="montecarlo",te="historical",ae=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentAgeState:62,lifeExpectancyState:95,portfolioValueState:K,spendValueState:5e4,spendModelState:"dollars",stockAllocPctState:80,feePctState:.18,monteCarloProjectionState:false,ssOnState:!1,socialSecurityIncomeState:39312,socialSecurityAgeState:67,useAllHistDataState:!0,startDataYearState:Q,endDataYearState:X,minZoomValueState:null,maxZoomValueState:null,zoomColorState:null,selectedBinState:null,sourceDataState:null},n}return Object(l.a)(a,[{key:"zoomChart",value:function(e,t,a,n){this.setState({minZoomValueState:e}),this.setState({maxZoomValueState:t}),this.setState({zoomColorState:a}),this.setState({selectedBinState:n})}},{key:"render",value:function(){var e=this,t=this.state.portfolioValueState,a=this.state.portfolioValueState,n=[],d=[],i=function(t){var a=e.state.socialSecurityAgeState,n=e.state.ssOnState?e.state.socialSecurityIncomeState:0;t.spend=e.state.spendValueState,t.actualSpend=t.spend*t.cumulativeCPI;var d=a<=t.age?n*t.cumulativeCPI:0;t.actualSpend-=d,t.endValue=t.beginValue-t.actualSpend},r=function(t,a,n){var d=e.state.stockAllocPctState/100,i=(100-e.state.stockAllocPctState)/100,r=t.endValue*d;t.equityAppr=r*t.equityReturn,t.divAppr=r*D[n[a]].dividends,t.bondAppr=function(e,t,a){var n=0,d=a[t],i=d+1;if(D.length<=i)n=e*D[d].bonds;else{var r=(1-Math.pow(1+D[i].bonds,-9))*D[d].bonds;r/=D[i].bonds;var o=1/Math.pow(1+D[i].bonds,9);n=e*(r+(o-=1)+D[d].bonds)}return n}(t.endValue*i,a,n),t.bondReturn=t.bondAppr/(t.beginValue*i),t.aggReturn=function(e,t,a){var n=e.equityReturn*t+e.bondReturn*a;return isNaN(n)&&(1===t?n=e.equityReturn:1===a?n=e.bondReturn:(n=0,console.log("unexpected aggReturn result- equity :("+L(e.equityReturn)+","+L(t)+")  bond:("+L(e.bondReturn)+","+L(a)+")"))),n}(t,d,i),t.appr=t.equityAppr+t.divAppr+t.bondAppr,t.endValue+=t.appr,t.adjAppr=t.appr/t.cumulativeCPI},s=function(t){var a=e.state.feePctState/100;t.fees=(t.beginValue+t.appr)*a,t.endValue-=t.fees},c=function(e){e.adjEndValue=e.endValue/e.cumulativeCPI},l=function(t,a,n,d){var i=1;if(e.state.monteCarloProjectionState){var r=0<n?n-1:n;i=d+(D[n].cpi/D[r].cpi-1)}else i=a/t;return i},u=function(t,a,n){for(var d,o=[],u=D[n[t]].cpi,y=1,p=0;p<a;p++){var b=n[t+p],v=D[b],g={year:v.year,age:e.state.currentAgeState+p,beginValue:p>0?o[p-1].endValue:e.state.portfolioValueState,equityReturn:v.equity,cumulativeCPI:l(u,v.cpi,b,y),spend:0,endValue:0,equityAppr:0,divAppr:0,bondReturn:0,bondAppr:0,aggReturn:0,actualSpend:0,fees:0,netDelta:0,adjEndValue:0,appr:0,adjAppr:0};if(y=g.cumulativeCPI,i(g),0>=g.endValue){g.endValue=g.adjEndValue=0,o.push(g);break}r(g,t+p,n),s(g),(d=g).netDelta=d.appr-d.actualSpend-d.fees,c(g),o.push(g)}return o},y=function(t){var a=p.f(t,(function(e){return e.adjEndValue})),n=p.j(t,(function(e){return e.adjEndValue})),d=p.k(t,(function(e){return e.adjEndValue})),i=p.r(t,(function(e){return e.actualSpend})),r=p.r(t,(function(e){return e.appr})),o=p.r(t,(function(e){return e.adjAppr})),s=t[t.length-1].adjEndValue/e.state.portfolioValueState,c=F(s),l=p.f(t,(function(e){return e.aggReturn})),u=p.j(t,(function(e){return e.aggReturn})),y=p.k(t,(function(e){return e.aggReturn}));return{startCycleValue:e.state.portfolioValueState,endCycleValue:t[t.length-1].endValue,adjEndCycleValue:t[t.length-1].adjEndValue,extent:a,mean:n,median:d,pctOfStart:s,totalSpend:i,totalAppreciation:r,totalAdjAppreciation:o,extAggReturn:l,avgAggReturn:u,medAggReturn:y,fail:0>=t[t.length-1].adjEndValue,failAge:0>=t[t.length-1].adjEndValue?t[t.length-1].age:void 0,startYear:t[0].year,cycleData:t,lineColor:c}},I=this.state.sourceDataState;return null==I&&(I=k(this.state.monteCarloProjectionState,this.state.lifeExpectancyState-this.state.currentAgeState+1,this.state.startDataYearState,this.state.endDataYearState),this.setState({sourceDataState:I})),function(i){for(var r=e.state.lifeExpectancyState-e.state.currentAgeState+1,o=i.length/r,s=0;s<o;s++){var c=u(s*r,r,i),l=y(c);d[s]=l,n[s]=c,t=Math.min(t,l.extent[0]),a=Math.max(a,l.extent[1])}}(I),Object(H.jsx)("div",{children:Object(H.jsxs)(o.a,{direction:"row",children:[Object(H.jsx)("div",{className:"Inputs",children:Object(H.jsx)("header",{className:"Inputs-header",children:Object(H.jsx)(j.a,{sx:{bgcolor:"background.paper",boxShadow:10,borderRadius:10,p:2,minWidth:300},children:Object(H.jsxs)(x.a,{children:[Object(H.jsx)(m.a,{children:Object(H.jsx)(f.a,{required:!0,label:"Age",sx:{m:"10px"},type:"number",defaultValue:62,onChange:function(t){var a=+t.target.value,n=k(e.state.monteCarloProjectionState,e.state.lifeExpectancyState-a+1,e.state.startDataYearState,e.state.endDataYearState);e.setState({sourceDataState:n}),e.setState({currentAgeState:a})},InputLabelProps:{shrink:!0}})}),Object(H.jsxs)(m.a,{children:[Object(H.jsx)("div",{children:"Life Expectancy: "}),Object(H.jsx)("div",{id:"lifeExpectDiv",children:this.state.lifeExpectancyState})]}),Object(H.jsx)(m.a,{divider:!0,children:Object(H.jsx)(S.a,{id:"lifeExpectSlider",size:"small",label:"Life Expectancy",marks:!0,step:1,min:62,max:110,valueLabelDisplay:"auto",defaultValue:95,onChange:function(t,a){var n=k(e.state.monteCarloProjectionState,a-e.state.currentAgeState+1,e.state.startDataYearState,e.state.endDataYearState);e.setState({sourceDataState:n}),e.setState({lifeExpectancyState:a})}})}),Object(H.jsx)(m.a,{children:Object(H.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Portfolio Value $",defaultValue:K,onChange:function(t){var a=+t.target.value;e.setState({portfolioValueState:a})}})}),Object(H.jsx)(m.a,{divider:!0,children:Object(H.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Spend $",defaultValue:5e4,onChange:function(t){var a=+t.target.value;e.setState({spendValueState:a})}})}),Object(H.jsxs)(m.a,{children:[Object(H.jsx)("div",{children:"Stocks: "}),Object(H.jsxs)("div",{id:"sAlloc",children:[this.state.stockAllocPctState,"%"]}),Object(H.jsx)("div",{children:"\xa0 Bonds: "}),Object(H.jsxs)("div",{id:"bAlloc",children:[100-this.state.stockAllocPctState,"%"]})]}),Object(H.jsx)(m.a,{children:Object(H.jsx)(S.a,{id:"aAlloc",label:"Stock Allocation",marks:!0,step:5,valueLabelDisplay:"auto",defaultValue:80,onChange:function(t){var a=+t.target.value;e.setState({stockAllocPctState:a})}})}),Object(H.jsx)(m.a,{divider:!0,children:Object(H.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Fee %",defaultValue:.18,onChange:function(t){var a=+t.target.value;e.setState({feePctState:a})}})}),Object(H.jsx)(m.a,{children:Object(H.jsxs)(b.a,{children:[Object(H.jsx)(v.a,{children:Object(H.jsx)(V.a,{children:Object(H.jsxs)(C.a,{"aria-labelledby":"projectionTypeID",defaultValue:te,name:"radio-buttons-group",row:!0,onChange:function(t,a){var n=ee===a,d=k(n,e.state.lifeExpectancyState-e.state.currentAgeState+1,e.state.startDataYearState,e.state.endDataYearState);e.setState({sourceDataState:d}),e.setState({monteCarloProjectionState:n})},children:[Object(H.jsx)(O.a,{value:te,control:Object(H.jsx)(E.a,{}),label:"historical"}),Object(H.jsx)(O.a,{value:ee,control:Object(H.jsx)(E.a,{}),label:"monte carlo"})]})})}),Object(H.jsxs)(g.a,{children:[Object(H.jsxs)("div",{disabled:this.state.monteCarloProjectionState,children:["Historical data from ",this.state.startDataYearState," to ",this.state.endDataYearState]}),Object(H.jsx)(S.a,{disabled:this.state.monteCarloProjectionState,marks:!0,step:1,min:Q,max:X,defaultValue:[Q,X],value:[this.state.startDataYearState,this.state.endDataYearState],valueLabelDisplay:"auto",onChange:function(t,a){var n=e.state.lifeExpectancyState-e.state.currentAgeState+1;if(a[1]-a[0]>=n){var d=k(e.state.monteCarloProjectionState,n,a[0],a[1]);e.setState({sourceDataState:d}),e.setState({startDataYearState:a[0]}),e.setState({endDataYearState:a[1]})}else console.log("bzzt - range smaller than user lifetime")}})]})]})}),Object(H.jsx)(m.a,{children:Object(H.jsxs)(b.a,{children:[Object(H.jsx)(v.a,{children:Object(H.jsx)(q.a,{children:Object(H.jsx)(O.a,{control:Object(H.jsx)(h.a,{}),label:"include Social Security income",onChange:function(t,a){e.setState({ssOnState:a})}})})}),Object(H.jsxs)(g.a,{children:[Object(H.jsx)(f.a,{disabled:!this.state.ssOnState,sx:{m:"10px"},type:"number",label:"Annual SS $",defaultValue:39312,onChange:function(t){var a=+t.target.value;e.setState({socialSecurityIncomeState:a})}}),Object(H.jsxs)(V.a,{disabled:!this.state.ssOnState,component:"fieldset",children:[Object(H.jsx)(A.a,{component:"legend",children:"Start at age"}),Object(H.jsxs)(C.a,{"aria-label":"ss-start",onChange:function(t){var a=+t.target.value;e.setState({socialSecurityAgeState:a})},row:!0,defaultValue:"67",name:"radio-buttons-group",children:[Object(H.jsx)(O.a,{value:"62",control:Object(H.jsx)(E.a,{}),label:"62"}),Object(H.jsx)(O.a,{value:"67",control:Object(H.jsx)(E.a,{}),label:"67"}),Object(H.jsx)(O.a,{value:"70",control:Object(H.jsx)(E.a,{}),label:"70"})]})]})]})]})})]})})})}),Object(H.jsx)(W,{id:"chartComponent",portfoliovalue:this.state.portfolioValueState,portmin:t,portmax:a,cycledata:n,cyclemeta:d,numcycles:null!=this.state.sourceDataState?this.state.sourceDataState.length/(this.state.lifeExpectancyState-this.state.currentAgeState+1):0,currentage:this.state.currentAgeState,lifeexpectancy:this.state.lifeExpectancyState,minzoom:this.state.minZoomValueState,maxzoom:this.state.maxZoomValueState,zoomcolor:this.state.zoomColorState,zoomcallback:this.zoomChart.bind(this),selectedbin:this.state.selectedBinState})]})})}}]),a}(n.Component);var ne=function(){return Object(H.jsxs)(o.a,{spacing:5,children:[Object(H.jsx)(s.a,{children:" SWR Calculator"}),Object(H.jsx)(o.a,{direction:"row",children:Object(H.jsx)(ae,{})})]})},de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,297)).then((function(t){var a=t.getCLS,n=t.getFID,d=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),d(e),i(e),r(e)}))};r.a.render(Object(H.jsx)(d.a.StrictMode,{children:Object(H.jsx)(ne,{})}),document.getElementById("root")),de()}},[[231,1,2]]]);
//# sourceMappingURL=main.f2bada0f.chunk.js.map