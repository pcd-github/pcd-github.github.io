(this.webpackJsonpswrve=this.webpackJsonpswrve||[]).push([[0],{220:function(e,t,n){},221:function(e,t,n){},229:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var d=n(0),i=n.n(d),a=n(39),o=n.n(a),r=(n(220),n(268)),s=n(285),c=(n(221),n(62)),l=n(63),u=n(108),y=n(112),p=n(14),b=n(281),v=n(292),g=n(295),j=n(296),h=n(282),f=n(276),m=n(290),x=n(279),q=n(280),S=n(293),O=n(294),V=n(291),A=n(274),C=n(284),E=n(278),k=function(e,t){var n=0;if(w.length<=t+1)n=e*w[t].bonds;else{var d=(1-Math.pow(1+w[t+1].bonds,-9))*w[t].bonds;d/=w[t+1].bonds;var i=1/Math.pow(1+w[t+1].bonds,9);n=e*(d+(i-=1)+w[t].bonds)}return n},w=[{year:1871,cpi:12.46,dividends:.05855856,bonds:.0532,gold:.02656043,equity:.09459459},{year:1872,cpi:12.65,dividends:.05417695,bonds:.0536,gold:-.01940492,equity:.05144033},{year:1873,cpi:12.94,dividends:.05919765,bonds:.0558,gold:.01539138,equity:-.08806262},{year:1874,cpi:12.37,dividends:.07081545,bonds:.0547,gold:.01948896,equity:-.02575107},{year:1875,cpi:11.51,dividends:.07213656,bonds:.0507,gold:-.0526763,equity:-.01762115},{year:1876,cpi:10.85,dividends:.06726457,bonds:.0459,gold:-.0470852,equity:-.20403587},{year:1877,cpi:10.94,dividends:.08191549,bonds:.0445,gold:-.02635294,equity:-.08450704},{year:1878,cpi:9.23,dividends:.05821538,bonds:.0434,gold:-96665e-8,equity:.10153846},{year:1879,cpi:8.28,dividends:.05075419,bonds:.0422,gold:0,equity:.4273743},{year:1880,cpi:9.99,dividends:.04011742,bonds:.0402,gold:0,equity:.21135029},{year:1881,cpi:9.42,dividends:.04281099,bonds:.037,gold:0,equity:-.04361874},{year:1882,cpi:10.18,dividends:.05405405,bonds:.0362,gold:0,equity:-.01858108},{year:1883,cpi:9.99,dividends:.05521515,bonds:.0363,gold:0,equity:-.10843373},{year:1884,cpi:9.23,dividends:.06337838,bonds:.0362,gold:0,equity:-.18146718},{year:1885,cpi:8.28,dividends:.07174528,bonds:.0352,gold:0,equity:.22641509},{year:1886,cpi:7.99,dividends:.04582692,bonds:.0337,gold:0,equity:.07307692},{year:1887,cpi:7.99,dividends:.03987455,bonds:.0352,gold:0,equity:-.0483871},{year:1888,cpi:8.37,dividends:.04676083,bonds:.0367,gold:0,equity:-.01318267},{year:1889,cpi:7.99,dividends:.04374046,bonds:.0345,gold:0,equity:.02671756},{year:1890,cpi:7.61,dividends:.04089219,bonds:.0342,gold:0,equity:-.10037175},{year:1891,cpi:7.8,dividends:.04545455,bonds:.0362,gold:0,equity:.13842975},{year:1892,cpi:7.33,dividends:.04023593,bonds:.036,gold:0,equity:.01814882},{year:1893,cpi:7.9,dividends:.04292335,bonds:.0375,gold:0,equity:-.22994652},{year:1894,cpi:6.85,dividends:.05710648,bonds:.037,gold:0,equity:-.0162037},{year:1895,cpi:6.57,dividends:.04901176,bonds:.0346,gold:0,equity:.00470588},{year:1896,cpi:6.66,dividends:.04430913,bonds:.036,gold:0,equity:-.0117096},{year:1897,cpi:6.47,dividends:.04265403,bonds:.034,gold:0,equity:.1563981},{year:1898,cpi:6.66,dividends:.03723361,bonds:.0335,gold:0,equity:.24590164},{year:1899,cpi:6.76,dividends:.03302632,bonds:.031,gold:0,equity:.00328947},{year:1900,cpi:7.9,dividends:.03565574,bonds:.0315,gold:0,equity:.15901639},{year:1901,cpi:7.71,dividends:.04267327,bonds:.031,gold:0,equity:.14851485},{year:1902,cpi:7.9,dividends:.03950739,bonds:.0318,gold:0,equity:.04187192},{year:1903,cpi:8.66,dividends:.03920804,bonds:.033,gold:0,equity:-.21040189},{year:1904,cpi:8.28,dividends:.0519012,bonds:.034,gold:0,equity:.26197605},{year:1905,cpi:8.47,dividends:.03697509,bonds:.0348,gold:0,equity:.17081851},{year:1906,cpi:8.47,dividends:.03402229,bonds:.0343,gold:0,equity:-.03140831},{year:1907,cpi:8.85,dividends:.04218619,bonds:.0367,gold:0,equity:-.2834728},{year:1908,cpi:8.66,dividends:.06375182,bonds:.0387,gold:0,equity:.32262774},{year:1909,cpi:8.94,dividends:.04451435,bonds:.0376,gold:0,equity:.11258278},{year:1910,cpi:9.9,dividends:.04389881,bonds:.0391,gold:0,equity:-.08035714},{year:1911,cpi:9.23,dividends:.05070119,bonds:.0398,gold:0,equity:-.01618123},{year:1912,cpi:9.13,dividends:.05162281,bonds:.0401,gold:0,equity:.01973684},{year:1913,cpi:9.8,dividends:.0516129,bonds:.0445,gold:0,equity:-.1},{year:1914,cpi:10,dividends:.0567503,bonds:.0416,gold:0,equity:-.10633214},{year:1915,cpi:10.1,dividends:.05625668,bonds:.0424,gold:0,equity:.2473262},{year:1916,cpi:10.4,dividends:.04724544,bonds:.0405,gold:0,equity:.02572347},{year:1917,cpi:11.7,dividends:.05964472,bonds:.0423,gold:0,equity:-.24660397},{year:1918,cpi:14,dividends:.09431345,bonds:.0457,gold:0,equity:.0887656},{year:1919,cpi:16.5,dividends:.07219108,bonds:.045,gold:0,equity:.12484076},{year:1920,cpi:19.3,dividends:.05983012,bonds:.0497,gold:0,equity:-.19479049},{year:1921,cpi:19,dividends:.07113924,bonds:.0509,gold:0,equity:.02672293},{year:1922,cpi:16.9,dividends:.06358904,bonds:.043,gold:0,equity:.21917808},{year:1923,cpi:16.8,dividends:.05749438,bonds:.0436,gold:0,equity:-.00786517},{year:1924,cpi:17.3,dividends:.06021518,bonds:.0406,gold:0,equity:.198188},{year:1925,cpi:17.3,dividends:.05238185,bonds:.0386,gold:0,equity:.19565217},{year:1926,cpi:17.9,dividends:.04802372,bonds:.0368,gold:0,equity:.05928854},{year:1927,cpi:17.5,dividends:.05199254,bonds:.0334,gold:0,equity:.30820896},{year:1928,cpi:17.3,dividends:.0443069,bonds:.0333,gold:0,equity:.41814033},{year:1929,cpi:17.1,dividends:.03459372,bonds:.036,gold:0,equity:-.12670957},{year:1930,cpi:17.1,dividends:.04471672,bonds:.0329,gold:0,equity:-.26393367},{year:1931,cpi:15.9,dividends:.06049437,bonds:.0334,gold:0,equity:-.48060075},{year:1932,cpi:14.3,dividends:.09557831,bonds:.0368,gold:.56361877,equity:-.14578313},{year:1933,cpi:12.9,dividends:.06981664,bonds:.0331,gold:.08292079,equity:.48660085},{year:1934,cpi:13.2,dividends:.04182163,bonds:.0312,gold:0,equity:-.12144213},{year:1935,cpi:13.6,dividends:.04859611,bonds:.0279,gold:0,equity:.48596112},{year:1936,cpi:13.8,dividends:.03488372,bonds:.0265,gold:0,equity:.27834302},{year:1937,cpi:14.1,dividends:.04150085,bonds:.0268,gold:0,equity:-.35702103},{year:1938,cpi:14.2,dividends:.07014439,bonds:.0256,gold:0,equity:.10521662},{year:1939,cpi:14,dividends:.04106664,bonds:.0236,gold:-.01428571,equity:-.016},{year:1940,cpi:13.9,dividends:.05067748,bonds:.0221,gold:.02898551,equity:-.14227642},{year:1941,cpi:14.1,dividends:.06382303,bonds:.0195,gold:0,equity:-.1535545},{year:1942,cpi:15.7,dividends:.07876069,bonds:.0246,gold:.02816901,equity:.12989922},{year:1943,cpi:16.9,dividends:.05847374,bonds:.0247,gold:-.00684932,equity:.17443013},{year:1944,cpi:17.4,dividends:.05175806,bonds:.0248,gold:.02758621,equity:.13839662},{year:1945,cpi:17.8,dividends:.04768962,bonds:.0237,gold:.02684564,equity:.3358043},{year:1946,cpi:18.2,dividends:.03699595,bonds:.0219,gold:.12418301,equity:-.15593785},{year:1947,cpi:21.5,dividends:.04689895,bonds:.0225,gold:-.02325581,equity:-.02498356},{year:1948,cpi:23.7,dividends:.05686669,bonds:.0244,gold:-.03571429,equity:.03573837},{year:1949,cpi:24,dividends:.06163197,bonds:.0231,gold:-.00617284,equity:.09895833},{year:1950,cpi:23.5,dividends:.06812796,bonds:.0232,gold:-.00621118,equity:.25651659},{year:1951,cpi:25.4,dividends:.07009288,bonds:.0257,gold:-.0325,equity:.14049976},{year:1952,cpi:26.5,dividends:.05842621,bonds:.0268,gold:-.08268734,equity:.0822654},{year:1953,cpi:26.6,dividends:.05385791,bonds:.0283,gold:-.00704225,equity:-.02750191},{year:1954,cpi:26.9,dividends:.05721406,bonds:.0248,gold:-.00283688,equity:.3982718},{year:1955,cpi:26.7,dividends:.04344579,bonds:.0261,gold:.00142248,equity:.24016854},{year:1956,cpi:26.8,dividends:.03782559,bonds:.029,gold:.00142046,equity:.02899207},{year:1957,cpi:27.6,dividends:.03822738,bonds:.0346,gold:0,equity:-.09487123},{year:1958,cpi:28.6,dividends:.04336892,bonds:.0309,gold:0,equity:.35262646},{year:1959,cpi:29,dividends:.03158342,bonds:.0402,gold:.03546099,equity:.04332974},{year:1960,cpi:29.3,dividends:.03216733,bonds:.0472,gold:-.02739726,equity:.02912287},{year:1961,cpi:29.8,dividends:.03259662,bonds:.0384,gold:-.00422535,equity:.15656397},{year:1962,cpi:30,dividends:.02934226,bonds:.0408,gold:-.00282885,equity:-.05805704},{year:1963,cpi:30.4,dividends:.03284153,bonds:.0383,gold:.00283688,equity:.17506917},{year:1964,cpi:30.9,dividends:.03004147,bonds:.0417,gold:.00424328,equity:.1264879},{year:1965,cpi:31.2,dividends:.02922283,bonds:.0419,gold:-.0028169,equity:.08360427},{year:1966,cpi:31.8,dividends:.02936134,bonds:.0461,gold:.00282486,equity:-.09504929},{year:1967,cpi:32.9,dividends:.03410302,bonds:.0458,gold:.22535211,equity:.12539964},{year:1968,cpi:34.1,dividends:.03082912,bonds:.0553,gold:-.05747126,equity:.07323232},{year:1969,cpi:35.6,dividends:.03019608,bonds:.0604,gold:-.05121951,equity:-.11460784},{year:1970,cpi:37.8,dividends:.03502746,bonds:.0779,gold:.14652956,equity:.03521205},{year:1971,cpi:39.8,dividends:.03347952,bonds:.0624,gold:.43139014,equity:.10493101},{year:1972,cpi:41.1,dividends:.02971926,bonds:.0595,gold:.6679198,equity:.14617619},{year:1973,cpi:42.6,dividends:.02666106,bonds:.0646,gold:.72586401,equity:-.18826014},{year:1974,cpi:46.6,dividends:.03537613,bonds:.0699,gold:-.24204168,equity:-.24503173},{year:1975,cpi:52.1,dividends:.04993564,bonds:.075,gold:-.03962955,equity:.33489526},{year:1976,cpi:55.6,dividends:.03802736,bonds:.0774,gold:.2043059,equity:.0716498},{year:1977,cpi:58.5,dividends:.03946696,bonds:.0721,gold:.29174426,equity:-.1305395},{year:1978,cpi:62.5,dividends:.05222526,bonds:.0796,gold:.99999999,equity:.10481994},{year:1979,cpi:68.3,dividends:.05128202,bonds:.091,gold:.29607843,equity:.11222545},{year:1980,cpi:77.8,dividends:.05139766,bonds:.108,gold:-.32761809,equity:.19927863},{year:1981,cpi:87,dividends:.04661654,bonds:.1257,gold:.1175,equity:-.11804511},{year:1982,cpi:94.3,dividends:.05677749,bonds:.1459,gold:-.14988814,equity:.23017903},{year:1983,cpi:97.8,dividends:.04770152,bonds:.1046,gold:-.18947368,equity:.15315315},{year:1984,cpi:101.9,dividends:.04278846,bonds:.1167,gold:.06168831,equity:.03125},{year:1985,cpi:105.5,dividends:.04413362,bonds:.1138,gold:.19541284,equity:.21328671},{year:1986,cpi:109.6,dividends:.03813641,bonds:.0919,gold:.24456383,equity:.27041306},{year:1987,cpi:111.2,dividends:.03137996,bonds:.0708,gold:-.15693731,equity:-.05293006},{year:1988,cpi:115.7,dividends:.03535597,bonds:.0867,gold:-.02230891,equity:.13932136},{year:1989,cpi:121.1,dividends:.03438448,bonds:.0909,gold:-.03690773,equity:.19120533},{year:1990,cpi:127.4,dividends:.0327676,bonds:.0821,gold:-.08557742,equity:-.04259199},{year:1991,cpi:134.6,dividends:.03719531,bonds:.0809,gold:-.05705791,equity:.27831884},{year:1992,cpi:138.1,dividends:.02941742,bonds:.0703,gold:.17642643,equity:.0460248},{year:1993,cpi:142.6,dividends:.02852124,bonds:.066,gold:-.02169751,equity:.08675873},{year:1994,cpi:146.2,dividends:.0266883,bonds:.0575,gold:.00978474,equity:-.01636398},{year:1995,cpi:150.3,dividends:.02832886,bonds:.0778,gold:-.04651163,equity:.32062332},{year:1996,cpi:154.4,dividends:.02261206,bonds:.0565,gold:-.22208672,equity:.24706227},{year:1997,cpi:159.1,dividends:.01951567,bonds:.0658,gold:.00574813,equity:.25728903},{year:1998,cpi:161.6,dividends:.01614142,bonds:.0554,gold:.0053689,equity:.29626516},{year:1999,cpi:164.3,dividends:.0130395,bonds:.0472,gold:-.06063738,equity:.14159533},{year:2e3,cpi:168.8,dividends:.0116256,bonds:.0666,gold:.01412067,equity:-.0631037},{year:2001,cpi:175.1,dividends:.01210665,bonds:.0516,gold:.23960217,equity:-.14631298},{year:2002,cpi:177.1,dividends:.01380155,bonds:.0504,gold:.21735959,equity:-.21432017},{year:2003,cpi:181.7,dividends:.01799428,bonds:.0405,gold:.04397843,equity:.26419896},{year:2004,cpi:185.2,dividends:.01554056,bonds:.0415,gold:.17768595,equity:.04316922},{year:2005,cpi:190.7,dividends:.01667781,bonds:.0422,gold:.23918129,equity:.08237614},{year:2006,cpi:198.3,dividends:.0175252,bonds:.0442,gold:.31587227,equity:.11373003},{year:2007,cpi:202.416,dividends:.01761272,bonds:.0476,gold:.03974895,equity:-.03187844},{year:2008,cpi:211.08,dividends:.02025008,bonds:.0374,gold:.2503593,equity:-.37220401},{year:2009,cpi:211.143,dividends:.0323598,bonds:.0252,gold:.30597701,equity:.29806604},{year:2010,cpi:216.687,dividends:.01979684,bonds:.0373,gold:.07797923,equity:.14154755},{year:2011,cpi:220.223,dividends:.01790346,bonds:.0339,gold:.08687133,equity:.01400259},{year:2012,cpi:226.665,dividends:.02055749,bonds:.0197,gold:-.27614183,equity:.13826139},{year:2013,cpi:230.28,dividends:.0213028,bonds:.0191,gold:-.00435866,equity:.22114293},{year:2014,cpi:233.916,dividends:.01942536,bonds:.0286,gold:-.11611424,equity:.1369433},{year:2015,cpi:233.707,dividends:.019671167,bonds:.0188,gold:.1799434,equity:-.054028735229542},{year:2016,cpi:236.916,dividends:.02270058,bonds:.0209,gold:.00510098,equity:.18582299661672},{year:2017,cpi:242.839,dividends:.020186481,bonds:.0243,gold:.00904448,equity:.226221034357374},{year:2018,cpi:247.867,dividends:.017666738,bonds:.0258,gold:.09784074,equity:-.065384615734383},{year:2019,cpi:251.712,dividends:.020766616,bonds:.0271,gold:0,equity:.257273694016446},{year:2020,cpi:257.971,dividends:.0179,bonds:.0176,gold:0,equity:.157265}],D="DarkKhaki",z=[0,.5,1.5,3,20],R=function(e){var t="."+e;p.o(t).remove()},I=function(e){var t=D;return 0>=e?t="Crimson":e<.5?t="Orange":e>=1.5&&(t=e>=z[z.length-2]?"DarkGreen":"ForestGreen"),t},P=function(e){var t="#"+e;return p.n(t)},B=function(e){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},M=function(e){return Number(100*e).toFixed(2)+"%"},N=n(11),Y=n(286),L=n(288),F=n(289),_=n(1);var T=function(e){return d.useEffect((function(){}),[e]),Object(_.jsx)("div",{children:Object(_.jsxs)(r.a,{direction:"row",children:[Object(_.jsx)(Y.a,{children:Object(_.jsxs)(L.a,{children:[Object(_.jsx)(F.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Summary"}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:[M(1-e.fails/e.cycles)," success (",e.cycles-e.fails," / ",e.cycles,")"]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:[M(e.netpositivepct)," net positive years"]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["Median failure age : ",e.medianfailage]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["Minimum failure age : ",e.minfailage]})]})}),Object(_.jsx)(Y.a,{children:Object(_.jsxs)(L.a,{children:[Object(_.jsx)(F.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"$ End Value"}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["median : ",B(e.medianendvalue)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",B(e.avgendvalue)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",B(e.maxendvalue)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["min : ",B(e.minendvalue)]})]})}),Object(_.jsx)(Y.a,{children:Object(_.jsxs)(L.a,{children:[Object(_.jsx)(F.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"% Returns"}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["median : ",M(e.medianreturns)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",M(e.avgreturns)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",M(e.maxreturns)]}),Object(_.jsxs)(F.a,{variant:"body2",color:"textSecondary",component:"p",children:["min : ",M(e.minreturns)]})]})})]})})};var Z=function(e){var t="endvaluechartsvg",n="perrundata"+t,i="ttevwrap",a="ttevback",o="ttevrange",r="ttevpct",s=function(){return P(i)},c=function(t){var n=t.srcElement.__data__,d=null,i=null,a=null,o=null;if(e.selectedbin!==n.x0){var r=n.x0/e.startvalue,s=function(e){for(var t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],n=0;n<e.length;n++){var d=p.f(e[n].cycleData,(function(e){return e.adjEndValue}));t[0]=Math.min(t[0],d[0]),t[1]=Math.max(t[1],d[1])}return t}(n);d=I(r),i=s[0],a=s[1],o=n.x0}e.zoomcallback(i,a,d,o)},l=function(e){s().style("opacity",1)},u=function(t){var n,d=t.srcElement.__data__,i={binData:n=d,extBin:p.f(n,(function(e){return e.adjEndCycleValue})),extPctStartValue:p.f(n,(function(e){return e.pctOfStart})),binCount:n.length},c=B(+i.extBin[0])+"-"+B(+i.extBin[1]),l=" "+M(d.length/e.metadata.length)+" of cycles";P(o).text(c),P(r).text(l);var u=s().node().getBBox();P(a).attr("width",u.width).attr("height",u.height)},y=function(){s().style("opacity",0)};return d.useEffect((function(){var d=40,s=65,b="translate("+s+","+d+")",v=960-s-65,g=300-d-40,j=function(){var t=z,n=[];n[0]=0,n[1]=.01;for(var d=1;d<t.length;d++)n[d+1]=t[d]*e.startvalue;return n},h=P(t).append("g").attr("transform",b);R(n),function(t){var d=j(),i=function(t){return p.c().value((function(e){return e.adjEndCycleValue})).domain([t[0],t[t.length-1]]).thresholds(t)(e.metadata)}(d),a=function(){for(var e=j(),t=e.length,n=[],d=v/(t+1),i=0;i<=e.length;i++)n[i]=i*d;return p.m().domain(e).range(n)}(),o=p.l().domain([0,p.h(i,(function(e){return e.length}))]).range([g,0]);t.append("g").attr("class",n).attr("transform","translate(0,"+g+")").call(p.a(a)),t.append("g").attr("class",n).call(p.b(o)),t.append("g").attr("class",n).attr("id","pathgroupid").selectAll(".histobarclass").data(i).enter().append("rect").attr("class",n).attr("x",1).attr("transform",(function(e){return"translate("+a(e.x0)+","+o(e.length)+")"})).attr("width",(function(e){return a(e.x1)-a(e.x0)-1})).attr("height",(function(e){return g-o(e.length)})).style("fill",(function(t){return I(t.x0/e.startvalue)})).style("opacity",(function(t){return function(t){var n=1;return null!==e.selectedbin&&t!==e.selectedbin&&(n=.1),n}(t.x0)})).on("mousedown",c).on("mouseover",l).on("mouseout",y).on("mousemove",u)}(h),function(e){var t=e.append("g").attr("id",i).attr("class",n).style("opacity",0);t.append("rect").style("opacity",.7).attr("id",a).attr("width",75).attr("height",75).attr("pointer-events","none").attr("fill","#e8e8e8");var d=t.append("g").append("text").attr("pointer-events","none").attr("font-weight",900).attr("text-anchor","left");d.append("tspan").attr("id",o).attr("x","5").attr("y","5").attr("dy","15px").attr("pointer-events","none"),d.append("tspan").attr("id",r).attr("x","5").attr("y","5").attr("dy","30px").attr("pointer-events","none")}(h)}),[e.metadata,e.medianendvalue,e.startvalue,e.selectedbin,e.zoomcolor]),Object(_.jsx)("div",{children:Object(_.jsx)("svg",{id:t,width:960,height:300})})};n(229);var G=function(e){var t=Object(d.useState)(0),n=Object(N.a)(t,2),i=n[0],a=n[1],o=Object(d.useState)(0),r=Object(N.a)(o,2),s=r[0],c=r[1],l=Object(d.useState)(0),u=Object(N.a)(l,2),y=u[0],b=u[1],v=Object(d.useState)(0),g=Object(N.a)(v,2),j=g[0],h=g[1],f=Object(d.useState)(0),m=Object(N.a)(f,2),x=m[0],q=m[1],S=Object(d.useState)(0),O=Object(N.a)(S,2),V=O[0],A=O[1],C=Object(d.useState)(0),E=Object(N.a)(C,2),k=E[0],D=E[1],z=Object(d.useState)(0),I=Object(N.a)(z,2),B=I[0],Y=I[1],L=Object(d.useState)(0),F=Object(N.a)(L,2),G=F[0],$=F[1],H=Object(d.useState)(0),J=Object(N.a)(H,2),U=J[0],W=J[1],K=Object(d.useState)(0),Q=Object(N.a)(K,2),X=Q[0],ee=Q[1],te=Object(d.useState)(0),ne=Object(N.a)(te,2),de=ne[0],ie=ne[1],ae="d3cycletarget",oe="perrundatad3cycletarget",re="hoverLine",se="ttwrapper",ce="ttbackground",le="ttage",ue=40,ye=65,pe=960-ye-65,be=500-ue-40,ve="translate("+ye+","+ue+")",ge=function(){var t=[e.currentage,e.lifeexpectancy];return p.l().domain(t).range([0,pe])},je=function(){return P(re)},he=function(){return P(se)},fe=function(){for(var t=[],n=e.cycleData,d=0;d<n.length;d++)for(var i=0;i<n[d].length;i++){var a=n[d][i];t.push(a.bondReturn)}return t};return d.useEffect((function(){var t=function(t,n,d,i,a){var o=oe+" portfolioline "+i.lineColor,r=1;null!=e.zoomcolor&&e.zoomcolor!==i.lineColor&&(r=.1),t.append("path").datum(a).attr("id",i.startYear).attr("class",o).attr("fill","none").attr("pointer-events","none").style("opacity",r).attr("stroke",i.lineColor).attr("stroke-width",1.5).attr("d",p.g().x((function(e){return n(e.age)})).y((function(e){return d(e.adjEndValue)})))},n=P(ae).append("g").attr("transform",ve);R(oe),function(){for(var t=e.cycledata,n=e.cyclemeta,d=p.f(n,(function(e){return e.adjEndCycleValue})),i=p.i(n,(function(e){return e.adjEndCycleValue})),o=p.j(n,(function(e){return e.adjEndCycleValue})),r=function(e){for(var t=[],n=0;n<e.length;n++)for(var d=0;d<e[n].length;d++){var i=e[n][d];t.push(i.aggReturn)}return t}(t),s=p.i(r),l=p.j(r),u=p.f(r),y=function(e){for(var t=0,n=0;n<e.length;n++)0<e[n]&&t++;return t/e.length}(function(e){for(var t=[],n=0;n<e.length;n++)for(var d=0;d<e[n].length;d++){var i=e[n][d];t.push(i.netDelta)}return t}(t)),v=0,g=e.lifeexpectancy+1,j=[],f=0;f<n.length;f++)n[f].fail&&(g=Math.min(n[f].failAge,g),j[v]=n[f].failAge,v++);a(i),c(o),b(d[0]),h(d[1]),q(s),A(l),D(u[0]),Y(u[1]),$(y),W(v),ee(g),ie(p.j(j))}(),function(n){var d=+e.portmin,i=+e.portmax;null!==e.minzoom&&null!==e.maxzoom&&(d=+e.minzoom,i=+e.maxzoom);var a=ge(),o=function(e,t){var n=[e,t];return p.l().domain(n).range([be,0])}(d,i),r=e.cycledata,s=e.cyclemeta,c=+e.numcycles;!function(e,t,n){e.append("g").attr("class",oe).attr("transform","translate(0,"+be+")").call(p.a(t)),e.append("g").attr("class",oe).call(p.b(n))}(n,a,o);for(var l=0;l<c;l++)t(n,a,o,s[l],r[l])}(n),function(e){var t=e.append("g").attr("id",se).attr("display","none");t.append("rect").style("opacity",.7).attr("id",ce).attr("width",75).attr("height",75).attr("pointer-events","none").attr("fill","#e8e8e8");var n=t.append("g").append("text");n.attr("pointer-events","none").attr("font-weight",900).attr("text-anchor","left"),n.append("tspan").attr("id",le).attr("x","5").attr("y","5").attr("dy","15px").attr("pointer-events","none"),e.append("g").append("rect").style("opacity",0).attr("id",re).attr("pointer-events","none").attr("class","dotted").attr("stroke-width","1px").attr("width",".5px").attr("height",be)}(n)}),[e.portfoliovalue,e.portmin,e.portmax,e.cycledata,e.cyclemeta,e.numcycles,e.currentage,e.lifeexpectancy,e.minzoom,e.maxzoom,e.zoomcolor,e.selectedbin]),Object(_.jsxs)("div",{children:[Object(_.jsx)(T,{fails:U,cycles:e.numcycles,minfailage:X,medianfailage:de,medianendvalue:s,avgendvalue:i,minendvalue:y,maxendvalue:j,medianreturns:V,avgreturns:x,minreturns:k,maxreturns:B,netpositivepct:G}),Object(_.jsx)("svg",{id:ae,width:960,height:500,children:Object(_.jsx)("rect",{id:"trackingRect",style:{opacity:0},width:pe,height:be,transform:ve,fill:"LightGrey",onMouseDown:function(e){var t=fe(),n=p.i(t),d=p.e(t);console.log("equity avg return:"+M(p.i(w,(function(e){return e.equity})))+" equity sdev:"+M(p.e(w,(function(e){return e.equity})))+" bond avg return:"+M(n)+" bond sdev:"+M(d))},onMouseEnter:function(e){je().style("opacity",1),he().attr("display",null)},onMouseMove:function(t){var n=p.d((function(e){return e.age})).left,d=ge(),i=p.k(t),a=d.invert(i[0]),o=e.cycledata[0],r=o[n(o,a,1)],s=d(r.age),c=s;pe<=s+75&&(c=s-75),P(le).text("age: "+r.age);var l=he().node().getBBox();P(ce).attr("width",l.width).attr("height",l.height),he().attr("transform","translate("+c+","+i[1]+")"),je().attr("x",s),he().attr("x",c)},onMouseLeave:function(){je().style("opacity",0),he().attr("display","none")}})}),Object(_.jsx)(Z,{startvalue:e.portfoliovalue,minendvalue:y,maxendvalue:j,medianendvalue:s,metadata:e.cyclemeta,cyclechartid:ae,zoomcallback:e.zoomcallback,zoomcolor:e.zoomcolor,selectedbin:e.selectedbin})]})},$=125e4,H=1871,J=2020,U=function(e){Object(u.a)(n,e);var t=Object(y.a)(n);function n(e){var d;return Object(c.a)(this,n),(d=t.call(this,e)).state={currentAgeState:62,lifeExpectancyState:95,portfolioValueState:$,spendValueState:5e4,spendModelState:"dollars",stockAllocPctState:80,feePctState:.18,ssOnState:!1,socialSecurityIncomeState:39312,socialSecurityAgeState:67,useAllHistDataState:!0,startDataYearState:H,endDataYearState:J,minZoomValueState:null,maxZoomValueState:null,zoomColorState:null,selectedBinState:null},d}return Object(l.a)(n,[{key:"zoomChart",value:function(e,t,n,d){this.setState({minZoomValueState:e}),this.setState({maxZoomValueState:t}),this.setState({zoomColorState:n}),this.setState({selectedBinState:d})}},{key:"render",value:function(){var e=this,t=this.state.lifeExpectancyState-this.state.currentAgeState+1,n=this.state.endDataYearState-this.state.startDataYearState+2-t,d=this.state.portfolioValueState,i=this.state.portfolioValueState,a=[],o=[],s=function(e,t,n){var d=e.equityReturn*t+e.bondReturn*n;return isNaN(d)&&(1===t?d=e.equityReturn:1===n?d=e.bondReturn:(d=0,console.log("unexpected aggReturn result- equity :("+M(e.equityReturn)+","+M(t)+")  bond:("+M(e.bondReturn)+","+M(n)+")"))),d},c=function(t,n){for(var d=[],i=e.state.stockAllocPctState/100,a=(100-e.state.stockAllocPctState)/100,o=e.state.feePctState/100,r=e.state.socialSecurityAgeState,c=e.state.ssOnState?e.state.socialSecurityIncomeState:0,l=w[t].cpi,u=0;u<n;u++){var y={year:w[t+u].year,age:e.state.currentAgeState+u,beginValue:u>0?d[u-1].endValue:e.state.portfolioValueState,equityReturn:w[t+u].equity,equityAppr:0,divAppr:0,bondReturn:0,bondAppr:0,aggReturn:0,cumulativeCPI:w[t+u].cpi/l,spend:e.state.spendValueState,actualSpend:e.state.spendValueState,fees:0,netDelta:0,endValue:0,adjEndValue:0,appr:0,adjAppr:0};y.actualSpend=y.spend*y.cumulativeCPI;var p=r<=y.age?c*y.cumulativeCPI:0;if(y.actualSpend-=p,y.endValue=y.beginValue-y.actualSpend,!(0<y.endValue)){y.endValue=y.adjEndValue=0,d.push(y);break}var b=y.endValue*i;y.equityAppr=b*y.equityReturn,y.divAppr=b*w[t+u].dividends,y.bondAppr=k(y.endValue*a,t+u),y.bondReturn=y.bondAppr/(y.beginValue*a),y.aggReturn=s(y,i,a),y.appr=y.equityAppr+y.divAppr+y.bondAppr,y.endValue+=y.appr,y.fees=(y.beginValue+y.appr)*o,y.endValue-=y.fees,y.netDelta=y.appr-y.actualSpend-y.fees,y.adjEndValue=y.endValue/y.cumulativeCPI,y.adjAppr=y.appr/y.cumulativeCPI,d.push(y)}return d},l=function(t){var n=p.f(t,(function(e){return e.adjEndValue})),d=p.i(t,(function(e){return e.adjEndValue})),i=p.j(t,(function(e){return e.adjEndValue})),a=p.p(t,(function(e){return e.actualSpend})),o=p.p(t,(function(e){return e.appr})),r=p.p(t,(function(e){return e.adjAppr})),s=t[t.length-1].adjEndValue/e.state.portfolioValueState,c=I(s),l=p.f(t,(function(e){return e.aggReturn})),u=p.i(t,(function(e){return e.aggReturn})),y=p.j(t,(function(e){return e.aggReturn}));return{startCycleValue:e.state.portfolioValueState,endCycleValue:t[t.length-1].endValue,adjEndCycleValue:t[t.length-1].adjEndValue,extent:n,mean:d,median:i,pctOfStart:s,totalSpend:a,totalAppreciation:o,totalAdjAppreciation:r,extAggReturn:l,avgAggReturn:u,medAggReturn:y,fail:0>=t[t.length-1].adjEndValue,failAge:0>=t[t.length-1].adjEndValue?t.length+e.state.currentAgeState:void 0,startYear:t[0].year,cycleData:t,lineColor:c}};return function(){for(var r=e.state.startDataYearState-w[0].year,s=0;s<n;s++){var u=c(r+s,t),y=l(u);o[s]=y,a[s]=u,d=Math.min(d,y.extent[0]),i=Math.max(i,y.extent[1])}}(),Object(_.jsx)("div",{children:Object(_.jsxs)(r.a,{direction:"row",children:[Object(_.jsx)("div",{className:"Inputs",children:Object(_.jsx)("header",{className:"Inputs-header",children:Object(_.jsx)(j.a,{sx:{bgcolor:"background.paper",boxShadow:10,borderRadius:10,p:2,minWidth:300},children:Object(_.jsxs)(m.a,{children:[Object(_.jsx)(x.a,{children:Object(_.jsx)(f.a,{required:!0,label:"Age",sx:{m:"10px"},type:"number",defaultValue:62,onChange:function(t){var n=+t.target.value;e.setState({currentAgeState:n})},InputLabelProps:{shrink:!0}})}),Object(_.jsxs)(x.a,{children:[Object(_.jsx)("div",{children:"Life Expectancy: "}),Object(_.jsx)("div",{id:"lifeExpectDiv",children:this.state.lifeExpectancyState})]}),Object(_.jsx)(x.a,{divider:!0,children:Object(_.jsx)(q.a,{id:"lifeExpectSlider",size:"small",label:"Life Expectancy",marks:!0,step:1,min:62,max:110,valueLabelDisplay:"auto",defaultValue:95,onChange:function(t,n){e.setState({lifeExpectancyState:n})}})}),Object(_.jsx)(x.a,{children:Object(_.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Portfolio Value $",defaultValue:$,onChange:function(t){var n=+t.target.value;e.setState({portfolioValueState:n})}})}),Object(_.jsx)(x.a,{divider:!0,children:Object(_.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Spend $",defaultValue:5e4,onChange:function(t){var n=+t.target.value;e.setState({spendValueState:n})}})}),Object(_.jsxs)(x.a,{children:[Object(_.jsx)("div",{children:"Stocks: "}),Object(_.jsxs)("div",{id:"sAlloc",children:[this.state.stockAllocPctState,"%"]}),Object(_.jsx)("div",{children:"\xa0 Bonds: "}),Object(_.jsxs)("div",{id:"bAlloc",children:[100-this.state.stockAllocPctState,"%"]})]}),Object(_.jsx)(x.a,{children:Object(_.jsx)(q.a,{id:"aAlloc",label:"Stock Allocation",marks:!0,step:5,valueLabelDisplay:"auto",defaultValue:80,onChange:function(t){var n=+t.target.value;e.setState({stockAllocPctState:n})}})}),Object(_.jsx)(x.a,{divider:!0,children:Object(_.jsx)(f.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Fee %",defaultValue:.18,onChange:function(t){var n=+t.target.value;e.setState({feePctState:n})}})}),Object(_.jsx)(x.a,{children:Object(_.jsxs)("div",{children:["Historical data from ",this.state.startDataYearState," to ",this.state.endDataYearState]})}),Object(_.jsx)(x.a,{children:Object(_.jsx)(q.a,{marks:!0,step:1,min:H,max:J,defaultValue:[H,J],valueLabelDisplay:"auto",onChange:function(t,n){e.setState({startDataYearState:n[0]}),e.setState({endDataYearState:n[1]})}})}),Object(_.jsx)(x.a,{children:Object(_.jsxs)(b.a,{children:[Object(_.jsx)(v.a,{children:Object(_.jsx)(S.a,{children:Object(_.jsx)(O.a,{control:Object(_.jsx)(h.a,{}),label:"include Social Security income",onChange:function(t,n){e.setState({ssOnState:n})}})})}),Object(_.jsxs)(g.a,{children:[Object(_.jsx)(f.a,{disabled:!this.state.ssOnState,sx:{m:"10px"},type:"number",label:"Annual SS $",defaultValue:39312,onChange:function(t){var n=+t.target.value;e.setState({socialSecurityIncomeState:n})}}),Object(_.jsxs)(V.a,{disabled:!this.state.ssOnState,component:"fieldset",children:[Object(_.jsx)(A.a,{component:"legend",children:"Start at age"}),Object(_.jsxs)(C.a,{"aria-label":"ss-start",onChange:function(t){var n=+t.target.value;e.setState({socialSecurityAgeState:n})},row:!0,defaultValue:"67",name:"radio-buttons-group",children:[Object(_.jsx)(O.a,{value:"62",control:Object(_.jsx)(E.a,{}),label:"62"}),Object(_.jsx)(O.a,{value:"67",control:Object(_.jsx)(E.a,{}),label:"67"}),Object(_.jsx)(O.a,{value:"70",control:Object(_.jsx)(E.a,{}),label:"70"})]})]})]})]})})]})})})}),Object(_.jsx)(G,{id:"chartComponent",portfoliovalue:this.state.portfolioValueState,portmin:d,portmax:i,cycledata:a,cyclemeta:o,numcycles:n,currentage:this.state.currentAgeState,lifeexpectancy:this.state.lifeExpectancyState,minzoom:this.state.minZoomValueState,maxzoom:this.state.maxZoomValueState,zoomcolor:this.state.zoomColorState,zoomcallback:this.zoomChart.bind(this),selectedbin:this.state.selectedBinState})]})})}}]),n}(d.Component);var W=function(){return Object(_.jsxs)(r.a,{spacing:5,children:[Object(_.jsx)(s.a,{children:" SWR Calculator"}),Object(_.jsx)(r.a,{direction:"row",children:Object(_.jsx)(U,{})})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,298)).then((function(t){var n=t.getCLS,d=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),d(e),i(e),a(e),o(e)}))};o.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(W,{})}),document.getElementById("root")),K()}},[[232,1,2]]]);
//# sourceMappingURL=main.4c188aba.chunk.js.map