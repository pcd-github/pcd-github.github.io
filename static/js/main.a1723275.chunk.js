(this.webpackJsonpswrve=this.webpackJsonpswrve||[]).push([[0],{220:function(e,t,a){},221:function(e,t,a){},230:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),d=a(39),r=a.n(d),o=(a(220),a(268)),s=a(285),c=(a(221),a(62)),l=a(63),u=a(107),y=a(111),p=a(14),b=a(281),g=a(293),v=a(296),j=a(297),h=a(290),f=a(282),x=a(276),m=a(291),q=a(279),S=a(280),O=a(294),V=a(295),A=a(292),E=a(274),C=a(284),k=a(278),D=function(e,t,a,n){for(var i,d,r=[],o=function(e,t,a,n){var i=1e3;return e||(i=Math.max(0,n-a+2-t)),i}(e,t,a,n),s=a-I[0].year,c=0;c<o;c++)for(var l=0;l<t;l++){var u=e?(i=0,d=I.length-1,i=Math.ceil(i),d=Math.floor(d),Math.floor(Math.random()*(d-i+1))+i):s+c+l;r[c*t+l]=u}return r},I=[{year:1871,cpi:12.46,dividends:.05855856,bonds:.0532,gold:.02656043,equity:.09459459},{year:1872,cpi:12.65,dividends:.05417695,bonds:.0536,gold:-.01940492,equity:.05144033},{year:1873,cpi:12.94,dividends:.05919765,bonds:.0558,gold:.01539138,equity:-.08806262},{year:1874,cpi:12.37,dividends:.07081545,bonds:.0547,gold:.01948896,equity:-.02575107},{year:1875,cpi:11.51,dividends:.07213656,bonds:.0507,gold:-.0526763,equity:-.01762115},{year:1876,cpi:10.85,dividends:.06726457,bonds:.0459,gold:-.0470852,equity:-.20403587},{year:1877,cpi:10.94,dividends:.08191549,bonds:.0445,gold:-.02635294,equity:-.08450704},{year:1878,cpi:9.23,dividends:.05821538,bonds:.0434,gold:-96665e-8,equity:.10153846},{year:1879,cpi:8.28,dividends:.05075419,bonds:.0422,gold:0,equity:.4273743},{year:1880,cpi:9.99,dividends:.04011742,bonds:.0402,gold:0,equity:.21135029},{year:1881,cpi:9.42,dividends:.04281099,bonds:.037,gold:0,equity:-.04361874},{year:1882,cpi:10.18,dividends:.05405405,bonds:.0362,gold:0,equity:-.01858108},{year:1883,cpi:9.99,dividends:.05521515,bonds:.0363,gold:0,equity:-.10843373},{year:1884,cpi:9.23,dividends:.06337838,bonds:.0362,gold:0,equity:-.18146718},{year:1885,cpi:8.28,dividends:.07174528,bonds:.0352,gold:0,equity:.22641509},{year:1886,cpi:7.99,dividends:.04582692,bonds:.0337,gold:0,equity:.07307692},{year:1887,cpi:7.99,dividends:.03987455,bonds:.0352,gold:0,equity:-.0483871},{year:1888,cpi:8.37,dividends:.04676083,bonds:.0367,gold:0,equity:-.01318267},{year:1889,cpi:7.99,dividends:.04374046,bonds:.0345,gold:0,equity:.02671756},{year:1890,cpi:7.61,dividends:.04089219,bonds:.0342,gold:0,equity:-.10037175},{year:1891,cpi:7.8,dividends:.04545455,bonds:.0362,gold:0,equity:.13842975},{year:1892,cpi:7.33,dividends:.04023593,bonds:.036,gold:0,equity:.01814882},{year:1893,cpi:7.9,dividends:.04292335,bonds:.0375,gold:0,equity:-.22994652},{year:1894,cpi:6.85,dividends:.05710648,bonds:.037,gold:0,equity:-.0162037},{year:1895,cpi:6.57,dividends:.04901176,bonds:.0346,gold:0,equity:.00470588},{year:1896,cpi:6.66,dividends:.04430913,bonds:.036,gold:0,equity:-.0117096},{year:1897,cpi:6.47,dividends:.04265403,bonds:.034,gold:0,equity:.1563981},{year:1898,cpi:6.66,dividends:.03723361,bonds:.0335,gold:0,equity:.24590164},{year:1899,cpi:6.76,dividends:.03302632,bonds:.031,gold:0,equity:.00328947},{year:1900,cpi:7.9,dividends:.03565574,bonds:.0315,gold:0,equity:.15901639},{year:1901,cpi:7.71,dividends:.04267327,bonds:.031,gold:0,equity:.14851485},{year:1902,cpi:7.9,dividends:.03950739,bonds:.0318,gold:0,equity:.04187192},{year:1903,cpi:8.66,dividends:.03920804,bonds:.033,gold:0,equity:-.21040189},{year:1904,cpi:8.28,dividends:.0519012,bonds:.034,gold:0,equity:.26197605},{year:1905,cpi:8.47,dividends:.03697509,bonds:.0348,gold:0,equity:.17081851},{year:1906,cpi:8.47,dividends:.03402229,bonds:.0343,gold:0,equity:-.03140831},{year:1907,cpi:8.85,dividends:.04218619,bonds:.0367,gold:0,equity:-.2834728},{year:1908,cpi:8.66,dividends:.06375182,bonds:.0387,gold:0,equity:.32262774},{year:1909,cpi:8.94,dividends:.04451435,bonds:.0376,gold:0,equity:.11258278},{year:1910,cpi:9.9,dividends:.04389881,bonds:.0391,gold:0,equity:-.08035714},{year:1911,cpi:9.23,dividends:.05070119,bonds:.0398,gold:0,equity:-.01618123},{year:1912,cpi:9.13,dividends:.05162281,bonds:.0401,gold:0,equity:.01973684},{year:1913,cpi:9.8,dividends:.0516129,bonds:.0445,gold:0,equity:-.1},{year:1914,cpi:10,dividends:.0567503,bonds:.0416,gold:0,equity:-.10633214},{year:1915,cpi:10.1,dividends:.05625668,bonds:.0424,gold:0,equity:.2473262},{year:1916,cpi:10.4,dividends:.04724544,bonds:.0405,gold:0,equity:.02572347},{year:1917,cpi:11.7,dividends:.05964472,bonds:.0423,gold:0,equity:-.24660397},{year:1918,cpi:14,dividends:.09431345,bonds:.0457,gold:0,equity:.0887656},{year:1919,cpi:16.5,dividends:.07219108,bonds:.045,gold:0,equity:.12484076},{year:1920,cpi:19.3,dividends:.05983012,bonds:.0497,gold:0,equity:-.19479049},{year:1921,cpi:19,dividends:.07113924,bonds:.0509,gold:0,equity:.02672293},{year:1922,cpi:16.9,dividends:.06358904,bonds:.043,gold:0,equity:.21917808},{year:1923,cpi:16.8,dividends:.05749438,bonds:.0436,gold:0,equity:-.00786517},{year:1924,cpi:17.3,dividends:.06021518,bonds:.0406,gold:0,equity:.198188},{year:1925,cpi:17.3,dividends:.05238185,bonds:.0386,gold:0,equity:.19565217},{year:1926,cpi:17.9,dividends:.04802372,bonds:.0368,gold:0,equity:.05928854},{year:1927,cpi:17.5,dividends:.05199254,bonds:.0334,gold:0,equity:.30820896},{year:1928,cpi:17.3,dividends:.0443069,bonds:.0333,gold:0,equity:.41814033},{year:1929,cpi:17.1,dividends:.03459372,bonds:.036,gold:0,equity:-.12670957},{year:1930,cpi:17.1,dividends:.04471672,bonds:.0329,gold:0,equity:-.26393367},{year:1931,cpi:15.9,dividends:.06049437,bonds:.0334,gold:0,equity:-.48060075},{year:1932,cpi:14.3,dividends:.09557831,bonds:.0368,gold:.56361877,equity:-.14578313},{year:1933,cpi:12.9,dividends:.06981664,bonds:.0331,gold:.08292079,equity:.48660085},{year:1934,cpi:13.2,dividends:.04182163,bonds:.0312,gold:0,equity:-.12144213},{year:1935,cpi:13.6,dividends:.04859611,bonds:.0279,gold:0,equity:.48596112},{year:1936,cpi:13.8,dividends:.03488372,bonds:.0265,gold:0,equity:.27834302},{year:1937,cpi:14.1,dividends:.04150085,bonds:.0268,gold:0,equity:-.35702103},{year:1938,cpi:14.2,dividends:.07014439,bonds:.0256,gold:0,equity:.10521662},{year:1939,cpi:14,dividends:.04106664,bonds:.0236,gold:-.01428571,equity:-.016},{year:1940,cpi:13.9,dividends:.05067748,bonds:.0221,gold:.02898551,equity:-.14227642},{year:1941,cpi:14.1,dividends:.06382303,bonds:.0195,gold:0,equity:-.1535545},{year:1942,cpi:15.7,dividends:.07876069,bonds:.0246,gold:.02816901,equity:.12989922},{year:1943,cpi:16.9,dividends:.05847374,bonds:.0247,gold:-.00684932,equity:.17443013},{year:1944,cpi:17.4,dividends:.05175806,bonds:.0248,gold:.02758621,equity:.13839662},{year:1945,cpi:17.8,dividends:.04768962,bonds:.0237,gold:.02684564,equity:.3358043},{year:1946,cpi:18.2,dividends:.03699595,bonds:.0219,gold:.12418301,equity:-.15593785},{year:1947,cpi:21.5,dividends:.04689895,bonds:.0225,gold:-.02325581,equity:-.02498356},{year:1948,cpi:23.7,dividends:.05686669,bonds:.0244,gold:-.03571429,equity:.03573837},{year:1949,cpi:24,dividends:.06163197,bonds:.0231,gold:-.00617284,equity:.09895833},{year:1950,cpi:23.5,dividends:.06812796,bonds:.0232,gold:-.00621118,equity:.25651659},{year:1951,cpi:25.4,dividends:.07009288,bonds:.0257,gold:-.0325,equity:.14049976},{year:1952,cpi:26.5,dividends:.05842621,bonds:.0268,gold:-.08268734,equity:.0822654},{year:1953,cpi:26.6,dividends:.05385791,bonds:.0283,gold:-.00704225,equity:-.02750191},{year:1954,cpi:26.9,dividends:.05721406,bonds:.0248,gold:-.00283688,equity:.3982718},{year:1955,cpi:26.7,dividends:.04344579,bonds:.0261,gold:.00142248,equity:.24016854},{year:1956,cpi:26.8,dividends:.03782559,bonds:.029,gold:.00142046,equity:.02899207},{year:1957,cpi:27.6,dividends:.03822738,bonds:.0346,gold:0,equity:-.09487123},{year:1958,cpi:28.6,dividends:.04336892,bonds:.0309,gold:0,equity:.35262646},{year:1959,cpi:29,dividends:.03158342,bonds:.0402,gold:.03546099,equity:.04332974},{year:1960,cpi:29.3,dividends:.03216733,bonds:.0472,gold:-.02739726,equity:.02912287},{year:1961,cpi:29.8,dividends:.03259662,bonds:.0384,gold:-.00422535,equity:.15656397},{year:1962,cpi:30,dividends:.02934226,bonds:.0408,gold:-.00282885,equity:-.05805704},{year:1963,cpi:30.4,dividends:.03284153,bonds:.0383,gold:.00283688,equity:.17506917},{year:1964,cpi:30.9,dividends:.03004147,bonds:.0417,gold:.00424328,equity:.1264879},{year:1965,cpi:31.2,dividends:.02922283,bonds:.0419,gold:-.0028169,equity:.08360427},{year:1966,cpi:31.8,dividends:.02936134,bonds:.0461,gold:.00282486,equity:-.09504929},{year:1967,cpi:32.9,dividends:.03410302,bonds:.0458,gold:.22535211,equity:.12539964},{year:1968,cpi:34.1,dividends:.03082912,bonds:.0553,gold:-.05747126,equity:.07323232},{year:1969,cpi:35.6,dividends:.03019608,bonds:.0604,gold:-.05121951,equity:-.11460784},{year:1970,cpi:37.8,dividends:.03502746,bonds:.0779,gold:.14652956,equity:.03521205},{year:1971,cpi:39.8,dividends:.03347952,bonds:.0624,gold:.43139014,equity:.10493101},{year:1972,cpi:41.1,dividends:.02971926,bonds:.0595,gold:.6679198,equity:.14617619},{year:1973,cpi:42.6,dividends:.02666106,bonds:.0646,gold:.72586401,equity:-.18826014},{year:1974,cpi:46.6,dividends:.03537613,bonds:.0699,gold:-.24204168,equity:-.24503173},{year:1975,cpi:52.1,dividends:.04993564,bonds:.075,gold:-.03962955,equity:.33489526},{year:1976,cpi:55.6,dividends:.03802736,bonds:.0774,gold:.2043059,equity:.0716498},{year:1977,cpi:58.5,dividends:.03946696,bonds:.0721,gold:.29174426,equity:-.1305395},{year:1978,cpi:62.5,dividends:.05222526,bonds:.0796,gold:.99999999,equity:.10481994},{year:1979,cpi:68.3,dividends:.05128202,bonds:.091,gold:.29607843,equity:.11222545},{year:1980,cpi:77.8,dividends:.05139766,bonds:.108,gold:-.32761809,equity:.19927863},{year:1981,cpi:87,dividends:.04661654,bonds:.1257,gold:.1175,equity:-.11804511},{year:1982,cpi:94.3,dividends:.05677749,bonds:.1459,gold:-.14988814,equity:.23017903},{year:1983,cpi:97.8,dividends:.04770152,bonds:.1046,gold:-.18947368,equity:.15315315},{year:1984,cpi:101.9,dividends:.04278846,bonds:.1167,gold:.06168831,equity:.03125},{year:1985,cpi:105.5,dividends:.04413362,bonds:.1138,gold:.19541284,equity:.21328671},{year:1986,cpi:109.6,dividends:.03813641,bonds:.0919,gold:.24456383,equity:.27041306},{year:1987,cpi:111.2,dividends:.03137996,bonds:.0708,gold:-.15693731,equity:-.05293006},{year:1988,cpi:115.7,dividends:.03535597,bonds:.0867,gold:-.02230891,equity:.13932136},{year:1989,cpi:121.1,dividends:.03438448,bonds:.0909,gold:-.03690773,equity:.19120533},{year:1990,cpi:127.4,dividends:.0327676,bonds:.0821,gold:-.08557742,equity:-.04259199},{year:1991,cpi:134.6,dividends:.03719531,bonds:.0809,gold:-.05705791,equity:.27831884},{year:1992,cpi:138.1,dividends:.02941742,bonds:.0703,gold:.17642643,equity:.0460248},{year:1993,cpi:142.6,dividends:.02852124,bonds:.066,gold:-.02169751,equity:.08675873},{year:1994,cpi:146.2,dividends:.0266883,bonds:.0575,gold:.00978474,equity:-.01636398},{year:1995,cpi:150.3,dividends:.02832886,bonds:.0778,gold:-.04651163,equity:.32062332},{year:1996,cpi:154.4,dividends:.02261206,bonds:.0565,gold:-.22208672,equity:.24706227},{year:1997,cpi:159.1,dividends:.01951567,bonds:.0658,gold:.00574813,equity:.25728903},{year:1998,cpi:161.6,dividends:.01614142,bonds:.0554,gold:.0053689,equity:.29626516},{year:1999,cpi:164.3,dividends:.0130395,bonds:.0472,gold:-.06063738,equity:.14159533},{year:2e3,cpi:168.8,dividends:.0116256,bonds:.0666,gold:.01412067,equity:-.0631037},{year:2001,cpi:175.1,dividends:.01210665,bonds:.0516,gold:.23960217,equity:-.14631298},{year:2002,cpi:177.1,dividends:.01380155,bonds:.0504,gold:.21735959,equity:-.21432017},{year:2003,cpi:181.7,dividends:.01799428,bonds:.0405,gold:.04397843,equity:.26419896},{year:2004,cpi:185.2,dividends:.01554056,bonds:.0415,gold:.17768595,equity:.04316922},{year:2005,cpi:190.7,dividends:.01667781,bonds:.0422,gold:.23918129,equity:.08237614},{year:2006,cpi:198.3,dividends:.0175252,bonds:.0442,gold:.31587227,equity:.11373003},{year:2007,cpi:202.416,dividends:.01761272,bonds:.0476,gold:.03974895,equity:-.03187844},{year:2008,cpi:211.08,dividends:.02025008,bonds:.0374,gold:.2503593,equity:-.37220401},{year:2009,cpi:211.143,dividends:.0323598,bonds:.0252,gold:.30597701,equity:.29806604},{year:2010,cpi:216.687,dividends:.01979684,bonds:.0373,gold:.07797923,equity:.14154755},{year:2011,cpi:220.223,dividends:.01790346,bonds:.0339,gold:.08687133,equity:.01400259},{year:2012,cpi:226.665,dividends:.02055749,bonds:.0197,gold:-.27614183,equity:.13826139},{year:2013,cpi:230.28,dividends:.0213028,bonds:.0191,gold:-.00435866,equity:.22114293},{year:2014,cpi:233.916,dividends:.01942536,bonds:.0286,gold:-.11611424,equity:.1369433},{year:2015,cpi:233.707,dividends:.019671167,bonds:.0188,gold:.1799434,equity:-.054028735229542},{year:2016,cpi:236.916,dividends:.02270058,bonds:.0209,gold:.00510098,equity:.18582299661672},{year:2017,cpi:242.839,dividends:.020186481,bonds:.0243,gold:.00904448,equity:.226221034357374},{year:2018,cpi:247.867,dividends:.017666738,bonds:.0258,gold:.09784074,equity:-.065384615734383},{year:2019,cpi:251.712,dividends:.020766616,bonds:.0271,gold:0,equity:.257273694016446},{year:2020,cpi:257.971,dividends:.0179,bonds:.0176,gold:0,equity:.157265},{year:2021,cpi:261.58,dividends:.0153,bonds:.0108,gold:0,equity:.2056}],w="DarkKhaki",P=[0,.6699999999999999,1.33,5,100],z=20,B=65,R=40,Y=65,M="translate("+Y+","+z+")",F=function(e){var t="."+e;p.q(t).remove()},N=function(e){var t=w;return 0>=e?t="Red":e<.6699999999999999?t="Orange":e>=1.33&&(t=e>=P[P.length-2]?"ForestGreen":"LimeGreen"),t},T=function(e){var t="#"+e;return p.p(t)},_=function(e){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},L=function(e){return Number(100*e).toFixed(2)+"%"},$=function(e){var t=[],a=e[e.length-1];return 0===a.adjEndValue?t+="failure at age "+a.age+" after "+e.length+" years\n\n":t+="at age "+a.age+" after "+e.length+" years - have "+a.adjEndValue+" remaining - cumulative CPI is "+a.cumulativeCPI+"\n\n",t},Z=function(e){for(var t=e.length,a=",",n="iteration, age, year, cumulativeCPI, beginValue, spend, actualSpend, equityReturn, equityAppr, bondReturn, bondAppr, divAppr, aggReturn, fees, endValue, adjEndValue\n",i=0;i<t;i++)n+=i+a+e[i].age+a+e[i].year+a+e[i].cumulativeCPI+a+e[i].beginValue+a+e[i].spend+a+e[i].actualSpend+a+e[i].equityReturn+a+e[i].equityAppr+a+e[i].bondReturn+a+e[i].bondAppr+a+e[i].divAppr+a+e[i].aggReturn+a+e[i].fees+a+e[i].endValue+a+e[i].adjEndValue+"\n";return n},H=function(e,t){var a=document.createElement("a");if(a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}else a.click()},G=a(12),U=a(286),J=a(288),W=a(289),K=a(1);var Q=function(e){return n.useEffect((function(){}),[e]),Object(K.jsx)("div",{children:Object(K.jsxs)(o.a,{direction:"row",children:[Object(K.jsx)(U.a,{children:Object(K.jsxs)(J.a,{children:[Object(K.jsx)(W.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Summary Results"}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(1-e.fails/e.cycles)," success (",e.cycles-e.fails," / ",e.cycles," cycles)"]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(e.numgreaterthanstart/e.cycles)," of cycles ended w/ more $$ than started"]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:[L(e.netpositivepct)," of years w/ higher appreciation than spend (all cycles)"]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["Minimum failure age : ",Number.POSITIVE_INFINITY===e.minfailage?"n/a":e.minfailage]})]})}),Object(K.jsx)(U.a,{children:Object(K.jsxs)(J.a,{children:[Object(K.jsx)(W.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"End Values ($)"}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",_(e.avgendvalue)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",_(e.maxendvalue)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["25% : ",_(e.quantile25endvalue)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["50% : ",_(e.quantile50endvalue)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["75% : ",_(e.quantile75endvalue)]})]})}),Object(K.jsx)(U.a,{children:Object(K.jsxs)(J.a,{children:[Object(K.jsx)(W.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Aggregate Returns (%)"}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["median : ",L(e.medianreturns)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["mean : ",L(e.avgreturns)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["min: ",L(e.minreturns)]}),Object(K.jsxs)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:["max : ",L(e.maxreturns)]})]})})]})})};var X=function(e){var t=Object(n.useState)(null),a=Object(G.a)(t,2),i=a[0],d=a[1],r="endvaluechartsvg",o="perrundata"+r,s="ttbinselectwrap",c=10,l=960-Y-B,u=200-c-0,y="translate("+Y+","+c+")",b=function(t){var a=t.srcElement.__data__,n=null,i=null,r=null,o=null;if(e.selectedbin!==a.x0){var s=a.x0/e.startvalue,c=function(e){for(var t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],a=0;a<e.length;a++){var n=p.f(e[a].cycleData,(function(e){return e.adjEndValue}));t[0]=Math.min(t[0],n[0]),t[1]=Math.max(t[1],n[1])}return t}(a);n=N(s),i=c[0],r=c[1],o=a.x0,d(a)}else d(null);e.zoomcallback(i,r,n,o)};return n.useEffect((function(){var t=function(){var t=P,a=[];a[0]=0,a[1]=.01;for(var n=1;n<t.length;n++)a[n+1]=t[n]*e.startvalue;return a},a=function(){var e=t(),a=function(e){for(var t=e.length,a=[],n=l/(t+1),i=0;i<=e.length;i++)a[i]=i*n;return a}(e);return p.o().domain(e).range(a)},n=T(r).append("g").attr("transform",y).append("g");F(o),function(n){var i=t(),d=function(t){return p.c().value((function(e){return e.adjEndCycleValue})).domain([t[0],t[t.length-1]]).thresholds(t)(e.metadata)}(i),r=a(),c=p.n().domain([0,p.i(d,(function(e){return e.length}))]).range([u,0]);n.append("g").attr("class",o).attr("transform","translate(0,"+u+")").call(p.a(r).tickFormat("").tickSize(20)),n.append("g").attr("class",o).call(p.b(c).tickFormat("").tickSizeOuter(10)),n.append("g").attr("class",o).attr("id","pathgroupid").selectAll(".histobarclass").data(d).enter().append("rect").attr("class",o).attr("x",1).attr("transform",(function(e){return"translate("+r(e.x0)+","+c(e.length)+")"})).attr("width",(function(e){return r(e.x1)-r(e.x0)-1})).attr("height",(function(e){return u-c(e.length)})).style("fill",(function(t){return N(t.x0/e.startvalue)})).style("opacity",(function(t){return function(t){var a=1;return null!==e.selectedbin&&t!==e.selectedbin&&(a=.2),a}(t.x0)})).on("click",b),function(t,a,n){for(var i,d=e.metadata.length,r=0;r<a.length;r++)if(0!==a[r].length){var c={binData:i=a[r],extBin:p.f(i,(function(e){return e.adjEndCycleValue})),extPctStartValue:p.f(i,(function(e){return e.pctOfStart})),binCount:i.length},l=(n(a[r].x1)-n(a[r].x0))/2+n(a[r].x0),y=u-45,b=t.append("g").attr("id",s).attr("class",o).append("text").attr("y",y).style("font-size","12px").attr("font-weight","bold").attr("text-anchor","middle").attr("pointer-events","none");b.append("tspan").text(L(a[r].length/d)).attr("x",l).attr("dy","0px").attr("pointer-events","none"),b.append("tspan").text(_(c.extBin[0])).attr("x",l).attr("dy","15px").attr("pointer-events","none"),c.extBin[1]!==c.extBin[0]&&b.append("tspan").text("-"+_(c.extBin[1])).attr("x",l).attr("dy","15px").attr("pointer-events","none")}}(n,d,r),function(e){e.append("g").attr("id",s).attr("class",o).append("g").append("text").text("select a bar to zoom to results").attr("transform",y).attr("pointer-events","none").attr("font-weight","bold")}(n)}(n)}),[e.metadata,e.startvalue,e.selectedbin,e.zoomcolor]),Object(K.jsxs)("div",{children:[Object(K.jsx)(h.a,{disabled:null===e.selectedbin,variant:"outlined",onClick:function(e){!function(e){for(var t=new Date,a="bin"+e.x0+"-"+t.getFullYear()+t.getMonth()+t.getDate()+"-"+t.getHours()+t.getMinutes()+t.getSeconds()+".csv",n=function(e){return(0===e.x0?"failure cycles ":"cycles range from "+e.x0+"-"+e.x1)+"\n\n"}(e),i=0;i<e.length;i++)n+="cycle "+i+"\n",n+=$(e[i].cycleData),n+=Z(e[i].cycleData),n+="\n\n";H(a,n)}(i)},children:"Save to CSV"}),Object(K.jsx)("svg",{id:r,width:960,height:200})]})};a(230);var ee=function(e){var t=Object(n.useState)(0),a=Object(G.a)(t,2),i=a[0],d=a[1],r=Object(n.useState)(0),o=Object(G.a)(r,2),s=o[0],c=o[1],l=Object(n.useState)(0),u=Object(G.a)(l,2),y=u[0],b=u[1],g=Object(n.useState)(0),v=Object(G.a)(g,2),j=v[0],h=v[1],f=Object(n.useState)(0),x=Object(G.a)(f,2),m=x[0],q=x[1],S=Object(n.useState)(0),O=Object(G.a)(S,2),V=O[0],A=O[1],E=Object(n.useState)(0),C=Object(G.a)(E,2),k=C[0],D=C[1],I=Object(n.useState)(0),w=Object(G.a)(I,2),P=w[0],N=w[1],L=Object(n.useState)(0),U=Object(G.a)(L,2),J=U[0],W=U[1],ee=Object(n.useState)(0),te=Object(G.a)(ee,2),ae=te[0],ne=te[1],ie=Object(n.useState)(0),de=Object(G.a)(ie,2),re=de[0],oe=de[1],se=Object(n.useState)(0),ce=Object(G.a)(se,2),le=ce[0],ue=ce[1],ye=Object(n.useState)(0),pe=Object(G.a)(ye,2),be=pe[0],ge=pe[1],ve="d3cycletarget",je="perrundatad3cycletarget",he="hoverLine",fe="ttwrapper",xe="ttbackground",me="ttage",qe="ttvalue",Se=960-Y-B,Oe=400-z-R,Ve=function(){var t=[e.currentage,e.lifeexpectancy];return p.n().domain(t).range([0,Se])},Ae=function(){var t=[+e.portmin,+e.portmax];return null!==e.minzoom&&null!==e.maxzoom&&(t[0]=+e.minzoom,t[1]=+e.maxzoom),t},Ee=function(e,t){var a=[e,t];return p.n().domain(a).range([Oe,0])},Ce=function(){return T(he)},ke=function(){return T(fe)},De=function(e){Ce().style("opacity",1),ke().attr("display",null),p.p(e.currentTarget).attr("stroke-width",5)},Ie=function(t){var a=p.d((function(e){return e.age})).left,n=Ve(),i=Ae(),d=Ee(i[0],i[1]),r=p.l(t),o=n.invert(r[0]),s=d.invert(r[1]),c=e.cycledata[0],l=a(c,o,1);if(c.length>=l){var u=c[l],y=n(u.age),b=y;Se<=y+75&&(b=y-75),T(me).text("age: "+u.age),T(qe).text(_(s));var g=ke().node().getBBox();T(xe).attr("width",g.width).attr("height",g.height),ke().attr("transform","translate("+b+","+r[1]+")"),Ce().attr("x",y),ke().attr("x",b)}},we=function(e){Ce().style("opacity",0),ke().attr("display","none"),p.p(e.currentTarget).attr("stroke-width",1.5)},Pe=function(e){!function(e){var t,a,n=(t=e[0].year,a=e[e.length-1].year,"cycledata"+t+a+".csv"),i=$(e);i+=Z(e),H(n,i)}(e.currentTarget.__data__)};return n.useEffect((function(){var t=function(t,a,n,i,d){var r=je+" portfolioline "+i.lineColor,o=1,s=De,c=Ie,l=we,u=Pe;null!=e.zoomcolor&&e.zoomcolor!==i.lineColor&&(o=.2,s=null,c=null,l=null,u=null),t.append("path").datum(d).attr("id",i.startYear).attr("class",r).attr("fill","none").style("opacity",o).attr("stroke",i.lineColor).attr("stroke-width",1.5).on("mouseenter",s).on("mouseover",c).on("mouseleave",l).on("click",u).attr("d",p.h().x((function(e){return a(e.age)})).y((function(e){return n(e.adjEndValue)})))},a=T(ve).append("g").attr("transform",M),n=a.append("g"),i=a.append("g");F(je),function(){for(var t=e.cycledata,a=e.cyclemeta,n=p.f(a,(function(e){return e.adjEndCycleValue})),i=p.j(a,(function(e){return e.adjEndCycleValue})),r=p.m(a,.25,(function(e){return e.adjEndCycleValue})),o=p.m(a,.5,(function(e){return e.adjEndCycleValue})),s=p.m(a,.75,(function(e){return e.adjEndCycleValue})),l=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var i=e[a][n];t.push(i.aggReturn)}return t}(t),u=p.j(l),y=p.k(l),g=p.f(l),v=function(e){for(var t=0,a=0;a<e.length;a++)0<e[a]&&t++;return t/e.length}(function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var i=e[a][n];t.push(i.netDelta)}return t}(t)),j=0,f=0,x=Number.POSITIVE_INFINITY,m=[],S=0;S<a.length;S++)1<a[S].pctOfStart?j++:a[S].fail&&(x=Math.min(a[S].failAge,x),m[f]=a[S].failAge,f++);d(i),c(n[1]),b(r),h(o),q(s),A(u),D(y),N(g[0]),W(g[1]),ne(v),ue(f),oe(j),ge(x)}(),function(a){var n=Ve(),i=Ae(),d=Ee(i[0],i[1]),r=e.cycledata,o=e.cyclemeta,s=+e.numcycles;!function(e,t,a){e.append("g").attr("class",je).attr("transform","translate(0,"+Oe+")").call(p.a(t)),e.append("g").attr("class",je).call(p.b(a).tickFormat(p.g("$,")))}(a,n,d);for(var c=0;c<s;c++)t(a,n,d,o[c],r[c]);!function(t,a){t.append("rect").attr("class",je).style("stroke-dasharray","10, 5").attr("fill","none").attr("stroke","black").attr("stroke-width",1.5).attr("x",0).attr("y",a(e.portfoliovalue)).attr("width",Se).attr("height",.25)}(a,d)}(n),function(e){var t=je+" tooltip",a=e.append("g").attr("id",fe).attr("class",t).attr("display","none");a.append("rect").style("opacity",.7).attr("id",xe).attr("class",t).attr("width",75).attr("height",50).attr("pointer-events","none").attr("fill","#e8e8e8");var n=a.append("g").append("text");n.attr("class",t).attr("pointer-events","none").attr("font-weight","bolder").attr("text-anchor","left"),n.append("tspan").attr("id",me).attr("class",t).attr("pointer-events","none").attr("x","5").attr("y","5").attr("dy","15px"),n.append("tspan").attr("id",qe).attr("class",t).attr("pointer-events","none").attr("x","5").attr("y","5").attr("dy","35px"),n.append("tspan").attr("class",t).text("click to download csv data").attr("pointer-events","none").attr("x","5").attr("y","5").attr("dy","55px"),e.append("g").append("rect").style("opacity",0).attr("id",he).attr("class",t).attr("pointer-events","none").attr("class","dotted").attr("stroke-width","1px").attr("width",".5px").attr("height",Oe)}(i)}),[e.portfoliovalue,e.portmin,e.portmax,e.cycledata,e.cyclemeta,e.numcycles,e.currentage,e.lifeexpectancy,e.minzoom,e.maxzoom,e.zoomcolor,e.selectedbin]),Object(K.jsxs)("div",{children:[Object(K.jsx)(Q,{fails:le,cycles:e.numcycles,numgreaterthanstart:re,minfailage:be,avgendvalue:i,quantile25endvalue:y,quantile50endvalue:j,quantile75endvalue:m,maxendvalue:s,medianreturns:k,avgreturns:V,minreturns:P,maxreturns:J,netpositivepct:ae}),Object(K.jsx)("svg",{id:ve,width:960,height:400}),Object(K.jsx)(X,{startvalue:e.portfoliovalue,metadata:e.cyclemeta,cyclechartid:ve,zoomcallback:e.zoomcallback,zoomcolor:e.zoomcolor,selectedbin:e.selectedbin})]})},te=125e4,ae=I[0].year,ne=I[I.length-1].year,ie="montecarlo",de="historical",re=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentAgeState:62,lifeExpectancyState:95,portfolioValueState:te,spendValueState:5e4,spendModelState:"dollars",stockAllocPctState:80,feePctState:.18,monteCarloProjectionState:false,ssOnState:!1,socialSecurityIncomeState:39312,socialSecurityAgeState:67,useAllHistDataState:!0,startDataYearState:ae,endDataYearState:ne,minZoomValueState:null,maxZoomValueState:null,zoomColorState:null,selectedBinState:null},n.sourceData=D(n.state.monteCarloProjectionState,n.state.lifeExpectancyState-n.state.currentAgeState+1,n.state.startDataYearState,n.state.endDataYearState),n}return Object(l.a)(a,[{key:"zoomChart",value:function(e,t,a,n){this.setState({minZoomValueState:e}),this.setState({maxZoomValueState:t}),this.setState({zoomColorState:a}),this.setState({selectedBinState:n})}},{key:"render",value:function(){var e=this,t=this.state.portfolioValueState,a=this.state.portfolioValueState,n=[],i=[],d=function(t){var a=e.state.socialSecurityAgeState,n=e.state.ssOnState?e.state.socialSecurityIncomeState:0;t.spend=e.state.spendValueState,t.actualSpend=t.spend*t.cumulativeCPI;var i=a<=t.age?n*t.cumulativeCPI:0;t.actualSpend-=i,t.endValue=t.beginValue-t.actualSpend},r=function(t,a,n){var i,d=e.state.stockAllocPctState/100,r=1-d;t.beginEquityValue=t.endValue*d,t.beginBondValue=t.endValue*r,t.equityAppr=t.beginEquityValue*t.equityReturn,t.divAppr=t.beginEquityValue*I[n[a]].dividends,t.bondAppr=function(e,t,a){var n=0,i=a[t],d=i+1;if(I.length<=d)n=e*I[i].bonds;else{var r=(1-Math.pow(1+I[d].bonds,-9))*I[i].bonds;r/=I[d].bonds;var o=1/Math.pow(1+I[d].bonds,9);n=e*(r+(o-=1)+I[i].bonds)}return n}(t.beginBondValue,a,n),t.bondReturn=t.bondAppr/t.beginBondValue,t.endEquityValue=t.beginEquityValue+t.equityAppr+t.divAppr,t.endBondValue=t.beginBondValue+t.bondAppr,t.endValue=t.endEquityValue+t.endBondValue,t.appr=t.equityAppr+t.divAppr+t.bondAppr,t.adjAppr=t.appr/t.cumulativeCPI,t.aggReturn=(i=t.beginValue,t.appr/i)},s=function(t){var a=e.state.feePctState/100,n=t.endValue*a,i=n*(t.endEquityValue/t.endValue),d=n*(t.endBondValue/t.endValue);t.endEquityValue-=i,t.endBondValue-=d,t.endValue=t.endEquityValue+t.endBondValue,t.fees=n},c=function(e){e.adjEndValue=e.endValue/e.cumulativeCPI},l=function(t,a,n,i){var d=1;if(e.state.monteCarloProjectionState){var r=0<n?n-1:n;d=i+(I[n].cpi/I[r].cpi-1)}else d=a/t;return d},u=function(t,a,n){for(var i,o=[],u=I[n[t]].cpi,y=1,p=0;p<a;p++){var b=n[t+p],g=I[b],v={year:g.year,age:e.state.currentAgeState+p,beginValue:p>0?o[p-1].endValue:e.state.portfolioValueState,beginEquityValue:0,endEquityValue:0,beginBondValue:0,endBondValue:0,equityReturn:g.equity,cumulativeCPI:0===p?1:l(u,g.cpi,b,y),spend:0,endValue:0,equityAppr:0,divAppr:0,bondReturn:0,bondAppr:0,aggReturn:0,actualSpend:0,fees:0,netDelta:0,adjEndValue:0,appr:0,adjAppr:0};if(y=v.cumulativeCPI,d(v),0>=v.endValue){v.endValue=v.adjEndValue=0,o.push(v);break}r(v,t+p,n),s(v),(i=v).netDelta=i.appr-i.actualSpend-i.fees,c(v),o.push(v)}return o},y=function(t){var a=p.f(t,(function(e){return e.adjEndValue})),n=p.j(t,(function(e){return e.adjEndValue})),i=p.k(t,(function(e){return e.adjEndValue})),d=p.r(t,(function(e){return e.actualSpend})),r=p.r(t,(function(e){return e.appr})),o=p.r(t,(function(e){return e.adjAppr})),s=t[t.length-1].adjEndValue/e.state.portfolioValueState,c=N(s),l=p.f(t,(function(e){return e.aggReturn})),u=p.j(t,(function(e){return e.aggReturn})),y=p.k(t,(function(e){return e.aggReturn}));return{startCycleValue:e.state.portfolioValueState,endCycleValue:t[t.length-1].endValue,adjEndCycleValue:t[t.length-1].adjEndValue,extent:a,mean:n,median:i,pctOfStart:s,totalSpend:d,totalAppreciation:r,totalAdjAppreciation:o,extAggReturn:l,avgAggReturn:u,medAggReturn:y,fail:0>=t[t.length-1].adjEndValue,failAge:0>=t[t.length-1].adjEndValue?t[t.length-1].age:void 0,startYear:t[0].year,cycleData:t,lineColor:c}};return null!=this.sourceData&&function(d){for(var r=e.state.lifeExpectancyState-e.state.currentAgeState+1,o=d.length/r,s=0;s<o;s++){var c=u(s*r,r,d),l=y(c);i[s]=l,n[s]=c,t=Math.min(t,l.extent[0]),a=Math.max(a,l.extent[1])}}(this.sourceData),Object(K.jsx)("div",{children:Object(K.jsxs)(o.a,{direction:"row",children:[Object(K.jsx)("div",{className:"Inputs",children:Object(K.jsx)("header",{className:"Inputs-header",children:Object(K.jsx)(j.a,{sx:{bgcolor:"background.paper",boxShadow:10,borderRadius:10,p:2,minWidth:300},children:Object(K.jsxs)(m.a,{children:[Object(K.jsxs)(q.a,{children:[Object(K.jsx)(x.a,{required:!0,label:"Age",sx:{m:"10px"},type:"number",value:this.state.currentAgeState,onChange:function(t){var a=+t.target.value;a<e.state.lifeExpectancyState&&(e.sourceData=D(e.state.monteCarloProjectionState,e.state.lifeExpectancyState-a+1,e.state.startDataYearState,e.state.endDataYearState),e.setState({currentAgeState:a}))},InputLabelProps:{shrink:!0}}),Object(K.jsx)(h.a,{variant:"outlined",onClick:function(e){!function(e){for(var t=new Date,a="allcycles"+t.getFullYear()+t.getMonth()+t.getDate()+"-"+t.getHours()+t.getMinutes()+t.getSeconds()+".csv",n=[],i=0;i<e.length;i++)n+="cycle "+i+"\n",n+=$(e[i]),n+=Z(e[i]),n+="\n\n";H(a,n)}(n)},children:"Save to CSV"})]}),Object(K.jsx)(q.a,{children:Object(K.jsxs)("div",{children:["Life expectancy : ",this.state.lifeExpectancyState]})}),Object(K.jsx)(q.a,{divider:!0,children:Object(K.jsx)(S.a,{id:"aExpect",label:"Life Expectancy",marks:!0,step:1,min:this.state.currentAgeState,max:120,valueLabelDisplay:"auto",value:this.state.lifeExpectancyState,onChange:function(t,a){a>e.state.currentAgeState&&(e.sourceData=D(e.state.monteCarloProjectionState,a-e.state.currentAgeState+1,e.state.startDataYearState,e.state.endDataYearState),e.setState({lifeExpectancyState:a}))}})}),Object(K.jsxs)(q.a,{divider:!0,children:[Object(K.jsx)(x.a,{required:!0,sx:{m:"10px"},type:"number",label:"Portfolio Value $",defaultValue:te,onChange:function(t){var a=+t.target.value;e.setState({portfolioValueState:a})}}),Object(K.jsx)(x.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Spend $",defaultValue:5e4,onChange:function(t){var a=+t.target.value;e.setState({spendValueState:a})}})]}),Object(K.jsxs)(q.a,{children:[Object(K.jsx)("div",{children:"Stocks: "}),Object(K.jsxs)("div",{id:"sAlloc",children:[this.state.stockAllocPctState,"%"]}),Object(K.jsx)("div",{children:"\xa0 Bonds: "}),Object(K.jsxs)("div",{id:"bAlloc",children:[100-this.state.stockAllocPctState,"%"]})]}),Object(K.jsx)(q.a,{children:Object(K.jsx)(S.a,{id:"aAlloc",label:"Stock Allocation",marks:!0,step:5,valueLabelDisplay:"auto",defaultValue:80,onChange:function(t){var a=+t.target.value;e.setState({stockAllocPctState:a})}})}),Object(K.jsx)(q.a,{divider:!0,children:Object(K.jsx)(x.a,{required:!0,sx:{m:"10px"},type:"number",label:"Annual Fee %",defaultValue:.18,onChange:function(t){var a=+t.target.value;e.setState({feePctState:a})}})}),Object(K.jsx)(q.a,{children:Object(K.jsxs)(b.a,{children:[Object(K.jsx)(g.a,{children:Object(K.jsx)(A.a,{children:Object(K.jsxs)(C.a,{"aria-labelledby":"projectionTypeID",defaultValue:de,name:"radio-buttons-group",row:!0,onChange:function(t,a){var n=ie===a;e.sourceData=D(n,e.state.lifeExpectancyState-e.state.currentAgeState+1,e.state.startDataYearState,e.state.endDataYearState),e.setState({monteCarloProjectionState:n})},children:[Object(K.jsx)(V.a,{value:de,control:Object(K.jsx)(k.a,{}),label:"historical"}),Object(K.jsx)(V.a,{value:ie,control:Object(K.jsx)(k.a,{}),label:"monte carlo"})]})})}),Object(K.jsxs)(v.a,{children:[Object(K.jsxs)("div",{disabled:this.state.monteCarloProjectionState,children:["Historical data from ",this.state.startDataYearState," to ",this.state.endDataYearState]}),Object(K.jsx)(S.a,{disabled:this.state.monteCarloProjectionState,marks:!0,step:1,min:ae,max:ne,defaultValue:[ae,ne],value:[this.state.startDataYearState,this.state.endDataYearState],valueLabelDisplay:"auto",onChange:function(t,a){var n=e.state.lifeExpectancyState-e.state.currentAgeState+1;a[1]-a[0]>=n?(e.sourceData=D(e.state.monteCarloProjectionState,n,a[0],a[1]),e.setState({startDataYearState:a[0]}),e.setState({endDataYearState:a[1]})):console.log("bzzt - range smaller than user lifetime")}})]})]})}),Object(K.jsx)(q.a,{children:Object(K.jsxs)(b.a,{children:[Object(K.jsx)(g.a,{children:Object(K.jsx)(O.a,{children:Object(K.jsx)(V.a,{control:Object(K.jsx)(f.a,{}),label:"include Social Security income",onChange:function(t,a){e.setState({ssOnState:a})}})})}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(x.a,{disabled:!this.state.ssOnState,sx:{m:"10px"},type:"number",label:"Annual SS $",defaultValue:39312,onChange:function(t){var a=+t.target.value;e.setState({socialSecurityIncomeState:a})}}),Object(K.jsxs)(A.a,{disabled:!this.state.ssOnState,component:"fieldset",children:[Object(K.jsx)(E.a,{component:"legend",children:"Start at age"}),Object(K.jsxs)(C.a,{"aria-label":"ss-start",onChange:function(t){var a=+t.target.value;e.setState({socialSecurityAgeState:a})},row:!0,defaultValue:"67",name:"radio-buttons-group",children:[Object(K.jsx)(V.a,{value:"62",control:Object(K.jsx)(k.a,{}),label:"62"}),Object(K.jsx)(V.a,{value:"67",control:Object(K.jsx)(k.a,{}),label:"67"}),Object(K.jsx)(V.a,{value:"70",control:Object(K.jsx)(k.a,{}),label:"70"})]})]})]})]})})]})})})}),Object(K.jsx)(ee,{id:"chartComponent",portfoliovalue:this.state.portfolioValueState,portmin:t,portmax:a,cycledata:n,cyclemeta:i,numcycles:null!=this.sourceData?this.sourceData.length/(this.state.lifeExpectancyState-this.state.currentAgeState+1):0,currentage:this.state.currentAgeState,lifeexpectancy:this.state.lifeExpectancyState,minzoom:this.state.minZoomValueState,maxzoom:this.state.maxZoomValueState,zoomcolor:this.state.zoomColorState,zoomcallback:this.zoomChart.bind(this),selectedbin:this.state.selectedBinState})]})})}}]),a}(n.Component);var oe=function(){return Object(K.jsxs)(o.a,{spacing:5,children:[Object(K.jsx)(s.a,{children:" SWR Calculator"}),Object(K.jsx)(o.a,{direction:"row",children:Object(K.jsx)(re,{})})]})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,299)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,d=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),d(e),r(e)}))};r.a.render(Object(K.jsx)(i.a.StrictMode,{children:Object(K.jsx)(oe,{})}),document.getElementById("root")),se()}},[[232,1,2]]]);
//# sourceMappingURL=main.a1723275.chunk.js.map