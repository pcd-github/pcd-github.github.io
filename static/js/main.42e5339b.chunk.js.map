{"version":3,"sources":["histdata.js","common.js","summary.js","endvaluechart.js","chart.js","swrcalc.js","App.js","reportWebVitals.js","index.js"],"names":["generateSourceData","mcProjection","thisLifetime","startDataYear","endDataYear","minVal","maxVal","calcSourceData","cycleCount","lifespan","retVal","Math","max","getNumberOfCycles","startOffset","histData","year","i","j","histIndex","length","ceil","floor","random","cpi","dividends","bonds","gold","equity","midValueColorString","thresholdValues","margin","marginTranslate","cleanupPrev","perRunClassID","perRunSelect","d3","remove","getColorStringForRelativeValue","ratioValue","retValue","round","Number","EPSILON","findByID","elementID","selectID","makeCurrency","num","Intl","NumberFormat","style","currency","format","makePct","toFixed","dumpCycleHeader","cycleData","cycleHeader","lastIteration","adjEndValue","age","cumulativeCPI","dumpCycleToCSV","cycleLength","comma","dataset","beginValue","spend","actualSpend","equityReturn","equityAppr","bondReturn","bondAppr","divAppr","aggReturn","fees","endValue","downloadCSV","filename","text","pom","document","createElement","setAttribute","encodeURIComponent","createEvent","event","initEvent","dispatchEvent","click","SummaryCards","props","React","Stack","direction","Card","CardContent","Typography","variant","component","color","fails","cycles","POSITIVE_INFINITY","minfailage","numgreaterthanstart","netpositivepct","quantile50endvalue","avgendvalue","maxendvalue","quantile90endvalue","quantile75endvalue","quantile25endvalue","quantile10endvalue","medianreturns","avgreturns","minreturns","maxreturns","EndValueChart","useState","selectedBinDataState","setSelectedBinDataState","svgBinChartID","perRunClass","ttBinSelectWrapID","evMargin","boundedWidth","boundedHeight","evMarginTranslate","handleMouseDown","e","thisBin","srcElement","__data__","colorString","zoomMin","zoomMax","selectedBin","selectedbin","x0","valueRatio","startvalue","binExt","NEGATIVE_INFINITY","oneExt","d","min","getBinExtents","zoomcallback","getCurrencyThresholds","pctThresholds","currencyThresholds","getXScaleForAxis","thresholdRange","numThresholds","thresholdInc","getThresholdRange","domain","range","chartGroup","append","attr","svg","currencyThresholdValues","bins","value","adjEndCycleValue","thresholds","binFunc","metadata","createBins","xScale","yScale","call","tickFormat","tickSize","tickSizeOuter","selectAll","data","enter","x1","getBinOpacity","on","allBinData","numCycles","binMeta","pctOfStart","x","y","axisText","extBin","drawBinCaption","drawSelectionText","drawHistogram","zoomcolor","Button","disabled","onClick","binData","currentdate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","csvData","dumpBinHeader","dumpBinToCSVFile","id","width","height","Chart","avgAdjEndValueState","setAvgAdjEndValueState","maxAdjEndValueState","setMaxAdjEndValueState","quantile10EndValueState","setQuantile10AdjEndValueState","quantile25EndValueState","setQuantile25AdjEndValueState","quantile50EndValueState","setQuantile50AdjEndValueState","quantile75EndValueState","setQuantile75AdjEndValueState","quantile90EndValueState","setQuantile90AdjEndValueState","avgReturnsState","setAvgReturnsState","medianReturnsState","setMedianReturnsState","minReturnsState","setMinReturnsState","maxReturnsState","setMaxReturnsState","pctPositiveNetState","setPctPositiveNetState","numGreaterThanStartState","setNumGreaterThanStartState","numFailsState","setNumFailsState","minFailAgeState","setMinFailAgeState","svgCycleChartID","getPerRunClassName","hoverLineID","ttWrapID","ttBackID","ttAgeID","ttValueID","getXScale","xExt","currentage","lifeexpectancy","getYDomain","yDom","portmin","portmax","minzoom","maxzoom","getYScale","rangeMin","rangeMax","yExt","getHoverLine","getTooltipWrapper","handleMouseOver","currentTarget","handleMouseMove","bisect","left","xScaleIn","yScaleIn","coords","invert","y0","oneCycleData","cycledata","selectedData","clientX","tooltipX","ttBounds","node","getBBox","handleMouseLeave","handleMouseClick","first","last","dumpCycleToCSVFile","drawPortfolioLine","oneCycleMeta","oneCycle","classNames","lineColor","lineOpacity","enterHandler","hoverHandler","leaveHandler","clickHandler","datum","startYear","tooltipGroup","allCycles","allCyclesMeta","cyclemeta","extAdjEnd","avgAdjEnd","quantile10","quantile25","quantile50","quantile75","quantile90","aggReturns","allCycleData","iCycle","oneYear","push","getAggReturns","avgReturns","medianReturns","extReturns","pctPositiveNet","netDeltas","numPos","getPctPositiveNet","netDelta","getNetDeltas","numGreaterThanStart","numFails","minFailAge","failAges","fail","failAge","calcSummaryData","allCyclesData","numcycles","drawAxes","portfoliovalue","drawReferenceLine","drawChart","className","tooltipWrapper","tooltipText","prepHoverStuff","cyclechartid","defaultPortfolioValue","defaultStartDataYear","defaultEndDataYear","monteCarloString","historicalString","SWRCalc","state","currentAgeState","lifeExpectancyState","portfolioValueState","spendValueState","spendModelState","stockAllocPctState","feePctState","monteCarloProjectionState","ssOnState","socialSecurityIncomeState","socialSecurityAgeState","useAllHistDataState","startDataYearState","endDataYearState","minZoomValueState","maxZoomValueState","zoomColorState","selectedBinState","sourceData","minZoom","maxZoom","colorKey","this","setState","portMin","portMax","applySpend","thisCycle","ssAge","ssIncome","adjustment","applyAppreciation","cycleNum","stockPct","bondPct","beginEquityValue","beginBondValue","bondStake","sourceIndex","h0","h1","bg1","pow","bg2","calcBondYield","endEquityValue","endBondValue","appr","adjAppr","applyFees","feePct","totalFees","equityFees","bondFees","calcAdjustedEndValue","calcCumulativeCPI","startCPI","thisYearCPI","sourceDataIndex","prevCCPI","prevYearIndex","runCycle","startIndex","numYears","prevYearCCPI","thisIndex","thisYearSource","obj","calcCycleMeta","extAdjEndValue","avgAdjEndValue","medAdjEndValue","totalSpend","totalAppr","totalAdjAppr","pctStart","thisLineColor","extAggReturn","avgAggReturn","medAggReturn","undefined","srcData","lifetime","cycleMeta","extent","calcCycles","Box","sx","bgcolor","boxShadow","borderRadius","p","minWidth","List","ListItem","TextField","required","label","m","type","onChange","newValue","target","InputLabelProps","shrink","dumpAllToCSVFile","divider","Slider","marks","step","valueLabelDisplay","defaultValue","Accordion","AccordionSummary","AccordionDetails","FormControl","RadioGroup","name","row","mcProj","FormControlLabel","control","Radio","console","log","FormGroup","Checkbox","FormLabel","zoomChart","bind","App","spacing","AppBar","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.42e5339b.chunk.js","sourcesContent":["import * as d3 from \"d3\";\n\nexport const getAvgEquityReturn = () => {\n    return d3.mean(histData, (d) => d.equity);\n}\n\nexport const getStdDevEquityReturn = () => {\n    return d3.deviation(histData, (d) => d.equity);\n}\n\nconst getNumberOfCycles = (mcProjection, lifespan, startDataYear, endDataYear) => {\n    const defaultMonteCarloCycles = 1000;\n    var retVal = defaultMonteCarloCycles;\n\n    if (!mcProjection) {\n        retVal = Math.max(0, (endDataYear - startDataYear + 2) \n                  - lifespan);\n    }\n\n    return retVal;\n}   \n\nconst getRandomInteger = (minVal, maxVal) => {\n    minVal = Math.ceil(minVal);\n    maxVal = Math.floor(maxVal);\n    return Math.floor(Math.random() * (maxVal - minVal + 1)) + minVal;        \n}\n\nexport const generateSourceData = (mcProjection, thisLifetime, startDataYear, endDataYear) => {\n\n    var calcSourceData = [];\n    var cycleCount = getNumberOfCycles(mcProjection, thisLifetime, startDataYear, endDataYear);\n    var startOffset = startDataYear - histData[0].year;\n\n\n    // TODO - factor in start/end data range.\n    for (var i = 0; i < cycleCount; i++) {\n        for (var j = 0; j < thisLifetime; j++) {\n            var histIndex = (mcProjection) \n                             ?  getRandomInteger(0, histData.length - 1)\n                             : (startOffset + i + j) ;\n            calcSourceData[(i * thisLifetime) + j] = histIndex;\n        }\n    }\n\n    return calcSourceData;\n}    \n\nexport const checkDistribution = (indeces) => {\n    var countArray = [];\n\n    for (var i = 0; i < histData.length; i++) {\n        countArray[i] = 0;\n    }\n\n    for (i = 0; i < indeces.length; i++) {\n        countArray[indeces[i]]++;\n    }\n\n    for (i = 0; i < countArray.length; i++) {\n        console.log(i + ',' + histData[i].year + ',' + countArray[i]);\n    }\n}\n\n\nexport const histData = [\n    {\n        year: 1871, cpi: 12.46, dividends: 0.05855856,\n        bonds: 0.0532, gold: 0.02656043, equity: 0.09459459\n    },\n    {\n        year: 1872, cpi: 12.65, dividends: 0.05417695,\n        bonds: 0.0536, gold: -0.01940492, equity: 0.05144033\n    },\n    {\n        year: 1873, cpi: 12.94, dividends: 0.05919765,\n        bonds: 0.0558, gold: 0.01539138, equity: -0.08806262\n    },\n    {\n        year:1874, cpi: 12.37, dividends: 0.07081545,\n        bonds: 0.0547, gold: 0.01948896, equity: -0.02575107\n    },\n    {\n        year:1875, cpi: 11.51, dividends: 0.07213656,\n        bonds: 0.0507, gold: -0.0526763, equity: -0.01762115\n    },\n    {\n        year:1876, cpi: 10.85, dividends: 0.06726457,\n        bonds: 0.0459, gold: -0.0470852, equity: -0.20403587\n    },\n    {\n        year:1877, cpi: 10.94, dividends: 0.08191549,\n        bonds: 0.0445, gold: -0.02635294, equity: -0.08450704\n    },\n    {\n        year:1878, cpi: 9.23, dividends: 0.05821538,\n        bonds: 0.0434, gold: -0.00096665, equity: 0.10153846\n    },\n    {\n        year:1879, cpi: 8.28, dividends: 0.05075419,\n        bonds: 0.0422, gold: 0, equity: 0.4273743\n    },\n    {\n        year:1880, cpi: 9.99, dividends: 0.04011742,\n        bonds: 0.0402, gold: 0, equity: 0.21135029\n    },\n    {\n        year:1881, cpi: 9.42, dividends: 0.04281099,\n        bonds: 0.037, gold: 0, equity: -0.04361874\n    },\n    {\n        year:1882, cpi: 10.18, dividends: 0.05405405,\n        bonds: 0.0362, gold: 0, equity: -0.01858108\n    },\n    {\n        year:1883, cpi: 9.99, dividends: 0.05521515,\n        bonds: 0.0363, gold: 0, equity: -0.10843373\n    },\n    {\n        year:1884, cpi: 9.23, dividends: 0.06337838,\n        bonds: 0.0362, gold: 0, equity: -0.18146718\n    },\n    {\n        year:1885, cpi: 8.28, dividends: 0.07174528,\n        bonds: 0.0352, gold: 0, equity: 0.22641509\n    },\n    {\n        year:1886, cpi: 7.99, dividends: 0.04582692,\n        bonds: 0.0337, gold: 0, equity: 0.07307692\n    },\n    {\n        year:1887, cpi: 7.99, dividends: 0.03987455,\n        bonds: 0.0352, gold: 0, equity: -0.0483871\n    },\n    {\n        year:1888, cpi: 8.37, dividends: 0.04676083,\n        bonds: 0.0367, gold: 0, equity: -0.01318267\n    },\n    {\n        year:1889, cpi: 7.99, dividends: 0.04374046,\n        bonds: 0.0345, gold: 0, equity: 0.02671756\n    },\n    {\n        year:1890, cpi: 7.61, dividends: 0.04089219,\n        bonds: 0.0342, gold: 0, equity: -0.10037175\n    },\n    {\n        year:1891, cpi: 7.8, dividends: 0.04545455,\n        bonds: 0.0362, gold: 0, equity: 0.13842975\n    },\n    {\n        year:1892, cpi: 7.33, dividends: 0.04023593,\n        bonds: 0.036, gold: 0, equity: 0.01814882\n    },\n    {\n        year:1893, cpi: 7.9, dividends: 0.04292335,\n        bonds: 0.0375, gold: 0, equity: -0.22994652\n    },\n    {\n        year:1894, cpi: 6.85, dividends: 0.05710648,\n        bonds: 0.037, gold: 0, equity: -0.0162037\n    },\n    {\n        year:1895, cpi: 6.57, dividends: 0.04901176,\n        bonds: 0.0346, gold: 0, equity: 0.00470588\n    },\n    {\n        year:1896, cpi: 6.66, dividends: 0.04430913,\n        bonds: 0.036, gold: 0, equity: -0.0117096\n    },\n    {\n        year:1897, cpi: 6.47, dividends: 0.04265403,\n        bonds: 0.034, gold: 0, equity: 0.1563981\n    },\n    {\n        year:1898, cpi: 6.66, dividends: 0.03723361,\n        bonds: 0.0335, gold: 0, equity: 0.24590164\n    },\n    {\n        year:1899, cpi: 6.76, dividends: 0.03302632,\n        bonds: 0.031, gold: 0, equity: 0.00328947\n    },\n    {\n        year:1900, cpi: 7.9, dividends: 0.03565574,\n        bonds: 0.0315, gold: 0, equity: 0.15901639\n    },\n    {\n        year:1901, cpi: 7.71, dividends: 0.04267327,\n        bonds: 0.031, gold: 0, equity: 0.14851485\n    },\n    {\n        year:1902, cpi: 7.9, dividends: 0.03950739,\n        bonds: 0.0318, gold: 0, equity: 0.04187192\n    },\n    {\n        year:1903, cpi: 8.66, dividends: 0.03920804,\n        bonds: 0.033, gold: 0, equity: -0.21040189\n    },\n    {\n        year:1904, cpi: 8.28, dividends: 0.0519012,\n        bonds: 0.034, gold: 0, equity: 0.26197605\n    },\n    {\n        year:1905, cpi: 8.47, dividends: 0.03697509,\n        bonds: 0.0348, gold: 0, equity: 0.17081851\n    },\n    {\n        year:1906, cpi: 8.47, dividends: 0.03402229,\n        bonds: 0.0343, gold: 0, equity: -0.03140831\n    },\n    {\n        year:1907, cpi: 8.85, dividends: 0.04218619,\n        bonds: 0.0367, gold: 0, equity: -0.2834728\n    },\n    {\n        year:1908, cpi: 8.66, dividends: 0.06375182,\n        bonds: 0.0387, gold: 0, equity: 0.32262774\n    },\n    {\n        year:1909, cpi: 8.94, dividends: 0.04451435,\n        bonds: 0.0376, gold: 0, equity: 0.11258278\n    },\n    {\n        year:1910, cpi: 9.9, dividends: 0.04389881,\n        bonds: 0.0391, gold: 0, equity: -0.08035714\n    },\n    {\n        year:1911, cpi: 9.23, dividends: 0.05070119,\n        bonds: 0.0398, gold: 0, equity: -0.01618123\n    },\n    {\n        year:1912, cpi: 9.13, dividends: 0.05162281,\n        bonds: 0.0401, gold: 0, equity: 0.01973684\n    },\n    {\n        year:1913, cpi: 9.8, dividends: 0.0516129,\n        bonds: 0.0445, gold: 0, equity: -0.1\n    },\n    {\n        year:1914, cpi: 10, dividends: 0.0567503,\n        bonds: 0.0416, gold: 0, equity: -0.10633214\n    },\n    {\n        year:1915, cpi: 10.1, dividends: 0.05625668,\n        bonds: 0.0424, gold: 0, equity: 0.2473262\n    },\n    {\n        year:1916, cpi: 10.4, dividends: 0.04724544,\n        bonds: 0.0405, gold: 0, equity: 0.02572347\n    },\n    {\n        year:1917, cpi: 11.7, dividends: 0.05964472,\n        bonds: 0.0423, gold: 0, equity: -0.24660397\n    },\n    {\n        year:1918, cpi: 14, dividends: 0.09431345,\n        bonds: 0.0457, gold: 0, equity: 0.0887656\n    },\n    {\n        year:1919, cpi: 16.5, dividends: 0.07219108,\n        bonds: 0.045, gold: 0, equity: 0.12484076\n    },\n    {\n        year:1920, cpi: 19.3, dividends: 0.05983012,\n        bonds: 0.0497, gold: 0, equity: -0.19479049\n    },\n    {\n        year:1921, cpi: 19, dividends: 0.07113924,\n        bonds: 0.0509, gold: 0, equity: 0.02672293\n    },\n    {\n        year:1922, cpi: 16.9, dividends: 0.06358904,\n        bonds: 0.043, gold: 0, equity: 0.21917808\n    },\n    {\n        year:1923, cpi: 16.8, dividends: 0.05749438,\n        bonds: 0.0436, gold: 0, equity: -0.00786517\n    },\n    {\n        year:1924, cpi: 17.3, dividends: 0.06021518,\n        bonds: 0.0406, gold: 0, equity: 0.198188\n    },\n    {\n        year:1925, cpi: 17.3, dividends: 0.05238185,\n        bonds: 0.0386, gold: 0, equity: 0.19565217\n    },\n    {\n        year:1926, cpi: 17.9, dividends: 0.04802372,\n        bonds: 0.0368, gold: 0, equity: 0.05928854\n    },\n    {\n        year:1927, cpi: 17.5, dividends: 0.05199254,\n        bonds: 0.0334, gold: 0, equity: 0.30820896\n    },\n    {\n        year:1928, cpi: 17.3, dividends: 0.0443069,\n        bonds: 0.0333, gold: 0, equity: 0.41814033\n    },\n    {\n        year:1929, cpi: 17.1, dividends: 0.03459372,\n        bonds: 0.036, gold: 0, equity: -0.12670957\n    },\n    {\n        year:1930, cpi: 17.1, dividends: 0.04471672,\n        bonds: 0.0329, gold: 0, equity: -0.26393367\n    },\n    {\n        year:1931, cpi: 15.9, dividends: 0.06049437,\n        bonds: 0.0334, gold: 0, equity: -0.48060075\n    },\n    {\n        year:1932, cpi: 14.3, dividends: 0.09557831,\n        bonds: 0.0368, gold: 0.56361877, equity: -0.14578313\n    },\n    {\n        year:1933, cpi: 12.9, dividends: 0.06981664,\n        bonds: 0.0331, gold: 0.08292079, equity: 0.48660085\n    },\n    {\n        year:1934, cpi: 13.2, dividends: 0.04182163,\n        bonds: 0.0312, gold: 0, equity: -0.12144213\n    },\n    {\n        year:1935, cpi: 13.6, dividends: 0.04859611,\n        bonds: 0.0279, gold: 0, equity: 0.48596112\n    },\n    {\n        year:1936, cpi: 13.8, dividends: 0.03488372,\n        bonds: 0.0265, gold: 0, equity: 0.27834302\n    },\n    {\n        year:1937, cpi: 14.1, dividends: 0.04150085,\n        bonds: 0.0268, gold: 0, equity: -0.35702103\n    },\n    {\n        year:1938, cpi: 14.2, dividends: 0.07014439,\n        bonds: 0.0256, gold: 0, equity: 0.10521662\n    },\n    {\n        year:1939, cpi: 14, dividends: 0.04106664,\n        bonds: 0.0236, gold: -0.01428571, equity: -0.016\n    },\n    {\n        year:1940, cpi: 13.9, dividends: 0.05067748,\n        bonds: 0.0221, gold: 0.02898551, equity: -0.14227642\n    },\n    {\n        year:1941, cpi: 14.1, dividends: 0.06382303,\n        bonds: 0.0195, gold: 0, equity: -0.1535545\n    },\n    {\n        year:1942, cpi: 15.7, dividends: 0.07876069,\n        bonds: 0.0246, gold: 0.02816901, equity: 0.12989922\n    },\n    {\n        year:1943, cpi: 16.9, dividends: 0.05847374,\n        bonds: 0.0247, gold: -0.00684932, equity: 0.17443013\n    },\n    {\n        year:1944, cpi: 17.4, dividends: 0.05175806,\n        bonds: 0.0248, gold: 0.02758621, equity: 0.13839662\n    },\n    {\n        year:1945, cpi: 17.8, dividends: 0.04768962,\n        bonds: 0.0237, gold: 0.02684564, equity: 0.3358043\n    },\n    {\n        year:1946, cpi: 18.2, dividends: 0.03699595,\n        bonds: 0.0219, gold: 0.12418301, equity: -0.15593785\n    },\n    {\n        year:1947, cpi: 21.5, dividends: 0.04689895,\n        bonds: 0.0225, gold: -0.02325581, equity: -0.02498356\n    },\n    {\n        year:1948, cpi: 23.7, dividends: 0.05686669,\n        bonds: 0.0244, gold: -0.03571429, equity: 0.03573837\n    },\n    {\n        year:1949, cpi: 24, dividends: 0.06163197,\n        bonds: 0.0231, gold: -0.00617284, equity: 0.09895833\n    },\n    {\n        year:1950, cpi: 23.5, dividends: 0.06812796,\n        bonds: 0.0232, gold: -0.00621118, equity: 0.25651659\n    },\n    {\n        year:1951, cpi: 25.4, dividends: 0.07009288,\n        bonds: 0.0257, gold: -0.0325, equity: 0.14049976\n    },\n    {\n        year:1952, cpi: 26.5, dividends: 0.05842621,\n        bonds: 0.0268, gold: -0.08268734, equity: 0.0822654\n    },\n    {\n        year:1953, cpi: 26.6, dividends: 0.05385791,\n        bonds: 0.0283, gold: -0.00704225, equity: -0.02750191\n    },\n    {\n        year:1954, cpi: 26.9, dividends: 0.05721406,\n        bonds: 0.0248, gold: -0.00283688, equity: 0.3982718,\n            },\n    {\n        year:1955, cpi: 26.7, dividends: 0.04344579,\n        bonds: 0.0261, gold: 0.00142248, equity: 0.24016854\n    },\n    {\n        year:1956, cpi: 26.8, dividends: 0.03782559,\n        bonds: 0.029, gold: 0.00142046, equity: 0.02899207\n    },\n    {\n        year:1957, cpi: 27.6, dividends: 0.03822738,\n        bonds: 0.0346, gold: 0, equity: -0.09487123\n    },\n    {\n        year:1958, cpi: 28.6, dividends: 0.04336892,\n        bonds: 0.0309, gold: 0, equity: 0.35262646\n    },\n    {\n        year:1959, cpi: 29, dividends: 0.03158342,\n        bonds: 0.0402, gold: 0.03546099, equity: 0.04332974\n    },\n    {\n        year:1960, cpi: 29.3, dividends: 0.03216733,\n        bonds: 0.0472, gold: -0.02739726, equity: 0.02912287\n    },\n    {\n        year:1961, cpi: 29.8, dividends: 0.03259662,\n        bonds: 0.0384, gold: -0.00422535, equity: 0.15656397\n    },\n    {\n        year:1962, cpi: 30, dividends: 0.02934226,\n        bonds: 0.0408, gold: -0.00282885, equity: -0.05805704\n    },\n    {\n        year:1963, cpi: 30.4, dividends: 0.03284153,\n        bonds: 0.0383, gold: 0.00283688, equity: 0.17506917\n    },\n    {\n        year:1964, cpi: 30.9, dividends: 0.03004147,\n        bonds: 0.0417, gold: 0.00424328, equity: 0.1264879\n    },\n    {\n        year:1965, cpi: 31.2, dividends: 0.02922283,\n        bonds: 0.0419, gold: -0.0028169, equity: 0.08360427\n    },\n    {\n        year:1966, cpi: 31.8, dividends: 0.02936134,\n        bonds: 0.0461, gold: 0.00282486, equity: -0.09504929\n    },\n    {\n        year:1967, cpi: 32.9, dividends: 0.03410302,\n        bonds: 0.0458, gold: 0.22535211, equity: 0.12539964\n    },\n    {\n        year:1968, cpi: 34.1, dividends: 0.03082912,\n        bonds: 0.0553, gold: -0.05747126, equity: 0.07323232\n    },\n    {\n        year:1969, cpi: 35.6, dividends: 0.03019608,\n        bonds: 0.0604, gold: -0.05121951, equity: -0.11460784\n    },\n    {\n        year:1970, cpi: 37.8, dividends: 0.03502746,\n        bonds: 0.0779, gold: 0.14652956, equity: 0.03521205\n    },\n    {\n        year:1971, cpi: 39.8, dividends: 0.03347952,\n        bonds: 0.0624, gold: 0.43139014, equity: 0.10493101\n    },\n    {\n        year:1972, cpi: 41.1, dividends: 0.02971926,\n        bonds: 0.0595, gold: 0.6679198, equity: 0.14617619\n    },\n    {\n        year:1973, cpi: 42.6, dividends: 0.02666106,\n        bonds: 0.0646, gold: 0.72586401, equity: -0.18826014\n    },\n    {\n        year:1974, cpi: 46.6, dividends: 0.03537613,\n        bonds: 0.0699, gold: -0.24204168, equity: -0.24503173\n    },\n    {\n        year:1975, cpi: 52.1, dividends: 0.04993564,\n        bonds: 0.075, gold: -0.03962955, equity: 0.33489526\n    },\n    {\n        year:1976, cpi: 55.6, dividends: 0.03802736,\n        bonds: 0.0774, gold: 0.2043059, equity: 0.0716498\n    },\n    {\n        year:1977, cpi: 58.5, dividends: 0.03946696,\n        bonds: 0.0721, gold: 0.29174426, equity: -0.1305395\n    },\n    {\n        year:1978, cpi: 62.5, dividends: 0.05222526,\n        bonds: 0.0796, gold: 0.99999999, equity: 0.10481994\n    },\n    {\n        year:1979, cpi: 68.3, dividends: 0.05128202,\n        bonds: 0.091, gold: 0.29607843, equity: 0.11222545\n    },\n    {\n        year:1980, cpi: 77.8, dividends: 0.05139766,\n        bonds: 0.108, gold: -0.32761809, equity: 0.19927863\n    },\n    {\n        year:1981, cpi: 87, dividends: 0.04661654,\n        bonds: 0.1257, gold: 0.1175, equity: -0.11804511\n    },\n    {\n        year:1982, cpi: 94.3, dividends: 0.05677749,\n        bonds: 0.1459, gold: -0.14988814, equity: 0.23017903\n    },\n    {\n        year:1983, cpi: 97.8, dividends: 0.04770152,\n        bonds: 0.1046, gold: -0.18947368, equity: 0.15315315\n    },\n    {\n        year:1984, cpi: 101.9, dividends: 0.04278846,\n        bonds: 0.1167, gold: 0.06168831, equity: 0.03125\n    },\n    {\n        year:1985, cpi: 105.5, dividends: 0.04413362,\n        bonds: 0.1138, gold: 0.19541284, equity: 0.21328671\n    },\n    {\n        year:1986, cpi: 109.6, dividends: 0.03813641,\n        bonds: 0.0919, gold: 0.24456383, equity: 0.27041306\n    },\n    {\n        year:1987, cpi: 111.2, dividends: 0.03137996,\n        bonds: 0.0708, gold: -0.15693731, equity: -0.05293006\n    },\n    {\n        year:1988, cpi: 115.7, dividends: 0.03535597,\n        bonds: 0.0867, gold: -0.02230891, equity: 0.13932136\n    },\n    {\n        year:1989, cpi: 121.1, dividends: 0.03438448,\n        bonds: 0.0909, gold: -0.03690773, equity: 0.19120533\n    },\n    {\n        year:1990, cpi: 127.4, dividends: 0.0327676,\n        bonds: 0.0821, gold: -0.08557742, equity: -0.04259199\n    },\n    {\n        year:1991, cpi: 134.6, dividends: 0.03719531,\n        bonds: 0.0809, gold: -0.05705791, equity: 0.27831884\n    },\n    {\n        year:1992, cpi: 138.1, dividends: 0.02941742,\n        bonds: 0.0703, gold: 0.17642643, equity: 0.0460248\n    },\n    {\n        year:1993, cpi: 142.6, dividends: 0.02852124,\n        bonds: 0.066, gold: -0.02169751, equity: 0.08675873\n    },\n    {\n        year:1994, cpi: 146.2, dividends: 0.0266883,\n        bonds: 0.0575, gold: 0.00978474, equity: -0.01636398\n    },\n    {\n        year:1995, cpi: 150.3, dividends: 0.02832886,\n        bonds: 0.0778, gold: -0.04651163, equity: 0.32062332\n    },\n    {\n        year:1996, cpi: 154.4, dividends: 0.02261206,\n        bonds: 0.0565, gold: -0.22208672, equity: 0.24706227\n    },\n    {\n        year:1997, cpi: 159.1, dividends: 0.01951567,\n        bonds: 0.0658, gold: 0.00574813, equity: 0.25728903\n    },\n    {\n        year:1998, cpi: 161.6, dividends: 0.01614142,\n        bonds: 0.0554, gold: 0.0053689, equity: 0.29626516\n    },\n    {\n        year:1999, cpi: 164.3, dividends: 0.0130395,\n        bonds: 0.0472, gold: -0.06063738, equity: 0.14159533\n    },\n    {\n        year:2000, cpi: 168.8, dividends: 0.0116256,\n        bonds: 0.0666, gold: 0.01412067, equity: -0.0631037\n    },\n    {\n        year:2001, cpi: 175.1, dividends: 0.01210665,\n        bonds: 0.0516, gold: 0.23960217, equity: -0.14631298\n    },\n    {\n        year:2002, cpi: 177.1, dividends: 0.01380155,\n        bonds: 0.0504, gold: 0.21735959, equity: -0.21432017\n    },\n    {\n        year:2003, cpi: 181.7, dividends: 0.01799428,\n        bonds: 0.0405, gold: 0.04397843, equity: 0.26419896\n    },\n    {\n        year:2004, cpi: 185.2, dividends: 0.01554056,\n        bonds: 0.0415, gold: 0.17768595, equity: 0.04316922\n    },\n    {\n        year:2005, cpi: 190.7, dividends: 0.01667781,\n        bonds: 0.0422, gold: 0.23918129, equity: 0.08237614\n    },\n    {\n        year:2006, cpi: 198.3, dividends: 0.0175252,\n        bonds: 0.0442, gold: 0.31587227, equity: 0.11373003\n    },\n    {\n        year:2007, cpi: 202.416, dividends: 0.01761272,\n        bonds: 0.0476, gold: 0.03974895, equity: -0.03187844\n    },\n    {\n        year:2008, cpi: 211.08, dividends: 0.02025008,\n        bonds: 0.0374, gold: 0.2503593, equity: -0.37220401\n    },\n    {\n        year:2009, cpi: 211.143, dividends: 0.0323598,\n        bonds: 0.0252, gold: 0.30597701, equity: 0.29806604\n    },\n    {\n        year:2010, cpi: 216.687, dividends: 0.01979684,\n        bonds: 0.0373, gold: 0.07797923, equity: 0.14154755\n    },\n    {\n        year:2011, cpi: 220.223, dividends: 0.01790346,\n        bonds: 0.0339, gold: 0.08687133, equity: 0.01400259\n    },\n    {\n        year:2012, cpi: 226.665, dividends: 0.02055749,\n        bonds: 0.0197, gold: -0.27614183, equity: 0.13826139\n    },\n    {\n        year:2013, cpi: 230.28, dividends: 0.0213028,\n        bonds: 0.0191, gold: -0.00435866, equity: 0.22114293\n    },\n    {\n        year:2014, cpi: 233.916, dividends: 0.01942536,\n        bonds: 0.0286, gold: -0.11611424, equity: 0.1369433\n    },\n    {\n        year:2015, cpi: 233.707, dividends: 0.019671167,\n        bonds: 0.0188, gold: 0.17994340, equity: -0.054028735229542\n\t\t},\n    {\n        year:2016, cpi: 236.916, dividends: 0.02270058,\n        bonds: 0.0209, gold: 0.00510098, equity: 0.18582299661672\n\t\t},\n    {\n        year:2017, cpi: 242.839, dividends: 0.020186481,\n        bonds: 0.0243, gold: 0.00904448, equity: 0.226221034357374\n\t\t},\n    {\n        year:2018, cpi: 247.867, dividends: 0.017666738,\n        bonds: 0.0258, gold: 0.09784074, equity: -0.065384615734383\n\t\t},\n    {\n        year:2019, cpi: 251.712, dividends: 0.020766616,\n        bonds: 0.0271, gold: 0, equity: 0.257273694016446\n    },\n    {\n        year:2020, cpi: 257.9710, dividends: 0.01790,\n        bonds: 0.01760, gold: 0, equity: 0.157265\n    },\n    {\n        year:2021, cpi: 261.58, dividends: 0.0153,\n        bonds: 0.0108, gold: 0, equity: 0.2056  \n    },\n    /*\n    {\n        year:2022, cpi: 281.15, dividends: ,\n        bonds: 0.01760, gold: 0, equity: \n    },\n    */\n];\n","import * as d3 from \"d3\";\n\nexport const portfolioValueTextID = 'portfoliovaluetext';\nconst perRunClass = 'perrundata';\nconst failureColorString = 'Red';\nconst lowValueColorString = 'Orange';\nconst highValueColorString = 'LimeGreen';\nconst maxValueColorString = 'ForestGreen';\nconst midValueColorString = 'DarkKhaki';\nconst portfolioLineClass = 'portfolioline';\nconst startValueMargin = 0.33;\nconst thresholdValues = [0, 1 - startValueMargin, 1 + startValueMargin, 5, 100];\nconst unselectedOpacity = 0.2;\nconst selectedOpacity = 1.0;\nexport const margin = { top: 20, right: 65, bottom: 40, left: 65 };\nexport const marginTranslate = \"translate(\" + margin.left + \",\" + margin.top + \")\";\n\nexport const getSelectedOpacity = () => {\n    return selectedOpacity;\n}\n\nexport const getUnselectedOpacity = () => {\n    return unselectedOpacity;\n}\n\nexport const cleanupPrev = (perRunClassID) => {\n    const perRunSelect = '.' + perRunClassID;\n    d3.selectAll(perRunSelect).remove();\n}\n\nexport const getPerRunClassName = () => {\n    return perRunClass;\n}\n\nexport const getPortfolioLineClassName = () => {\n    return portfolioLineClass;\n}\n\nexport const getFailureColorString = () => {\n    return failureColorString;\n}\n\nexport const getLowValueColorString = () => {\n    return lowValueColorString;\n}\n\nexport const getHighValueColorString = () => {\n    return highValueColorString;\n}\n\nexport const getMaxValueColorString = () => {\n    return maxValueColorString;\n}\n\nexport const getMidValueColorString = () => {\n    return midValueColorString;\n}\n\nexport const getThresholdValues = () => {\n    return thresholdValues;\n}\n\nexport const getColorStringForRelativeValue = (ratioValue) => {\n    var retValue = midValueColorString;\n\n    ratioValue = Math.round((ratioValue + Number.EPSILON) * 100000000) / 100000000;\n    if (0 >= ratioValue) {\n        retValue = getFailureColorString();\n    }\n    else if (ratioValue < (1 - startValueMargin)) {\n        retValue = getLowValueColorString();\n    }\n    else if (ratioValue >= (1 + startValueMargin)) {\n        if (ratioValue >= (thresholdValues[thresholdValues.length-2])) {\n            retValue = getMaxValueColorString();\n        }\n        else {\n            retValue = getHighValueColorString();\n        }\n    }\n\n    return retValue;\n}\n\nexport const findByID = (elementID) => {\n    const selectID = '#' + elementID;\n    return d3.select(selectID);\n}\n\nexport const findByClass = (parent, className) => {\n    const selectClass = '.' + className;\n    return parent.selectAll(selectClass);\n}\n\nexport const makeCurrency = (num) => {\n    let dollarUSLocale = Intl.NumberFormat('en-US', {\n        style: \"currency\",\n        currency: \"USD\",\n    });\n    return dollarUSLocale.format(num);\n}\n\nexport const makePct = (num) => {\n    return Number( num * 100).toFixed(2) + '%';\n}\n\nconst generateCycleCSVName = (first, last) => {\n    return 'cycledata' + first + last + '.csv';\n}\n\nconst dumpCycleHeader = (cycleData) => {\n    var cycleHeader = [];\n    var lastIteration = cycleData[cycleData.length - 1];\n\n    // Failure case?\n    if (0 === lastIteration.adjEndValue) {\n        cycleHeader += ('failure at age ' + lastIteration.age + ' after ' +\n                        cycleData.length + ' years\\n\\n');\n    }\n    else {\n        cycleHeader += ('at age ' + lastIteration.age + ' after ' +\n                        cycleData.length + ' years - have ' +\n                        lastIteration.adjEndValue + \n                        ' remaining - cumulative CPI is ' +\n                        lastIteration.cumulativeCPI + '\\n\\n');\n    }\n\n    return cycleHeader;\n}\n\nexport const dumpCycleToCSV = (cycleData) => {\n    const cycleLength = cycleData.length;\n    const comma = ',';    \n    var dataset = 'iteration, age, year, cumulativeCPI, beginValue, spend, actualSpend, equityReturn, equityAppr, bondReturn, bondAppr, divAppr, aggReturn, fees, endValue, adjEndValue\\n';\n\n    for (var i = 0; i < cycleLength; i++) {\n        dataset += (i + comma\n                    + cycleData[i].age + comma\n                    + cycleData[i].year + comma\n                    + cycleData[i].cumulativeCPI + comma\n                    + cycleData[i].beginValue + comma\n                    + cycleData[i].spend + comma\n                    + cycleData[i].actualSpend + comma\n                    + cycleData[i].equityReturn + comma\n                    + cycleData[i].equityAppr + comma\n                    + cycleData[i].bondReturn + comma\n                    + cycleData[i].bondAppr + comma\n                    + cycleData[i].divAppr + comma\n                    + cycleData[i].aggReturn + comma\n                    + cycleData[i].fees + comma\n                    + cycleData[i].endValue + comma\n                    + cycleData[i].adjEndValue + '\\n'\n                    );\n    }\n    return dataset;\n}\n\nconst downloadCSV = (filename, text) => {\n    var pom = document.createElement('a');\n\n    pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    pom.setAttribute('download', filename);\n\n    if (document.createEvent) {\n        var event = document.createEvent('MouseEvents');\n        event.initEvent('click', true, true);\n        pom.dispatchEvent(event);\n    }\n    else {\n        pom.click();\n    }\n}\n\nexport const dumpCycleToCSVFile = (cycleData) => {\n    var filename = generateCycleCSVName(cycleData[0].year, cycleData[cycleData.length - 1].year);\n    var csvData = dumpCycleHeader(cycleData);\n    csvData += dumpCycleToCSV(cycleData);\n\n    downloadCSV (filename, csvData);\n}\n\nexport const dumpAllToCSVFile = (allCycles) => {\n    var currentdate = new Date();\n    var filename = 'allcycles' + currentdate.getFullYear() + currentdate.getMonth() + currentdate.getDate()\n                    + '-' + currentdate.getHours() + currentdate.getMinutes() + currentdate.getSeconds()\n                    + '.csv';\n    var csvData = [];\n\n    for (var i = 0; i < allCycles.length; i++) {\n        csvData += ('cycle ' + i + '\\n');\n        csvData += dumpCycleHeader(allCycles[i]);\n        csvData += dumpCycleToCSV(allCycles[i]);\n        csvData += ('\\n\\n');\n    }\n\n    downloadCSV (filename, csvData);\n}\n\nconst dumpBinHeader = (binData) => {\n    var csvData = [];\n    \n    if (0 === binData.x0) {\n        csvData = 'failure cycles ';\n    }\n    else {\n        csvData = 'cycles range from ' + binData.x0 + '-' + binData.x1;\n    }\n    csvData += '\\n\\n';\n\n    return csvData;\n}\n\nexport const dumpBinToCSVFile = (binData) => {\n    var currentdate = new Date();\n    var filename = 'bin' + binData.x0 + '-' + currentdate.getFullYear() + currentdate.getMonth() + currentdate.getDate()\n                    + '-' + currentdate.getHours() + currentdate.getMinutes() + currentdate.getSeconds()\n                    + '.csv';\n    var csvData = dumpBinHeader(binData);\n\n    for (var i = 0; i < binData.length; i++) {\n        csvData += ('cycle ' + i + '\\n');\n        csvData += dumpCycleHeader(binData[i].cycleData);\n        csvData += dumpCycleToCSV(binData[i].cycleData);\n        csvData += ('\\n\\n');\n    }\n\n    downloadCSV (filename, csvData);\n}","import * as React from \"react\";\nimport { Stack } from \"@mui/material\";\nimport { Card } from \"@mui/material\";\nimport { CardContent } from \"@mui/material\";\nimport { Typography } from \"@mui/material\";\nimport { makeCurrency, makePct} from \"./common.js\";\n\nfunction SummaryCards (props) {\n\n    React.useEffect(() => {\n\n    }, [props] );\n\n    return (\n        <div>\n            <Stack direction=\"row\">\n                <Card>\n                    <CardContent>\n                        <Typography variant=\"h6\" component=\"h6\">\n                            summary\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            {makePct(1 - (props.fails / props.cycles))} success ({props.cycles - props.fails} / {props.cycles} )\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            Minimum failure age : {(Number.POSITIVE_INFINITY === props.minfailage) ? 'n/a' : props.minfailage}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            {makePct(props.numgreaterthanstart / props.cycles)} cycles ended higher than started\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            { makePct(props.netpositivepct)} years net positive (all cycles)\n                        </Typography>\n                    </CardContent>\n                </Card>\n                <Card>\n                    <CardContent>\n                        <Typography variant=\"h6\" component=\"h6\">\n                            end value ($)\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : {makeCurrency(props.quantile50endvalue)} \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : {makeCurrency(props.avgendvalue)} \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : {makeCurrency(props.maxendvalue)}\n                        </Typography>\n                    </CardContent>\n                </Card>\n                <Card>\n                    <CardContent>\n                        <Typography variant=\"h6\" component=\"h6\">\n                            end value %-tiles ($)\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            90% : {makeCurrency(props.quantile90endvalue)} \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            75% : {makeCurrency(props.quantile75endvalue)} \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            25% : {makeCurrency(props.quantile25endvalue)} \n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            10% : {makeCurrency(props.quantile10endvalue)} \n                        </Typography>\n                    </CardContent>\n                </Card>\n                <Card>\n                    <CardContent>\n                        <Typography variant=\"h6\" component=\"h6\">\n                            returns (%)\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            median : { makePct(props.medianreturns) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            mean : { makePct(props.avgreturns) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            min: { makePct(props.minreturns) }\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            max : { makePct(props.maxreturns) }\n                        </Typography>\n                    </CardContent>\n                </Card>  \n            </Stack>             \n        </div>\n    );    \n};\n\nexport default SummaryCards;\n","import * as React from \"react\";\nimport {useState} from \"react\";\nimport * as d3 from \"d3\";\nimport Button from '@mui/material/Button';\nimport { margin, getSelectedOpacity, getUnselectedOpacity, cleanupPrev, makeCurrency, makePct, getPerRunClassName, getThresholdValues, getColorStringForRelativeValue, findByID, dumpBinToCSVFile } from \"./common.js\";\n\nfunction EndValueChart (props) {\n\n    const [selectedBinDataState, setSelectedBinDataState] = useState(null);\n\n    const svgBinChartID = 'endvaluechartsvg';\n    const perRunClass = getPerRunClassName() + svgBinChartID;\n    const ttBinSelectWrapID = 'ttbinselectwrap';\n    const pathGroupID = 'pathgroupid';\n    const selectBinString = 'select a bar to zoom to results';\n    const totalWidth = 960;\n    const totalHeight = 200;\n    const evMargin = { top: 10, right: margin.right, bottom: 0, left: margin.left };\n    const boundedWidth = totalWidth - evMargin.left - evMargin.right;\n    const boundedHeight = totalHeight - evMargin.top - evMargin.bottom; \n    const evMarginTranslate = \"translate(\" + evMargin.left + \",\" + evMargin.top + \")\";   \n    const captionHeight = 45;\n\n    const calcBinMetadata = (data) => {\n        const oneBinMetadata = {\n            'binData': data,\n            'extBin': d3.extent(data, (d) => d.adjEndCycleValue),\n            'extPctStartValue': d3.extent(data, (d) => d.pctOfStart),\n            'binCount': data.length,\n        }\n\n        return oneBinMetadata;\n    }\n\n    const getBinExtents = (thisBin) => {\n        var retVal = [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY];\n\n        for (var i = 0; i < thisBin.length; i++) {\n            var oneExt = d3.extent(thisBin[i].cycleData, (d) => d.adjEndValue);\n            retVal[0] = Math.min(retVal[0], oneExt[0]);\n            retVal[1] = Math.max(retVal[1], oneExt[1]);\n        }\n\n        return retVal;\n    }\n\n    const handleSaveBin = (e) => {\n        dumpBinToCSVFile(selectedBinDataState);\n    }\n\n    const handleMouseDown = (e) => {\n        const thisBin = e.srcElement.__data__;\n        var colorString = null;\n        var zoomMin = null;\n        var zoomMax = null;\n        var selectedBin = null;\n\n        if (props.selectedbin !== thisBin.x0) {\n            const valueRatio = (thisBin.x0) / props.startvalue;\n            var binExt = getBinExtents(thisBin);\n            colorString = getColorStringForRelativeValue(valueRatio);   \n            zoomMin = binExt[0];\n            zoomMax = binExt[1]; \n            selectedBin = thisBin.x0;\n            setSelectedBinDataState(thisBin);\n        }\n        else {\n            setSelectedBinDataState(null);\n        }\n\n        props.zoomcallback(zoomMin, zoomMax, colorString, selectedBin);\n    }\n\n    React.useEffect(() => {\n\n        const getCurrencyThresholds = () => {\n            const pctThresholds = getThresholdValues();\n            const currencyThresholds = [];\n    \n            // create failure bin\n            currencyThresholds[0] = 0;\n            currencyThresholds[1] = 0.01;\n            // start at index 1, as we've handled the zero case.  \n            // Consider removing zero from the common thresholds.\n            // for now, offset the first entry in the currency array to accomodate the failure bin.\n            for (var i = 1; i < pctThresholds.length; i++) {\n                currencyThresholds[i+1] = pctThresholds[i] * props.startvalue;\n            }\n    \n            return currencyThresholds;\n        }\n\n        const getThresholdRange = (thresholdValues) => {\n            const numThresholds = thresholdValues.length;\n            var thresholdRange = [];\n            var thresholdInc = boundedWidth / (numThresholds + 1);\n    \n            for (var i = 0; i <= thresholdValues.length; i++) {\n                thresholdRange[i] = i * thresholdInc;\n            }\n\n            return thresholdRange;\n        }\n    \n        const getXScaleForAxis = () => {\n            const thresholdValues = getCurrencyThresholds();\n            const thresholdRange = getThresholdRange(thresholdValues);\n    \n            return d3.scaleThreshold()\n                     .domain(thresholdValues)\n                     .range(thresholdRange);\n        }\n        \n        const createBins = (currencyThresholdValues) => {\n\n            const binFunc = d3.bin()\n                              .value(function(d) { return d.adjEndCycleValue; })   \n                              .domain([currencyThresholdValues[0], \n                                       currencyThresholdValues[currencyThresholdValues.length - 1]])\n                              .thresholds(currencyThresholdValues); \n    \n            return binFunc(props.metadata);\n        }    \n\n        const getBinOpacity = (thisBin) => {\n\n            var retVal = getSelectedOpacity();\n\n            if ((null !== props.selectedbin) &&\n                (thisBin !== props.selectedbin) ) {\n                retVal = getUnselectedOpacity();\n            }\n\n            return retVal;\n        }\n\n        const drawBinCaption = (svg, allBinData, xScale) => {\n\n            const numCycles = props.metadata.length;\n\n            // draw bin ranges below the x axis\n            for (var i = 0; i < allBinData.length; i++) {\n                if (0 !== allBinData[i].length) {\n                    const binMeta = calcBinMetadata(allBinData[i]);\n                    const xOffset = ((xScale(allBinData[i].x1) - xScale(allBinData[i].x0)) / 2 );      \n                    const x = xOffset + xScale(allBinData[i].x0);\n                    var y = boundedHeight - captionHeight; \n                    const binRangeWrapper = svg.append('g')\n                                                .attr('id', ttBinSelectWrapID)\n                                                .attr(\"class\", perRunClass);\n\n                    const axisText = binRangeWrapper.append('text')\n                                    .attr('y', y)\n                                    .style(\"font-size\", \"12px\") \n                                    .attr('font-weight', 'bold')\n                                    .attr('text-anchor', 'middle')                                   \n                                    .attr(\"pointer-events\", \"none\");\n\n                    axisText.append('tspan')\n                                    .text(makePct(allBinData[i].length / numCycles))\n                                    .attr('x', x)\n                                    .attr('dy', '0px')\n                                    .attr(\"pointer-events\", \"none\");\n                    axisText.append('tspan')\n                                    .text(makeCurrency(binMeta.extBin[0]))\n                                    .attr('x', x)\n                                    .attr('dy', '15px')\n                                    .attr(\"pointer-events\", \"none\");\n                    if (binMeta.extBin[1] !== binMeta.extBin[0]) {\n                        axisText.append('tspan')\n                                .text('-' + makeCurrency(binMeta.extBin[1]))\n                                .attr('x', x)\n                                .attr('dy', '15px')\n                                .attr(\"pointer-events\", \"none\");\n                    }\n                }\n            }\n        }\n\n        const drawSelectionText = (svg) => {\n            const binSelectWrapper = svg.append('g')\n                                      .attr('id', ttBinSelectWrapID)\n                                      .attr(\"class\", perRunClass);\n\n            binSelectWrapper.append('g').append('text')\n                            .text(selectBinString)\n                            .attr('transform', evMarginTranslate)\n                            .attr(\"pointer-events\", \"none\")\n                            .attr('font-weight', 'bold');\n        }\n\n        const drawHistogram = (svg) => {\n            const currencyThresholdValues = getCurrencyThresholds();\n            const bins = createBins(currencyThresholdValues);\n            const xScale = getXScaleForAxis(currencyThresholdValues);\n            const yScale = d3.scaleLinear()\n                             .domain([0, d3.max(bins, function(d) { return d.length; })])\n                             .range([boundedHeight, 0]);\n            const histoBarClass = 'histobarclass';\n    \n            // x/y axes\n            svg.append(\"g\")\n                .attr(\"class\", perRunClass)\n                .attr(\"transform\", \"translate(0,\" + boundedHeight + \")\")\n                .call(d3.axisBottom(xScale)\n                        .tickFormat('')\n                        .tickSize(20)\n                     );\n            svg.append(\"g\")\n                .attr(\"class\", perRunClass)\n                .call(d3.axisLeft(yScale)\n                        .tickFormat('')\n                        .tickSizeOuter(10)\n                     );                 \n            var barGroup = svg.append('g')\n                              .attr('class', perRunClass)\n                              .attr('id', pathGroupID);\n    \n            // chart\n            var bars = barGroup.selectAll('.' + histoBarClass);\n            bars.data(bins)\n                    .enter()\n                    .append(\"rect\")\n                    .attr(\"class\", perRunClass)\n                    .attr(\"x\", 1)\n                    .attr(\"transform\", function(d) { return \"translate(\" + xScale(d.x0) + \",\" + yScale(d.length) + \")\"; })\n                    .attr(\"width\", function(d) { return xScale(d.x1) - xScale(d.x0) -1 ; })\n                    .attr(\"height\", function(d) { return boundedHeight - yScale(d.length); })\n                    .style(\"fill\",  function(d) { return getColorStringForRelativeValue(d.x0 / props.startvalue);})\n                    .style(\"opacity\", function(d) { return getBinOpacity(d.x0); } )\n                    .on('click', handleMouseDown);\n\n            drawBinCaption(svg, bins, xScale);\n            drawSelectionText(svg);\n        }         \n\n        const svg = findByID(svgBinChartID)\n                      .append(\"g\")\n                      .attr(\"transform\", evMarginTranslate);\n        const chartGroup = svg.append('g');\n\n        cleanupPrev(perRunClass);\n        drawHistogram(chartGroup);\n        // eslint-disable-next-line\n    }, [props.metadata, props.startvalue, props.selectedbin, props.zoomcolor] );\n\n    return (\n        <div> \n            <Button disabled={null === props.selectedbin} variant=\"outlined\" onClick={handleSaveBin} >Save to CSV</Button>\n            <svg id={svgBinChartID}  \n                width={totalWidth}\n                height={totalHeight} \n             >\n            </svg>\n\n        </div>\n    );\n};\n\nexport default EndValueChart;\n","import * as React from \"react\";\nimport {useState} from \"react\";\nimport * as d3 from \"d3\";\nimport SummaryCards from \"./summary.js\";\nimport EndValueChart from './endvaluechart.js';\nimport \"./chartdata.css\";\nimport { margin, marginTranslate, getSelectedOpacity, getUnselectedOpacity, getPerRunClassName, getPortfolioLineClassName, findByID, cleanupPrev, makeCurrency, dumpCycleToCSVFile} from './common.js';\n\nfunction Chart (props) {\n  \n    // TODO review all chart state vars after refactoring\n    const [avgAdjEndValueState, setAvgAdjEndValueState] = useState(0);\n    const [maxAdjEndValueState, setMaxAdjEndValueState] = useState(0);\n\n    const [quantile10EndValueState, setQuantile10AdjEndValueState] = useState(0);\n    const [quantile25EndValueState, setQuantile25AdjEndValueState] = useState(0);\n    const [quantile50EndValueState, setQuantile50AdjEndValueState] = useState(0);\n    const [quantile75EndValueState, setQuantile75AdjEndValueState] = useState(0);\n    const [quantile90EndValueState, setQuantile90AdjEndValueState] = useState(0);\n\n    const [avgReturnsState, setAvgReturnsState] = useState(0);\n    const [medianReturnsState, setMedianReturnsState] = useState(0);\n    const [minReturnsState, setMinReturnsState] = useState(0);\n    const [maxReturnsState, setMaxReturnsState] = useState(0);\n\n    const [pctPositiveNetState, setPctPositiveNetState] = useState(0);\n    const [numGreaterThanStartState, setNumGreaterThanStartState] = useState(0);\n    const [numFailsState, setNumFailsState] = useState(0);\n    const [minFailAgeState, setMinFailAgeState] = useState(0);\n\n    const svgCycleChartID = 'd3cycletarget';\n    const perRunClass = getPerRunClassName() + svgCycleChartID;\n    const hoverLineID = 'hoverLine';\n    const ttWrapID = 'ttwrapper';\n    const ttBackID = 'ttbackground';\n    const ttAgeID = 'ttage';\n    const ttValueID = 'ttvalue';\n    const ttClass = 'tooltip';\n    const totalWidth = 960;\n    const totalHeight = 400;\n    const boundedWidth = totalWidth - margin.left - margin.right;\n    const boundedHeight = totalHeight - margin.top - margin.bottom;\n    const tooltipWidth = 75;\n    const tooltipHeight = 50;\n    const normalStrokeWidth = 1.5;\n    const boldStrokeWidth = 5;\n\n    const getXScale = () => { \n        var xExt = [props.currentage, props.lifeexpectancy];\n        return d3.scaleLinear()\n                    .domain(xExt)\n                    .range([ 0, boundedWidth ]);\n    }\n\n    const getYDomain = () => {\n        var yDom = [+(props.portmin), +(props.portmax)];\n\n        if ((null !== props.minzoom) &&\n            (null !== props.maxzoom)) {\n            yDom[0] = +(props.minzoom);\n            yDom[1] = +(props.maxzoom);\n        }\n        return yDom;\n    }\n\n    const getYScale = (rangeMin, rangeMax) => {\n        var yExt = [rangeMin, rangeMax];\n        return d3.scaleLinear()\n                    .domain(yExt)\n                    .range([ boundedHeight, 0 ]);\n    }\n\n    const getHoverLine = () => {\n        return findByID(hoverLineID);\n    }\n\n    const getTooltipWrapper = () => {\n        return findByID(ttWrapID);\n    }\n\n    const getTooltipBackground = () => {\n        return findByID(ttBackID);\n    }\n\n    const getTooltipAgeSpan = () => {\n        return findByID(ttAgeID);\n    }\n\n    const getTooltipValueSpan = () => {\n        return findByID(ttValueID);\n    }\n\n    const handleMouseOver = (e) => {\n        getHoverLine().style('opacity', 1);\n        getTooltipWrapper().attr('display', null);\n\n        var currLine = d3.select(e.currentTarget);\n        currLine.attr(\"stroke-width\", boldStrokeWidth);\n    }\n\n    const handleMouseMove = (e) => {\n        const bisect = d3.bisector((d) => d.age).left;\n        var xScaleIn = getXScale();\n        var yDom = getYDomain();\n        var yScaleIn = getYScale(yDom[0], yDom[1]);\n        const coords = d3.pointer(e);\n        const x0 = xScaleIn.invert(coords[0]);\n        const y0 = yScaleIn.invert(coords[1]);\n        const oneCycleData = props.cycledata[0];\n        const i = bisect(oneCycleData, x0, 1);\n\n        if (oneCycleData.length >= i) {\n            const selectedData = oneCycleData[i];\n            const clientX = xScaleIn(selectedData.age);\n            var tooltipX = clientX;\n            \n            // prevent the tooltip from getting clipped.\n            const tooltipWidth = 75;             \n            if (boundedWidth <= (clientX + tooltipWidth)) {\n                tooltipX = clientX - tooltipWidth;\n            }\n            getTooltipAgeSpan().text('age: ' + selectedData.age);\n\n            getTooltipValueSpan().text(makeCurrency(y0));\n\n            const ttBounds = getTooltipWrapper().node().getBBox();\n            getTooltipBackground()                \n                .attr('width', ttBounds.width)\n                .attr('height', ttBounds.height);\n\n            getTooltipWrapper().attr(\"transform\", \"translate(\" + tooltipX + \",\" + coords[1] + \")\");  \n\n            getHoverLine().attr('x', clientX);\n            getTooltipWrapper().attr('x', tooltipX);                    \n        }\n\n    };\n    \n    const handleMouseLeave = (e) => {\n        getHoverLine().style('opacity', 0);\n        getTooltipWrapper().attr('display', 'none');\n\n        var currLine = d3.select(e.currentTarget);\n        currLine.attr(\"stroke-width\", normalStrokeWidth);\n    };\n\n    const handleMouseClick = (e) => {\n        var ds = e.currentTarget.__data__;\n        dumpCycleToCSVFile(ds);\n    }\n\n    const getAggReturns = (allCycleData) => {\n        var retVal = [];\n\n        for (var iCycle = 0; iCycle < allCycleData.length; iCycle++) {\n            for (var year = 0; year < allCycleData[iCycle].length; year++) {\n                const oneYear = allCycleData[iCycle][year];\n                retVal.push(oneYear.aggReturn);\n            }\n        }\n\n        return retVal;\n    }\n\n    const getNetDeltas = (allCycleData) => {\n        var retVal = [];\n\n        for (var iCycle = 0; iCycle < allCycleData.length; iCycle++) {\n            for (var year = 0; year < allCycleData[iCycle].length; year++) {\n                const oneYear = allCycleData[iCycle][year];\n                retVal.push(oneYear.netDelta);\n            }\n        }\n\n        return retVal;\n    }\n\n    const getPctPositiveNet = (netDeltas) => {\n        var numPos = 0;\n\n        for (var i = 0; i < netDeltas.length; i++) {\n            if (0 < netDeltas[i]) {\n                numPos++;\n            }\n        }\n\n        return (numPos / netDeltas.length);\n    }\n\n    React.useEffect(() => {\n            \n        const calcSummaryData = () => {\n            const allCycles = props.cycledata;\n            const allCyclesMeta = props.cyclemeta;\n    \n            var extAdjEnd = d3.extent(allCyclesMeta, (d) => d.adjEndCycleValue);\n            var avgAdjEnd = d3.mean(allCyclesMeta, (d) => d.adjEndCycleValue);\n\n            var quantile10 = d3.quantile(allCyclesMeta, 0.10, (d) => d.adjEndCycleValue);\n            var quantile25 = d3.quantile(allCyclesMeta, 0.25, (d) => d.adjEndCycleValue);\n            var quantile50 = d3.quantile(allCyclesMeta, 0.50, (d) => d.adjEndCycleValue);\n            var quantile75 = d3.quantile(allCyclesMeta, 0.75, (d) => d.adjEndCycleValue);\n            var quantile90 = d3.quantile(allCyclesMeta, 0.90, (d) => d.adjEndCycleValue);\n\n            var aggReturns = getAggReturns(allCycles);\n            var avgReturns = d3.mean(aggReturns);\n            var medianReturns = d3.median(aggReturns);\n            var extReturns = d3.extent(aggReturns);\n    \n            var netDeltas = getNetDeltas(allCycles);\n            var pctPositiveNet = getPctPositiveNet(netDeltas);\n    \n            var numGreaterThanStart = 0;\n            var numFails = 0;\n            var minFailAge = Number.POSITIVE_INFINITY;\n            var failAges = [];\n    \n            for (var i = 0; i < allCyclesMeta.length; i++) {\n                if (1 < (allCyclesMeta[i].pctOfStart)) {\n                    numGreaterThanStart++;\n                }\n                // look at failure cycles\n                else if (allCyclesMeta[i].fail) {\n                    minFailAge = Math.min(allCyclesMeta[i].failAge, minFailAge);\n                    failAges[numFails] = allCyclesMeta[i].failAge;\n                    numFails++;\n                }\n            }\n    \n            setAvgAdjEndValueState(avgAdjEnd);\n            setMaxAdjEndValueState(extAdjEnd[1]);\n\n            setQuantile10AdjEndValueState(quantile10);\n            setQuantile25AdjEndValueState(quantile25);\n            setQuantile50AdjEndValueState(quantile50);\n            setQuantile75AdjEndValueState(quantile75);\n            setQuantile90AdjEndValueState(quantile90);\n    \n            setAvgReturnsState(avgReturns);\n            setMedianReturnsState(medianReturns);\n            setMinReturnsState(extReturns[0]);\n            setMaxReturnsState(extReturns[1]);\n    \n            setPctPositiveNetState(pctPositiveNet);\n            setNumFailsState(numFails);\n            setNumGreaterThanStartState(numGreaterThanStart);\n            setMinFailAgeState(minFailAge);\n        }\n\n        const drawAxes = (svg, xScaleIn, yScaleIn) => {\n \n            svg.append(\"g\")\n                .attr(\"class\", perRunClass)\n                .attr(\"transform\", \"translate(0,\" + boundedHeight + \")\")\n                .call(d3.axisBottom(xScaleIn));\n            svg.append(\"g\")\n                .attr(\"class\", perRunClass)\n                .call(d3.axisLeft(yScaleIn).tickFormat(d3.format('$,')));\n        };\n    \n        const drawPortfolioLine = (svg, xScaleIn, yScaleIn, oneCycleMeta, oneCycle) => {\n    \n            const classNames = perRunClass + ' ' \n                                + getPortfolioLineClassName() + ' ' \n                                + oneCycleMeta.lineColor;\n            var lineOpacity = getSelectedOpacity();\n            var enterHandler = handleMouseOver;\n            var hoverHandler = handleMouseMove;\n            var leaveHandler = handleMouseLeave;\n            var clickHandler = handleMouseClick;\n\n            if ((null != props.zoomcolor) && \n                (props.zoomcolor !== oneCycleMeta.lineColor)) {\n                lineOpacity = getUnselectedOpacity();\n                enterHandler = null;\n                hoverHandler = null;\n                leaveHandler = null;\n                clickHandler = null;\n            }\n\n            svg.append(\"path\")\n                .datum(oneCycle)\n                .attr('id', oneCycleMeta.startYear)\n                .attr('class', classNames)\n                .attr(\"fill\", \"none\")\n                .style(\"opacity\", lineOpacity)\n                .attr(\"stroke\", oneCycleMeta.lineColor)\n                .attr(\"stroke-width\", normalStrokeWidth)\n                .on('mouseenter', enterHandler)\n                .on('mouseover', hoverHandler)\n                .on('mouseleave', leaveHandler)\n                .on('click', clickHandler)\n                .attr(\"d\", d3.line()\n                            .x(function(d) { return xScaleIn(d.age) })\n                            .y(function(d) { return yScaleIn(d.adjEndValue) }));\n        }\n\n        const drawReferenceLine = (svg, yScale) => {\n            svg.append('rect')\n               .attr('class', perRunClass)\n               .style('stroke-dasharray', '10, 5')\n               .attr('fill', 'none')\n               .attr('stroke', 'black')\n               .attr(\"stroke-width\", normalStrokeWidth)\n               .attr('x', 0)\n               .attr('y', yScale(props.portfoliovalue))\n               .attr('width', boundedWidth)\n               .attr('height', 0.25);\n        }\n                \n        const drawChart = (svg) => {\n\n            const xScale = getXScale();\n            const yDom = getYDomain();\n            const yScale = getYScale(yDom[0], yDom[1]);\n            const allCyclesData = props.cycledata;\n            const allCyclesMeta = props.cyclemeta;\n            const numCycles = +(props.numcycles);\n    \n            drawAxes(svg, xScale, yScale);\n            for (var i = 0; i < numCycles; i++) {\n                drawPortfolioLine(svg, xScale, yScale, allCyclesMeta[i], allCyclesData[i]);\n            }\n            drawReferenceLine(svg, yScale);\n        }    \n\n        const prepHoverStuff = (svg) => {\n            const className = perRunClass + ' ' + ttClass;\n            const tooltipWrapper = svg\n                    .append('g')\n                    .attr('id', ttWrapID)\n                    .attr('class', className)\n                    .attr('display', 'none');\n            \n            tooltipWrapper.append('rect')\n                            .style('opacity', 0.70)\n                            .attr('id', ttBackID)\n                            .attr('class', className)\n                            .attr('width', tooltipWidth)\n                            .attr('height', tooltipHeight)\n                            .attr(\"pointer-events\", \"none\")\n                            .attr(\"fill\", \"#e8e8e8\"); \n    \n            const tooltipText = tooltipWrapper.append('g').append('text');\n    \n            tooltipText.attr('class', className)\n                        .attr(\"pointer-events\", \"none\")\n                        .attr('font-weight', 'bolder')\n                        .attr('text-anchor', 'left');\n                        \n            tooltipText.append('tspan')\n                        .attr('id', ttAgeID)\n                        .attr('class', className)\n                        .attr(\"pointer-events\", \"none\")\n                        .attr('x', '5')\n                        .attr('y', '5')\n                        .attr('dy', '15px');\n            \n            tooltipText.append('tspan')\n                        .attr('id', ttValueID)\n                        .attr('class', className)\n                        .attr(\"pointer-events\", \"none\")\n                        .attr('x', '5')\n                        .attr('y', '5')\n                        .attr('dy', '35px');\n\n            tooltipText.append('tspan')\n                        .attr('class', className)\n                        .text('click to download csv data')\n                        .attr(\"pointer-events\", \"none\")\n                        .attr('x', '5')\n                        .attr('y', '5')\n                        .attr('dy', '55px');\n    \n            svg.append(\"g\")\n               .append(\"rect\")\n                .style('opacity', 0)\n                .attr('id', hoverLineID)\n                .attr('class', className)\n                .attr(\"pointer-events\", \"none\")\n                .attr(\"class\", \"dotted\")\n                .attr(\"stroke-width\", \"1px\")\n                .attr(\"width\", \".5px\")\n                .attr(\"height\", boundedHeight);\n            \n        }\n\n        const svg = findByID(svgCycleChartID)\n                      .append(\"g\")\n                      .attr(\"transform\", marginTranslate);\n        const chartGroup = svg.append('g');\n        const tooltipGroup = svg.append('g');\n\n        cleanupPrev(perRunClass);\n        calcSummaryData();\n        drawChart(chartGroup);\n        prepHoverStuff(tooltipGroup);\n\n        // console.log('chart : e');\n        // eslint-disable-next-line\n    }, [\n        props.portfoliovalue,\n        props.portmin, \n        props.portmax,\n        props.cycledata, \n        props.cyclemeta, \n        props.numcycles, \n        props.currentage,\n        props.lifeexpectancy, \n        props.minzoom,\n        props.maxzoom,\n        props.zoomcolor,\n        props.selectedbin,\n    ] );\n\n    // console.log('chart : r');\n\n    return (\n        <div>\n            <SummaryCards \n             fails={numFailsState} cycles={props.numcycles}\n             numgreaterthanstart={numGreaterThanStartState}\n             minfailage={minFailAgeState} \n             avgendvalue={avgAdjEndValueState}\n             quantile10endvalue={quantile10EndValueState}\n             quantile25endvalue={quantile25EndValueState}\n             quantile50endvalue={quantile50EndValueState}\n             quantile75endvalue={quantile75EndValueState}\n             quantile90endvalue={quantile90EndValueState}\n             maxendvalue={maxAdjEndValueState}\n             medianreturns={medianReturnsState} avgreturns={avgReturnsState}\n             minreturns={minReturnsState} maxreturns={maxReturnsState}\n             netpositivepct={pctPositiveNetState}\n             />\n            <svg id={svgCycleChartID} \n                    width={totalWidth}\n                    height={totalHeight} \n            >\n            </svg>  \n            <EndValueChart \n             startvalue={props.portfoliovalue} \n             metadata={props.cyclemeta} \n             cyclechartid={svgCycleChartID} \n             zoomcallback={props.zoomcallback}\n             zoomcolor={props.zoomcolor}\n             selectedbin={props.selectedbin}\n             />            \n        </div>\n    );\n};\n\nexport default Chart;\n","import * as d3 from \"d3\";\nimport * as React from \"react\";\nimport { Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport { Box } from \"@mui/system\";\nimport Button from '@mui/material/Button';\nimport { Checkbox } from \"@mui/material\";\nimport { TextField } from \"@mui/material\";\nimport { List } from \"@mui/material\";\nimport { ListItem } from \"@mui/material\";\nimport { Slider } from \"@mui/material\";\nimport { FormGroup } from \"@mui/material\";\nimport { FormControlLabel } from \"@mui/material\";\nimport { FormControl } from \"@mui/material\";\nimport { FormLabel } from \"@mui/material\";\nimport { RadioGroup } from \"@mui/material\";\nimport { Radio } from \"@mui/material\";\nimport { Stack } from \"@mui/material\";\nimport { histData, generateSourceData } from \"./histdata.js\";\nimport { getColorStringForRelativeValue, dumpAllToCSVFile } from './common.js';\nimport Chart from './chart.js';\n\nconst defaultPortfolioValue = 1250000;\nconst defaultAge = 62;\nconst defaultExpectancy = 95;\nconst defaultSpendValue = 50000;\nconst defaultStocks = 80;\nconst defaultFeePct = 0.18;\nconst defaultSSIncome = 39312;\nconst defaultStartDataYear = histData[0].year;\nconst defaultEndDataYear = histData[histData.length - 1].year;\nconst maxExpectancy = 120;\nconst chartCompID = 'chartComponent';\nconst monteCarloString = 'montecarlo';\nconst historicalString = 'historical';\nconst defaultMCProjection = false;\n\nclass SWRCalc extends React.Component {\n\n    constructor (props) {\n        super(props);\n\n        this.state = {\n            currentAgeState: defaultAge,\n            lifeExpectancyState: defaultExpectancy,\n            portfolioValueState: defaultPortfolioValue,\n            spendValueState: defaultSpendValue,\n            spendModelState: 'dollars',\n            stockAllocPctState: defaultStocks,\n            feePctState: defaultFeePct,\n            monteCarloProjectionState: defaultMCProjection,\n            ssOnState: false,\n            socialSecurityIncomeState: defaultSSIncome,\n            socialSecurityAgeState: 67,\n            useAllHistDataState: true,\n            startDataYearState: defaultStartDataYear,\n            endDataYearState: defaultEndDataYear,\n            minZoomValueState: null,\n            maxZoomValueState: null,\n            zoomColorState: null,\n            selectedBinState: null,\n        }\n\n        this.sourceData = generateSourceData(this.state.monteCarloProjectionState, \n                                             this.state.lifeExpectancyState - this.state.currentAgeState + 1,\n                                             this.state.startDataYearState,\n                                             this.state.endDataYearState);\n    }\n\n    zoomChart (minZoom, maxZoom, colorKey, selectedBin) {\n        this.setState( {minZoomValueState : minZoom} );\n        this.setState( {maxZoomValueState : maxZoom} );\n        this.setState( {zoomColorState : colorKey} );\n        this.setState( {selectedBinState : selectedBin });\n    }\n\n    render () { \n\n        var portMin = this.state.portfolioValueState;\n        var portMax = this.state.portfolioValueState;\n        var allCycles = [];\n        var allCyclesMeta = [];\n\n        const handleAgeChange = (event) => {\n            var newValue = +(event.target.value);\n\n            if (newValue < this.state.lifeExpectancyState) {\n                this.sourceData = generateSourceData(this.state.monteCarloProjectionState, \n                                                     this.state.lifeExpectancyState - newValue + 1,\n                                                     this.state.startDataYearState,\n                                                     this.state.endDataYearState);\n\n                this.setState( {currentAgeState : newValue } ); \n            }                          \n        }\n\n        const handleSaveAll = (event) => {\n            dumpAllToCSVFile(allCycles);\n        }\n\n        const handleExpectChange = (event, newValue) => {\n\n            if (newValue > this.state.currentAgeState) {\n                this.sourceData = generateSourceData(this.state.monteCarloProjectionState, \n                                                newValue - this.state.currentAgeState + 1,\n                                                this.state.startDataYearState,\n                                                this.state.endDataYearState);\n                this.setState( {lifeExpectancyState : newValue} );\n            }\n        }\n\n        const handlePortfolioValueChange = (event) => {\n            var newValue = +(event.target.value);\n            this.setState( { portfolioValueState: newValue } );\n        }\n\n        const handleSpendingValueChange = (event) => {\n            var newValue = +(event.target.value);\n            this.setState( {spendValueState : newValue});\n        }\n\n        const handleAllocChange = (event) => {             \n            var newValue = +(event.target.value);\n            this.setState( {stockAllocPctState : newValue} );\n        }\n\n        const handleFeePctChange = (event) => {\n            var newValue = +(event.target.value);\n            this.setState( {feePctState : newValue} ); \n        }\n\n        const handleSSToggle = (event, newValue) => {\n            this.setState( {ssOnState: newValue} );\n        }\n\n        const handleChangeSSAge = (event) => {\n            var newValue = +(event.target.value);\n            this.setState( {socialSecurityAgeState: newValue});\n        }\n\n        const handleSocialSecurityIncomeChange = (event) => {\n            var newValue = +(event.target.value);\n            this.setState( { socialSecurityIncomeState : newValue });\n        }\n\n        const handleProjectionToggle = (event, newValue) => {\n            var mcProj = (monteCarloString === newValue);\n            this.sourceData = generateSourceData(mcProj, \n                                                 this.state.lifeExpectancyState - this.state.currentAgeState + 1,\n                                                 this.state.startDataYearState,\n                                                 this.state.endDataYearState);\n\n            this.setState( { monteCarloProjectionState : mcProj } );\n        }\n\n        const handleDataRangeChange = (event, newValue) => {\n            // restrict the range from being smaller than the user lifetime\n            // (life expectancy - age)\n            // we could permit this with monte carlo, but maybe later\n            var lifetime = this.state.lifeExpectancyState - this.state.currentAgeState + 1;\n            var rangeSize = newValue[1] - newValue[0];\n\n            if (rangeSize >= lifetime) {\n                this.sourceData = generateSourceData(this.state.monteCarloProjectionState, \n                                                     lifetime,\n                                                     newValue[0],\n                                                     newValue[1]);\n\n                this.setState( { startDataYearState : newValue[0] } );\n                this.setState( { endDataYearState : newValue[1] } );\n            }\n            else {\n                console.log('bzzt - range smaller than user lifetime');\n            }\n\n        }\n\n        const calcAnnualAggReturn = (beginValue, appr) => {\n            return appr / beginValue;\n        }        \n\n        const calcBondYield = (bondStake, sourceIndex, sourceData) => {\n                \n            var retValue = 0;\n            var h0 = sourceData[sourceIndex];\n            var h1 = h0 + 1;\n\n            // if we're at the end of the cycle, use the simplified calculation\n            if (histData.length <= h1) {\n                retValue = bondStake * histData[h0].bonds;\n            }\n            else {\n                var bg1 = (1 - Math.pow(1 + histData[h1].bonds, -9 ))\n                        * histData[h0].bonds;\n                bg1 = bg1 / histData[h1].bonds;\n                \n                var bg2 = 1 / Math.pow(1 + histData[h1].bonds, 9);\n                bg2 = bg2 - 1;\n\n                retValue = bondStake * (bg1 + bg2 + histData[h0].bonds);\n            }            \n\n            return retValue;\n        }\n\n        const applySpend = (thisCycle) => {\n            const ssAge = this.state.socialSecurityAgeState;\n            const ssIncome = (this.state.ssOnState) ? this.state.socialSecurityIncomeState : 0;\n\n            // get current spend (currently fixed)\n            thisCycle.spend = this.state.spendValueState;\n            // adjust spend for cumultative cpi\n            thisCycle.actualSpend = thisCycle.spend * thisCycle.cumulativeCPI;\n            // apply ss adjustment if applicable\n            var adjustment = (ssAge <= thisCycle.age) ? (ssIncome * thisCycle.cumulativeCPI) : 0;\n            thisCycle.actualSpend -= adjustment;\n            // subtract spend from start value\n            thisCycle.endValue = thisCycle.beginValue - thisCycle.actualSpend;\n        }\n\n        const applyAppreciation = (thisCycle, cycleNum, sourceData) => {\n            const stockPct = this.state.stockAllocPctState / 100;\n            const bondPct = 1 - stockPct;\n\n            // Use endValue, as it has the annual spend deducted already\n            thisCycle.beginEquityValue = thisCycle.endValue * stockPct;\n            thisCycle.beginBondValue = thisCycle.endValue * bondPct;\n\n            thisCycle.equityAppr = thisCycle.beginEquityValue * thisCycle.equityReturn;\n            thisCycle.divAppr = thisCycle.beginEquityValue * histData[sourceData[cycleNum]].dividends;\n            thisCycle.bondAppr = calcBondYield(thisCycle.beginBondValue, cycleNum, sourceData);\n            thisCycle.bondReturn = thisCycle.bondAppr / thisCycle.beginBondValue;\n\n            thisCycle.endEquityValue = thisCycle.beginEquityValue + thisCycle.equityAppr + thisCycle.divAppr;\n            thisCycle.endBondValue = thisCycle.beginBondValue + thisCycle.bondAppr;\n\n            thisCycle.endValue = thisCycle.endEquityValue + thisCycle.endBondValue;\n\n            // used for informational/summary purposes later\n            thisCycle.appr = thisCycle.equityAppr + thisCycle.divAppr + thisCycle.bondAppr;\n            thisCycle.adjAppr = thisCycle.appr / thisCycle.cumulativeCPI;\n            thisCycle.aggReturn = calcAnnualAggReturn(thisCycle.beginValue, thisCycle.appr);\n        }\n\n        const applyFees = (thisCycle) => {\n            // endValue include spend-down + current appreciation\n            const feePct = this.state.feePctState / 100;\n            const totalFees = thisCycle.endValue * feePct;\n            // end{Equity, Bond}Value includes per-class appreciation\n            const currEquityPct = thisCycle.endEquityValue / thisCycle.endValue;\n            const currBondPct = thisCycle.endBondValue / thisCycle.endValue;\n            var equityFees = totalFees * currEquityPct;\n            var bondFees = totalFees * currBondPct;\n\n            thisCycle.endEquityValue -= equityFees;\n            thisCycle.endBondValue -= bondFees;\n            thisCycle.endValue = thisCycle.endEquityValue + thisCycle.endBondValue;\n\n            thisCycle.fees = totalFees;\n        }\n\n        const calcNetDelta = (thisCycle) => {\n            thisCycle.netDelta = thisCycle.appr - thisCycle.actualSpend - thisCycle.fees;\n        }\n\n        const calcAdjustedEndValue = (thisCycle) => {\n            thisCycle.adjEndValue = thisCycle.endValue / thisCycle.cumulativeCPI;\n        }\n/*\n        const dumpYear = (oneYear) => {\n            console.log(oneYear.age + \n                        ' y:' + oneYear.year +\n                        ' bv:' + makeCurrency(oneYear.beginValue) +\n                        ' eApp:' + makeCurrency(oneYear.equityAppr) +\n                        ' bRet:' + makePct(oneYear.bondReturn) +\n                        // ' f:' + makeCurrency(oneYear.fees) +\n                        ' div:' + makeCurrency(oneYear.divAppr) + \n                        ' ccpi:' + oneYear.cumulativeCPI + \n                        ' sp:' + makeCurrency(oneYear.actualSpend) + \n                        ' ev:' + makeCurrency(oneYear.endValue) +\n                        ' delta:' + makeCurrency(oneYear.netDelta)\n                       );\n        }\n\n        const dumpCycle = (cycleData) => {\n            for (var i = 0; i < cycleData.length; i++) {\n                dumpYear(cycleData[i]);\n            }\n        }\n        */\n\n        const calcCumulativeCPI = (startCPI, thisYearCPI, sourceDataIndex, prevCCPI) => {\n\n            var retVal = 1;\n\n            // Historically-based sequence cumulative CPI calculated\n            // relative to first year in the sequence.\n            if (!(this.state.monteCarloProjectionState)) {\n                retVal = thisYearCPI / startCPI;\n            }\n            // Monte-carlo sequence cumulative CPI can only be calculated\n            // relative to previous year's value.  There can be as much as\n            // a 2% difference in this method vs. this / start ratio, so I've left \n            // that one in for the purposes of historical precision.\n            else {\n                // calculate annual change - currCPI / prevCPI\n                var prevYearIndex = (0 < sourceDataIndex) ? (sourceDataIndex - 1) : sourceDataIndex;\n                var annualChange = (histData[sourceDataIndex].cpi / histData[prevYearIndex].cpi) - 1;\n                retVal = prevCCPI + annualChange;\n            }\n\n            return retVal;\n        }\n\n        const runCycle = (startIndex, numYears, sourceData) => {\n            var cycleData = [];\n            // need to calculate cumulative CPI for both\n            // historically and monte-carlo sequences.\n            const startCPI = histData[sourceData[startIndex]].cpi;\n            var prevYearCCPI = 1;\n    \n            for(var i = 0; i < numYears; i++){\n                var thisIndex = sourceData[startIndex + i];\n                var thisYearSource = histData[thisIndex];\n                var obj = { \"year\": thisYearSource.year,\n                            \"age\": this.state.currentAgeState + i,\n                            \"beginValue\": (i > 0) ? cycleData[i - 1].endValue : this.state.portfolioValueState,\n                            \"beginEquityValue\": 0,\n                            \"endEquityValue\" : 0,\n                            \"beginBondValue\" : 0,\n                            \"endBondValue\" : 0,\n                            \"equityReturn\": thisYearSource.equity,\n                            \"cumulativeCPI\": (0 === i) ? 1 : calcCumulativeCPI(startCPI, thisYearSource.cpi, thisIndex, prevYearCCPI),\n                            \"spend\": 0,\n                            \"endValue\": 0,\n                            // the rest of these fields are not updated when a failure is detected\n                            \"equityAppr\": 0,\n                            \"divAppr\": 0,\n                            \"bondReturn\": 0,\n                            \"bondAppr\": 0,\n                            \"aggReturn\": 0,\n                            \"actualSpend\": 0,\n                            \"fees\": 0,\n                            \"netDelta\": 0,\n                            \"adjEndValue\": 0,\n                            \"appr\": 0,\n                            \"adjAppr\": 0,\n                          };\n                prevYearCCPI = obj.cumulativeCPI;\n                // get spend adjusted for inflation and ss benefits\n                applySpend(obj);\n\n                // detect failure (out of funds), and terminate cycle.\n                if (0 >= obj.endValue) {\n                    obj.endValue = obj.adjEndValue = 0;\n                    cycleData.push(obj);\n                    break;\n                }\n\n                applyAppreciation(obj, startIndex + i, sourceData);\n                applyFees(obj);\n\n                // net delta is for informational purposes used later\n                calcNetDelta (obj);\n                calcAdjustedEndValue(obj);\n\n                cycleData.push(obj);\n            }\n            return cycleData;\n        }\n\n        const calcCycleMeta = (oneCycle) => {\n            var extAdjEndValue = d3.extent(oneCycle, (d) => d.adjEndValue);\n            var avgAdjEndValue = d3.mean(oneCycle, (d) => d.adjEndValue);\n            var medAdjEndValue = d3.median(oneCycle, (d) => d.adjEndValue);\n            var totalSpend = d3.sum(oneCycle, (d) => d.actualSpend);\n            var totalAppr = d3.sum(oneCycle, (d) => d.appr);\n            var totalAdjAppr = d3.sum(oneCycle, (d) => d.adjAppr);\n            var pctStart = oneCycle[oneCycle.length - 1].adjEndValue / this.state.portfolioValueState;\n            const thisLineColor = getColorStringForRelativeValue(pctStart);\n            var extAggReturn = d3.extent(oneCycle, (d) => d.aggReturn);\n            var avgAggReturn = d3.mean(oneCycle, (d) => d.aggReturn);\n            var medAggReturn = d3.median(oneCycle, (d) => d.aggReturn);\n    \n            var oneMeta = {\n                'startCycleValue': this.state.portfolioValueState,\n                'endCycleValue': oneCycle[oneCycle.length - 1].endValue,\n                'adjEndCycleValue': oneCycle[oneCycle.length - 1].adjEndValue,\n                'extent': extAdjEndValue,\n                'mean': avgAdjEndValue,\n                'median': medAdjEndValue,\n                'pctOfStart': pctStart,\n                'totalSpend': totalSpend,\n                'totalAppreciation': totalAppr,\n                'totalAdjAppreciation': totalAdjAppr,\n                'extAggReturn': extAggReturn,\n                'avgAggReturn': avgAggReturn,\n                'medAggReturn': medAggReturn,\n                'fail': (0 >= oneCycle[oneCycle.length - 1].adjEndValue),\n                'failAge': (0 >= oneCycle[oneCycle.length - 1].adjEndValue) ? \n                           (oneCycle[oneCycle.length - 1].age) :\n                           undefined,\n                'startYear': oneCycle[0].year,\n                'cycleData': oneCycle,\n                'lineColor': thisLineColor,\n            };\n    \n            return oneMeta;\n        }            \n\n        const calcCycles = (srcData) => {\n\n            var lifetime = this.state.lifeExpectancyState - this.state.currentAgeState + 1;\n            var numCycles = srcData.length / lifetime;\n\n            for (var i = 0; i < numCycles; i++) {  \n                var startIndex = (i * lifetime);\n                var oneCycle = runCycle(startIndex, lifetime, srcData);\n                var cycleMeta = calcCycleMeta(oneCycle);\n                \n                allCyclesMeta[i] = cycleMeta;\n                allCycles[i] = oneCycle;\n\n                portMin = Math.min(portMin, cycleMeta.extent[0]);\n                portMax = Math.max(portMax, cycleMeta.extent[1]);\n            }\n        }\n\n        if (null != this.sourceData) {\n            calcCycles(this.sourceData);\n        }\n\n        return (\n\n            <div>\n            <Stack direction=\"row\"> \n                  <div className=\"Inputs\" >\n                    <header className=\"Inputs-header\">\n                        <Box sx={{\n                            bgcolor: 'background.paper',\n                            boxShadow: 10,\n                            borderRadius: 10,\n                            p: 2,\n                            minWidth: 300,\n                        }} >\n\n                            <List> \n                                <ListItem  >\n                                    <TextField required label=\"Age\" \n                                        sx={{ m: '10px' }}\n                                        type=\"number\"\n                                        value={this.state.currentAgeState}\n                                        onChange={handleAgeChange}\n                                        InputLabelProps={{\n                                        shrink: true,\n                                        }}\n                                    />\n                                    <Button variant=\"outlined\" onClick={handleSaveAll} >Save to CSV</Button>\n                                </ListItem>\n                                <ListItem  >\n                                    <div >Life expectancy : {this.state.lifeExpectancyState}</div>                                 \n                                </ListItem>\n                                <ListItem divider >\n                                    <Slider id=\"aExpect\" label=\"Life Expectancy\" marks step={1} \n                                            min={this.state.currentAgeState} max={maxExpectancy}\n                                            valueLabelDisplay=\"auto\" value={this.state.lifeExpectancyState}  \n                                            onChange={handleExpectChange} />\n                                </ListItem>\n                                <ListItem divider >\n                                    <TextField required \n                                    sx={{ m: '10px' }}\n                                    type=\"number\" label=\"Portfolio Value $\" \n                                    defaultValue={defaultPortfolioValue} \n                                    onChange={handlePortfolioValueChange} />\n                                    <TextField required \n                                    sx={{ m: '10px' }}\n                                    type=\"number\" label=\"Annual Spend $\" \n                                    defaultValue={defaultSpendValue} \n                                    onChange={handleSpendingValueChange} />\n                                </ListItem>\n                                <ListItem divider >\n                                    <Accordion>\n                                        <AccordionSummary>\n                                            <div >Stocks: </div>\n                                            <div id=\"sAlloc\" >{this.state.stockAllocPctState}%</div>\n                                            <div >&nbsp; Bonds: </div>\n                                            <div id=\"bAlloc\" >{100-this.state.stockAllocPctState}%</div>\n                                        </AccordionSummary>\n                                        <AccordionDetails>\n                                                <Slider id=\"aAlloc\" label=\"Stock Allocation\" marks step={5} \n                                                    valueLabelDisplay=\"auto\" defaultValue={defaultStocks}  \n                                                    onChange={handleAllocChange} />\n                                                <TextField required \n                                                sx={{ m: '10px' }}\n                                                type=\"number\" label=\"Annual Fee %\" \n                                                defaultValue={defaultFeePct} \n                                                onChange={handleFeePctChange} />\n                                        </AccordionDetails>\n                                    </Accordion>\n                                </ListItem> \n                                <ListItem>\n                                    <Accordion>\n                                        <AccordionSummary>\n                                            <FormControl>\n                                                <RadioGroup\n                                                    aria-labelledby=\"projectionTypeID\"\n                                                    defaultValue={historicalString}\n                                                    name=\"radio-buttons-group\"\n                                                    row\n                                                    onChange={handleProjectionToggle}\n                                                >\n                                                    <FormControlLabel value={historicalString} control={<Radio />} label=\"historical\" />\n                                                    <FormControlLabel value={monteCarloString} control={<Radio />} label=\"monte carlo\" />\n                                                </RadioGroup>\n                                            </FormControl>\n                                        </AccordionSummary>\n                                        <AccordionDetails>\n                                            <div disabled={this.state.monteCarloProjectionState}>Historical data from {this.state.startDataYearState} to {this.state.endDataYearState}</div>                                 \n                                            <Slider  \n                                            disabled={this.state.monteCarloProjectionState}\n                                            marks step={1}\n                                            min={defaultStartDataYear} max={defaultEndDataYear}\n                                            defaultValue={[defaultStartDataYear, defaultEndDataYear]}\n                                            value={ [this.state.startDataYearState, this.state.endDataYearState] }\n                                            valueLabelDisplay=\"auto\"                                     \n                                            onChange={handleDataRangeChange}\n                                            />\n                                        </AccordionDetails>\n                                    </Accordion>\n                                </ListItem>\n                                <ListItem >\n                                    <Accordion>\n                                        <AccordionSummary>\n                                            <FormGroup>\n                                                <FormControlLabel control={<Checkbox />} label=\"include Social Security income\" \n                                                    onChange={handleSSToggle}\n                                                />\n                                            </FormGroup>\n                                        </AccordionSummary>\n                                        <AccordionDetails >\n                                            <TextField disabled={!(this.state.ssOnState)} \n                                             sx={{ m: '10px' }}\n                                             type=\"number\" label=\"Annual SS $\" \n                                             defaultValue={defaultSSIncome}\n                                             onChange={handleSocialSecurityIncomeChange} />\n                                            <FormControl disabled={!(this.state.ssOnState)} component=\"fieldset\">\n                                                <FormLabel component=\"legend\">Start at age</FormLabel>\n                                                <RadioGroup\n                                                aria-label=\"ss-start\"\n                                                onChange={handleChangeSSAge}\n                                                row\n                                                defaultValue=\"67\"\n                                                name=\"radio-buttons-group\">\n                                                    <FormControlLabel value=\"62\" control={<Radio />} label=\"62\" />\n                                                    <FormControlLabel value=\"67\" control={<Radio />} label=\"67\" />\n                                                    <FormControlLabel value=\"70\" control={<Radio />} label=\"70\" />\n                                                </RadioGroup>\n                                            </FormControl>\n                                        </AccordionDetails>\n                                    </Accordion>\n                                </ListItem>\n                            </List>                        \n                        </Box>\n\n                    </header>\n                </div>              \n\n                <Chart id={ chartCompID }\n                       portfoliovalue={this.state.portfolioValueState}\n                       portmin={portMin}\n                       portmax={portMax}\n                       cycledata={allCycles}\n                       cyclemeta={allCyclesMeta}\n                       numcycles={ (null != this.sourceData) \n                                  ? (this.sourceData.length / \n                                     (this.state.lifeExpectancyState - this.state.currentAgeState + 1) ) \n                                  : 0  }\n                       currentage={this.state.currentAgeState}\n                       lifeexpectancy={this.state.lifeExpectancyState}\n                       minzoom={this.state.minZoomValueState}\n                       maxzoom={this.state.maxZoomValueState}\n                       zoomcolor={this.state.zoomColorState}\n                       zoomcallback={this.zoomChart.bind(this)}\n                       selectedbin={this.state.selectedBinState}\n                />\n            </Stack>\n            </div>\n        );\n    }\n\n}\n\n  export default SWRCalc;","\nimport { Stack } from \"@mui/material\";\nimport AppBar from '@mui/material/AppBar';\n\nimport './App.css';\nimport SWRCalc from './swrcalc.js';\n\nfunction App() {\n  \n  return (\n      <Stack spacing={5}>\n        <AppBar> SWR Calculator</AppBar>\n        <Stack direction='row'>\n          <SWRCalc />\n        </Stack>\n      </Stack>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}